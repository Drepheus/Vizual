
{% extends "base.html" %}

{% block content %}
<div class="landing-container">
  <video autoplay muted loop playsinline id="bgVideo" class="background-video">
    <source src="{{ url_for('static', filename='videos/14618955-uhd_2160_3840_24fps.mp4') }}" type="video/mp4">
  </video>
  <div class="container d-flex flex-column justify-content-center align-items-center" style="height: 100%;">
    <!-- Logo Container -->
    <div class="logo-container">
      <h1 class="logo-text">Omi AI</h1>
    </div>
    
    <!-- Navigation Buttons -->
    <div class="action-buttons">
      <a href="{{ url_for('simple_dashboard') }}" class="btn-use-omi">Use Omi</a>
      <div class="tool-hub-link">
        <a href="{{ url_for('tool_hub') }}" class="ai-tool-hub">AI Tool Hub ~></a>
      </div>
    </div>
  </div>
  
  <div class="corner-text">
    <a href="{{ url_for('dashboard') }}">Government Contractors -> </a>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
  const video = document.getElementById('bgVideo');
  
  // Force video to play and loop on all devices
  function playVideo() {
    if (video.paused) {
      video.play().catch(error => {
        console.log("Video play failed: ", error);
        // Try again with a user interaction
        document.body.addEventListener('touchstart', function() {
          video.play();
        }, { once: true });
      });
    }
    
    // Ensure video loops
    video.addEventListener('ended', function() {
      video.currentTime = 0;
      video.play().catch(e => console.log("Loop play failed: ", e));
    });
  }
  
  // Initial play attempt
  playVideo();
  
  // Add extra assurance for iOS devices
  video.addEventListener('timeupdate', function() {
    // If video is near the end (last 0.5 seconds), make sure we're ready to loop
    if (video.currentTime > video.duration - 0.5) {
      if (!video.loop) {
        console.log("Reinforcing loop attribute");
        video.loop = true;
      }
    }
  });
  
  // For iOS/Safari browser issues - add visibility change detection
  document.addEventListener('visibilitychange', function() {
    if (document.visibilityState === 'visible') {
      // When tab becomes visible again, ensure video is playing
      if (video.paused) {
        video.play().catch(e => console.log("Visibility play failed: ", e));
      }
    }
  });
});
</script>
{% endblock %}
