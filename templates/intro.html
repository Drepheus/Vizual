{% extends "base.html" %}

{% block content %}
<div class="intro-container">
    <video id="intro-video" class="intro-video" muted playsinline>
        <source src="{{ url_for('static', filename='videos/intro.mp4') }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
</div>

<div class="landing-content" style="display: none; opacity: 0;">
    {% include "landing.html" %}
</div>
{% endblock %}

{% block styles %}
<style>
.intro-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background: #1f1f1f;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

.intro-video {
    max-width: 100%;
    max-height: 100vh;
}

.fade-out {
    opacity: 0;
    transition: opacity 0.5s ease-out;
}

.fade-in {
    opacity: 1 !important;
    transition: opacity 0.5s ease-in;
}

.landing-content {
    position: relative;
    width: 100%;
    min-height: 100vh;
}
</style>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const video = document.getElementById('intro-video');
    const introContainer = document.querySelector('.intro-container');
    const landingContent = document.querySelector('.landing-content');

    // Play video when loaded
    video.play().catch(function(error) {
        console.log("Video play failed:", error);
        // If video fails to play, show landing page
        skipToLanding();
    });

    // When video ends
    video.addEventListener('ended', function() {
        // Fade out intro
        introContainer.classList.add('fade-out');

        // Show landing page
        landingContent.style.display = 'block';
        setTimeout(() => {
            landingContent.classList.add('fade-in');
            // Remove intro container after fade
            setTimeout(() => {
                introContainer.style.display = 'none';
            }, 500);
        }, 50);
    });

    function skipToLanding() {
        introContainer.style.display = 'none';
        landingContent.style.display = 'block';
        landingContent.classList.add('fade-in');
    }
});
</script>
{% endblock %}