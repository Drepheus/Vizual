{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ajgre/Omi-AI-1/src/FormattedText.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React from 'react';\r\nimport { motion, useInView } from 'framer-motion';\r\nimport { useRef } from 'react';\r\n\r\ninterface FormattedTextProps {\r\n  text: string;\r\n  className?: string;\r\n  delay?: number;\r\n}\r\n\r\nexport default function FormattedText({ text, className = '', delay = 0 }: FormattedTextProps) {\r\n  const ref = useRef(null);\r\n  const isInView = useInView(ref, { once: true });\r\n\r\n  const parseMarkdownToElements = (text: string) => {\r\n    const elements: React.ReactElement[] = [];\r\n    let wordIndex = 0;\r\n\r\n    // Enhanced regex to capture all markdown patterns including links\r\n    const parts = text.split(/(\\*\\*[^*]+\\*\\*|\\*[^*]+\\*|`[^`]+`|\\[([^\\]]+)\\]\\(([^)]+)\\)|^[-•]\\s+.*$|^\\d+\\.\\s+.*$)/gm);\r\n    \r\n    parts.forEach((part, partIndex) => {\r\n      if (!part) return;\r\n\r\n      if (part.match(/^\\*\\*[^*]+\\*\\*$/)) {\r\n        // Bold text\r\n        const boldText = part.slice(2, -2);\r\n        const words = boldText.split(' ');\r\n        words.forEach((word, idx) => {\r\n          if (word.trim()) {\r\n            elements.push(\r\n              <motion.strong\r\n                key={`${partIndex}-${idx}-${wordIndex}`}\r\n                initial={{ opacity: 0, filter: 'blur(10px)' }}\r\n                animate={isInView ? { opacity: 1, filter: 'blur(0px)' } : {}}\r\n                transition={{\r\n                  duration: 0.3,\r\n                  delay: wordIndex * 0.03 + delay,\r\n                  ease: [0.4, 0.0, 0.2, 1]\r\n                }}\r\n                style={{ display: 'inline-block', marginRight: '0.25em' }}\r\n                className=\"text-bold\"\r\n              >\r\n                {word}\r\n              </motion.strong>\r\n            );\r\n            wordIndex++;\r\n          }\r\n        });\r\n      } else if (part.match(/^\\*[^*]+\\*$/) && !part.match(/^\\*\\*.*\\*\\*$/)) {\r\n        // Italic text (single asterisk, not double)\r\n        const italicText = part.slice(1, -1);\r\n        const words = italicText.split(' ');\r\n        words.forEach((word, idx) => {\r\n          if (word.trim()) {\r\n            elements.push(\r\n              <motion.em\r\n                key={`${partIndex}-${idx}-${wordIndex}`}\r\n                initial={{ opacity: 0, filter: 'blur(10px)' }}\r\n                animate={isInView ? { opacity: 1, filter: 'blur(0px)' } : {}}\r\n                transition={{\r\n                  duration: 0.3,\r\n                  delay: wordIndex * 0.03 + delay,\r\n                  ease: [0.4, 0.0, 0.2, 1]\r\n                }}\r\n                style={{ display: 'inline-block', marginRight: '0.25em' }}\r\n                className=\"text-italic\"\r\n              >\r\n                {word}\r\n              </motion.em>\r\n            );\r\n            wordIndex++;\r\n          }\r\n        });\r\n      } else if (part.match(/^`[^`]+`$/)) {\r\n        // Code text\r\n        const codeText = part.slice(1, -1);\r\n        elements.push(\r\n          <motion.code\r\n            key={`${partIndex}-${wordIndex}`}\r\n            initial={{ opacity: 0, filter: 'blur(10px)' }}\r\n            animate={isInView ? { opacity: 1, filter: 'blur(0px)' } : {}}\r\n            transition={{\r\n              duration: 0.3,\r\n              delay: wordIndex * 0.03 + delay,\r\n              ease: [0.4, 0.0, 0.2, 1]\r\n            }}\r\n            style={{ display: 'inline-block', marginRight: '0.25em' }}\r\n            className=\"text-code\"\r\n          >\r\n            {codeText}\r\n          </motion.code>\r\n        );\r\n        wordIndex++;\r\n      } else if (part.match(/\\[([^\\]]+)\\]\\(([^)]+)\\)/)) {\r\n        // Markdown link [text](url)\r\n        const match = part.match(/\\[([^\\]]+)\\]\\(([^)]+)\\)/);\r\n        if (match) {\r\n          const linkText = match[1];\r\n          const linkUrl = match[2];\r\n          elements.push(\r\n            <motion.a\r\n              key={`${partIndex}-${wordIndex}`}\r\n              href={linkUrl}\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n              initial={{ opacity: 0, filter: 'blur(10px)' }}\r\n              animate={isInView ? { opacity: 1, filter: 'blur(0px)' } : {}}\r\n              transition={{\r\n                duration: 0.3,\r\n                delay: wordIndex * 0.03 + delay,\r\n                ease: [0.4, 0.0, 0.2, 1]\r\n              }}\r\n              style={{ display: 'inline-block', marginRight: '0.25em' }}\r\n              className=\"text-link gradient-link\"\r\n            >\r\n              {linkText}\r\n            </motion.a>\r\n          );\r\n          wordIndex += linkText.split(' ').length;\r\n        }\r\n      } else if (part.match(/^[-•]\\s+/) || part.match(/^\\d+\\.\\s+/)) {\r\n        // Bullet points or numbered lists\r\n        const isNumbered = part.match(/^\\d+\\.\\s+/);\r\n        const bulletSymbol = isNumbered ? part.match(/^\\d+\\./)![0] : '•';\r\n        const bulletText = part.replace(/^[-•]\\s+|^\\d+\\.\\s+/, '');\r\n        \r\n        elements.push(\r\n          <motion.div\r\n            key={`${partIndex}-${wordIndex}`}\r\n            initial={{ opacity: 0, filter: 'blur(10px)' }}\r\n            animate={isInView ? { opacity: 1, filter: 'blur(0px)' } : {}}\r\n            transition={{\r\n              duration: 0.3,\r\n              delay: wordIndex * 0.03 + delay,\r\n              ease: [0.4, 0.0, 0.2, 1]\r\n            }}\r\n            className=\"bullet-point\"\r\n          >\r\n            <span className=\"bullet\">{bulletSymbol}</span>\r\n            <span className=\"bullet-text\">{bulletText}</span>\r\n          </motion.div>\r\n        );\r\n        wordIndex += bulletText.split(' ').length;\r\n      } else if (part === '\\n') {\r\n        // Line break\r\n        elements.push(<br key={`br-${partIndex}-${wordIndex}`} />);\r\n      } else {\r\n        // Regular text\r\n        const words = part.split(/(\\s+)/);\r\n        words.forEach((word, idx) => {\r\n          if (word.trim()) {\r\n            elements.push(\r\n              <motion.span\r\n                key={`${partIndex}-${idx}-${wordIndex}`}\r\n                initial={{ opacity: 0, filter: 'blur(10px)' }}\r\n                animate={isInView ? { opacity: 1, filter: 'blur(0px)' } : {}}\r\n                transition={{\r\n                  duration: 0.3,\r\n                  delay: wordIndex * 0.03 + delay,\r\n                  ease: [0.4, 0.0, 0.2, 1]\r\n                }}\r\n                style={{ display: 'inline-block', marginRight: '0.25em' }}\r\n              >\r\n                {word}\r\n              </motion.span>\r\n            );\r\n            wordIndex++;\r\n          } else if (word === ' ') {\r\n            // Preserve spaces\r\n            elements.push(\r\n              <span key={`space-${partIndex}-${idx}`}> </span>\r\n            );\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    return elements;\r\n  };\r\n\r\n  return (\r\n    <div ref={ref} className={className}>\r\n      {parseMarkdownToElements(text)}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 314, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ajgre/Omi-AI-1/src/Dock.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { motion, useMotionValue, useSpring, useTransform, AnimatePresence } from 'framer-motion';\r\nimport { Children, cloneElement, useEffect, useMemo, useRef, useState } from 'react';\r\n\r\nfunction DockItem({ children, className = '', onClick, mouseX, spring, distance, magnification, baseItemSize }) {\r\n  const ref = useRef(null);\r\n  const isHovered = useMotionValue(0);\r\n\r\n  const mouseDistance = useTransform(mouseX, val => {\r\n    const rect = ref.current?.getBoundingClientRect() ?? {\r\n      x: 0,\r\n      width: baseItemSize\r\n    };\r\n    return val - rect.x - baseItemSize / 2;\r\n  });\r\n\r\n  const targetSize = useTransform(mouseDistance, [-distance, 0, distance], [baseItemSize, magnification, baseItemSize]);\r\n  const size = useSpring(targetSize, spring);\r\n\r\n  return (\r\n    <motion.div\r\n      ref={ref}\r\n      style={{\r\n        width: size,\r\n        height: size\r\n      }}\r\n      onHoverStart={() => isHovered.set(1)}\r\n      onHoverEnd={() => isHovered.set(0)}\r\n      onFocus={() => isHovered.set(1)}\r\n      onBlur={() => isHovered.set(0)}\r\n      onClick={onClick}\r\n      className={`dock-item ${className}`}\r\n      tabIndex={0}\r\n      role=\"button\"\r\n      aria-haspopup=\"true\"\r\n    >\r\n      {Children.map(children, child => cloneElement(child, { isHovered }))}\r\n    </motion.div>\r\n  );\r\n}\r\n\r\nfunction DockLabel({ children, className = '', ...rest }) {\r\n  const { isHovered } = rest;\r\n  const [isVisible, setIsVisible] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = isHovered.on('change', latest => {\r\n      setIsVisible(latest === 1);\r\n    });\r\n    return () => unsubscribe();\r\n  }, [isHovered]);\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      {isVisible && (\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 0 }}\r\n          animate={{ opacity: 1, y: -10 }}\r\n          exit={{ opacity: 0, y: 0 }}\r\n          transition={{ duration: 0.2 }}\r\n          className={`dock-label ${className}`}\r\n          role=\"tooltip\"\r\n          style={{ x: '-50%' }}\r\n        >\r\n          {children}\r\n        </motion.div>\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n}\r\n\r\nfunction DockIcon({ children, className = '' }) {\r\n  return <div className={`dock-icon ${className}`}>{children}</div>;\r\n}\r\n\r\nexport default function Dock({\r\n  items,\r\n  className = '',\r\n  spring = { mass: 0.1, stiffness: 150, damping: 12 },\r\n  magnification = 70,\r\n  distance = 200,\r\n  panelHeight = 68,\r\n  dockHeight = 256,\r\n  baseItemSize = 50\r\n}) {\r\n  const mouseX = useMotionValue(Infinity);\r\n  const isHovered = useMotionValue(0);\r\n\r\n  const maxHeight = useMemo(\r\n    () => Math.max(dockHeight, magnification + magnification / 2 + 4),\r\n    [magnification, dockHeight]\r\n  );\r\n  const heightRow = useTransform(isHovered, [0, 1], [panelHeight, maxHeight]);\r\n  const height = useSpring(heightRow, spring);\r\n\r\n  return (\r\n    <motion.div style={{ height, scrollbarWidth: 'none' }} className=\"dock-outer\">\r\n      <motion.div\r\n        onMouseMove={({ pageX }) => {\r\n          isHovered.set(1);\r\n          mouseX.set(pageX);\r\n        }}\r\n        onMouseLeave={() => {\r\n          isHovered.set(0);\r\n          mouseX.set(Infinity);\r\n        }}\r\n        className={`dock-panel ${className}`}\r\n        style={{ height: panelHeight }}\r\n        role=\"toolbar\"\r\n        aria-label=\"Application dock\"\r\n      >\r\n        {items.map((item, index) => (\r\n          <DockItem\r\n            key={index}\r\n            onClick={item.onClick}\r\n            className={item.className}\r\n            mouseX={mouseX}\r\n            spring={spring}\r\n            distance={distance}\r\n            magnification={magnification}\r\n            baseItemSize={baseItemSize}\r\n          >\r\n            <DockIcon>\r\n              {item.isImage ? (\r\n                <img \r\n                  src={item.icon} \r\n                  alt={item.label} \r\n                  style={{ width: '100%', height: '100%', objectFit: 'contain' }}\r\n                />\r\n              ) : (\r\n                item.icon\r\n              )}\r\n            </DockIcon>\r\n            <DockLabel>{item.label}</DockLabel>\r\n          </DockItem>\r\n        ))}\r\n      </motion.div>\r\n    </motion.div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;;;AAHA;;;AAKA,SAAS,SAAS,EAAE,QAAQ,EAAE,YAAY,EAAE,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,aAAa,EAAE,YAAY,EAAE;;IAC5G,MAAM,MAAM,IAAA,kSAAM,EAAC;IACnB,MAAM,YAAY,IAAA,+TAAc,EAAC;IAEjC,MAAM,gBAAgB,IAAA,uTAAY,EAAC;gDAAQ,CAAA;YACzC,MAAM,OAAO,IAAI,OAAO,EAAE,2BAA2B;gBACnD,GAAG;gBACH,OAAO;YACT;YACA,OAAO,MAAM,KAAK,CAAC,GAAG,eAAe;QACvC;;IAEA,MAAM,aAAa,IAAA,uTAAY,EAAC,eAAe;QAAC,CAAC;QAAU;QAAG;KAAS,EAAE;QAAC;QAAc;QAAe;KAAa;IACpH,MAAM,OAAO,IAAA,iTAAS,EAAC,YAAY;IAEnC,qBACE,wTAAC,+TAAM,CAAC,GAAG;QACT,KAAK;QACL,OAAO;YACL,OAAO;YACP,QAAQ;QACV;QACA,cAAc,IAAM,UAAU,GAAG,CAAC;QAClC,YAAY,IAAM,UAAU,GAAG,CAAC;QAChC,SAAS,IAAM,UAAU,GAAG,CAAC;QAC7B,QAAQ,IAAM,UAAU,GAAG,CAAC;QAC5B,SAAS;QACT,WAAW,CAAC,UAAU,EAAE,WAAW;QACnC,UAAU;QACV,MAAK;QACL,iBAAc;kBAEb,oSAAQ,CAAC,GAAG,CAAC,UAAU,CAAA,sBAAS,IAAA,wSAAY,EAAC,OAAO;gBAAE;YAAU;;;;;;AAGvE;GAnCS;;QAEW,+TAAc;QAEV,uTAAY;QAQf,uTAAY;QAClB,iTAAS;;;KAbf;AAqCT,SAAS,UAAU,EAAE,QAAQ,EAAE,YAAY,EAAE,EAAE,GAAG,MAAM;;IACtD,MAAM,EAAE,SAAS,EAAE,GAAG;IACtB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,oSAAQ,EAAC;IAE3C,IAAA,qSAAS;+BAAC;YACR,MAAM,cAAc,UAAU,EAAE,CAAC;mDAAU,CAAA;oBACzC,aAAa,WAAW;gBAC1B;;YACA;uCAAO,IAAM;;QACf;8BAAG;QAAC;KAAU;IAEd,qBACE,wTAAC,uUAAe;kBACb,2BACC,wTAAC,+TAAM,CAAC,GAAG;YACT,SAAS;gBAAE,SAAS;gBAAG,GAAG;YAAE;YAC5B,SAAS;gBAAE,SAAS;gBAAG,GAAG,CAAC;YAAG;YAC9B,MAAM;gBAAE,SAAS;gBAAG,GAAG;YAAE;YACzB,YAAY;gBAAE,UAAU;YAAI;YAC5B,WAAW,CAAC,WAAW,EAAE,WAAW;YACpC,MAAK;YACL,OAAO;gBAAE,GAAG;YAAO;sBAElB;;;;;;;;;;;AAKX;IA5BS;MAAA;AA8BT,SAAS,SAAS,EAAE,QAAQ,EAAE,YAAY,EAAE,EAAE;IAC5C,qBAAO,wTAAC;QAAI,WAAW,CAAC,UAAU,EAAE,WAAW;kBAAG;;;;;;AACpD;MAFS;AAIM,SAAS,KAAK,EAC3B,KAAK,EACL,YAAY,EAAE,EACd,SAAS;IAAE,MAAM;IAAK,WAAW;IAAK,SAAS;AAAG,CAAC,EACnD,gBAAgB,EAAE,EAClB,WAAW,GAAG,EACd,cAAc,EAAE,EAChB,aAAa,GAAG,EAChB,eAAe,EAAE,EAClB;;IACC,MAAM,SAAS,IAAA,+TAAc,EAAC;IAC9B,MAAM,YAAY,IAAA,+TAAc,EAAC;IAEjC,MAAM,YAAY,IAAA,mSAAO;mCACvB,IAAM,KAAK,GAAG,CAAC,YAAY,gBAAgB,gBAAgB,IAAI;kCAC/D;QAAC;QAAe;KAAW;IAE7B,MAAM,YAAY,IAAA,uTAAY,EAAC,WAAW;QAAC;QAAG;KAAE,EAAE;QAAC;QAAa;KAAU;IAC1E,MAAM,SAAS,IAAA,iTAAS,EAAC,WAAW;IAEpC,qBACE,wTAAC,+TAAM,CAAC,GAAG;QAAC,OAAO;YAAE;YAAQ,gBAAgB;QAAO;QAAG,WAAU;kBAC/D,cAAA,wTAAC,+TAAM,CAAC,GAAG;YACT,aAAa,CAAC,EAAE,KAAK,EAAE;gBACrB,UAAU,GAAG,CAAC;gBACd,OAAO,GAAG,CAAC;YACb;YACA,cAAc;gBACZ,UAAU,GAAG,CAAC;gBACd,OAAO,GAAG,CAAC;YACb;YACA,WAAW,CAAC,WAAW,EAAE,WAAW;YACpC,OAAO;gBAAE,QAAQ;YAAY;YAC7B,MAAK;YACL,cAAW;sBAEV,MAAM,GAAG,CAAC,CAAC,MAAM,sBAChB,wTAAC;oBAEC,SAAS,KAAK,OAAO;oBACrB,WAAW,KAAK,SAAS;oBACzB,QAAQ;oBACR,QAAQ;oBACR,UAAU;oBACV,eAAe;oBACf,cAAc;;sCAEd,wTAAC;sCACE,KAAK,OAAO,iBACX,wTAAC;gCACC,KAAK,KAAK,IAAI;gCACd,KAAK,KAAK,KAAK;gCACf,OAAO;oCAAE,OAAO;oCAAQ,QAAQ;oCAAQ,WAAW;gCAAU;;;;;uCAG/D,KAAK,IAAI;;;;;;sCAGb,wTAAC;sCAAW,KAAK,KAAK;;;;;;;mBApBjB;;;;;;;;;;;;;;;AA0BjB;IAhEwB;;QAUP,+TAAc;QACX,+TAAc;QAMd,uTAAY;QACf,iTAAS;;;MAlBF"}},
    {"offset": {"line": 567, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ajgre/Omi-AI-1/src/InfiniteScroll.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useRef, useEffect } from 'react';\r\nimport { gsap } from 'gsap';\r\nimport { Observer } from 'gsap/Observer';\r\n\r\ngsap.registerPlugin(Observer);\r\n\r\ninterface InfiniteScrollItem {\r\n  content: React.ReactNode;\r\n}\r\n\r\ninterface InfiniteScrollProps {\r\n  width?: string;\r\n  maxHeight?: string;\r\n  negativeMargin?: string;\r\n  items: InfiniteScrollItem[];\r\n  itemMinHeight?: number;\r\n  isTilted?: boolean;\r\n  tiltDirection?: 'left' | 'right';\r\n  autoplay?: boolean;\r\n  autoplaySpeed?: number;\r\n  autoplayDirection?: 'up' | 'down';\r\n  pauseOnHover?: boolean;\r\n}\r\n\r\nconst InfiniteScroll: React.FC<InfiniteScrollProps> = ({\r\n  width = '30rem',\r\n  maxHeight = '100%',\r\n  negativeMargin = '-0.5em',\r\n  items = [],\r\n  itemMinHeight = 150,\r\n  isTilted = false,\r\n  tiltDirection = 'left',\r\n  autoplay = false,\r\n  autoplaySpeed = 0.5,\r\n  autoplayDirection = 'down',\r\n  pauseOnHover = false\r\n}) => {\r\n  const wrapperRef = useRef<HTMLDivElement>(null);\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n  const getTiltTransform = () => {\r\n    if (!isTilted) return 'none';\r\n    return tiltDirection === 'left'\r\n      ? 'rotateX(20deg) rotateZ(-20deg) skewX(20deg)'\r\n      : 'rotateX(20deg) rotateZ(20deg) skewX(-20deg)';\r\n  };\r\n\r\n  useEffect(() => {\r\n    const container = containerRef.current;\r\n    if (!container) return;\r\n    if (items.length === 0) return;\r\n\r\n    const divItems = gsap.utils.toArray(container.children) as HTMLElement[];\r\n    if (!divItems.length) return;\r\n\r\n    const firstItem = divItems[0];\r\n    const itemStyle = getComputedStyle(firstItem);\r\n    const itemHeight = firstItem.offsetHeight;\r\n    const itemMarginTop = parseFloat(itemStyle.marginTop) || 0;\r\n    const totalItemHeight = itemHeight + itemMarginTop;\r\n    const totalHeight = itemHeight * items.length + itemMarginTop * (items.length - 1);\r\n\r\n    const wrapFn = gsap.utils.wrap(-totalHeight, totalHeight);\r\n\r\n    divItems.forEach((child, i) => {\r\n      const y = i * totalItemHeight;\r\n      gsap.set(child, { y });\r\n    });\r\n\r\n    const observer = Observer.create({\r\n      target: container,\r\n      type: 'wheel,touch,pointer',\r\n      preventDefault: true,\r\n      onPress: ({ target }) => {\r\n        (target as HTMLElement).style.cursor = 'grabbing';\r\n      },\r\n      onRelease: ({ target }) => {\r\n        (target as HTMLElement).style.cursor = 'grab';\r\n      },\r\n      onChange: ({ deltaY, isDragging, event }) => {\r\n        const d = event.type === 'wheel' ? -deltaY : deltaY;\r\n        const distance = isDragging ? d * 5 : d * 10;\r\n        divItems.forEach(child => {\r\n          gsap.to(child, {\r\n            duration: 0.5,\r\n            ease: 'expo.out',\r\n            y: `+=${distance}`,\r\n            modifiers: {\r\n              y: gsap.utils.unitize(wrapFn)\r\n            }\r\n          });\r\n        });\r\n      }\r\n    });\r\n\r\n    let rafId: number | null = null;\r\n    if (autoplay) {\r\n      const directionFactor = autoplayDirection === 'down' ? 1 : -1;\r\n      const speedPerFrame = autoplaySpeed * directionFactor;\r\n\r\n      const tick = () => {\r\n        divItems.forEach(child => {\r\n          gsap.set(child, {\r\n            y: `+=${speedPerFrame}`,\r\n            modifiers: {\r\n              y: gsap.utils.unitize(wrapFn)\r\n            }\r\n          });\r\n        });\r\n        rafId = requestAnimationFrame(tick);\r\n      };\r\n\r\n      rafId = requestAnimationFrame(tick);\r\n\r\n      if (pauseOnHover) {\r\n        const stopTicker = () => rafId && cancelAnimationFrame(rafId);\r\n        const startTicker = () => (rafId = requestAnimationFrame(tick));\r\n\r\n        container.addEventListener('mouseenter', stopTicker);\r\n        container.addEventListener('mouseleave', startTicker);\r\n\r\n        return () => {\r\n          observer.kill();\r\n          stopTicker();\r\n          container.removeEventListener('mouseenter', stopTicker);\r\n          container.removeEventListener('mouseleave', startTicker);\r\n        };\r\n      } else {\r\n        return () => {\r\n          observer.kill();\r\n          rafId && cancelAnimationFrame(rafId);\r\n        };\r\n      }\r\n    }\r\n\r\n    return () => {\r\n      observer.kill();\r\n      if (rafId) cancelAnimationFrame(rafId);\r\n    };\r\n  }, [items, autoplay, autoplaySpeed, autoplayDirection, pauseOnHover, isTilted, tiltDirection, negativeMargin]);\r\n\r\n  return (\r\n    <>\r\n      <style>\r\n        {`\r\n        .infinite-scroll-wrapper {\r\n          max-height: ${maxHeight};\r\n        }\r\n\r\n        .infinite-scroll-container {\r\n          width: ${width};\r\n        }\r\n\r\n        .infinite-scroll-item {\r\n          height: ${itemMinHeight}px;\r\n          margin-top: ${negativeMargin};\r\n        }\r\n        `}\r\n      </style>\r\n\r\n      <div className=\"infinite-scroll-wrapper\" ref={wrapperRef}>\r\n        <div\r\n          className=\"infinite-scroll-container\"\r\n          ref={containerRef}\r\n          style={{\r\n            transform: getTiltTransform()\r\n          }}\r\n        >\r\n          {items.map((item, i) => (\r\n            <div className=\"infinite-scroll-item\" key={i}>\r\n              {item.content}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default InfiniteScroll;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 772, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ajgre/Omi-AI-1/src/InfiniteMenu.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport { mat4, quat, vec2, vec3 } from 'gl-matrix';\r\n\r\nconst discVertShaderSource = `#version 300 es\r\n\r\nuniform mat4 uWorldMatrix;\r\nuniform mat4 uViewMatrix;\r\nuniform mat4 uProjectionMatrix;\r\nuniform vec3 uCameraPosition;\r\nuniform vec4 uRotationAxisVelocity;\r\n\r\nin vec3 aModelPosition;\r\nin vec3 aModelNormal;\r\nin vec2 aModelUvs;\r\nin mat4 aInstanceMatrix;\r\n\r\nout vec2 vUvs;\r\nout float vAlpha;\r\nflat out int vInstanceId;\r\n\r\n#define PI 3.141593\r\n\r\nvoid main() {\r\n    vec4 worldPosition = uWorldMatrix * aInstanceMatrix * vec4(aModelPosition, 1.);\r\n\r\n    vec3 centerPos = (uWorldMatrix * aInstanceMatrix * vec4(0., 0., 0., 1.)).xyz;\r\n    float radius = length(centerPos.xyz);\r\n\r\n    if (gl_VertexID > 0) {\r\n        vec3 rotationAxis = uRotationAxisVelocity.xyz;\r\n        float rotationVelocity = min(.15, uRotationAxisVelocity.w * 15.);\r\n        vec3 stretchDir = normalize(cross(centerPos, rotationAxis));\r\n        vec3 relativeVertexPos = normalize(worldPosition.xyz - centerPos);\r\n        float strength = dot(stretchDir, relativeVertexPos);\r\n        float invAbsStrength = min(0., abs(strength) - 1.);\r\n        strength = rotationVelocity * sign(strength) * abs(invAbsStrength * invAbsStrength * invAbsStrength + 1.);\r\n        worldPosition.xyz += stretchDir * strength;\r\n    }\r\n\r\n    worldPosition.xyz = radius * normalize(worldPosition.xyz);\r\n\r\n    gl_Position = uProjectionMatrix * uViewMatrix * worldPosition;\r\n\r\n    vAlpha = smoothstep(0.5, 1., normalize(worldPosition.xyz).z) * .9 + .1;\r\n    vUvs = aModelUvs;\r\n    vInstanceId = gl_InstanceID;\r\n}\r\n`;\r\n\r\nconst discFragShaderSource = `#version 300 es\r\nprecision highp float;\r\n\r\nuniform sampler2D uTex;\r\nuniform int uItemCount;\r\nuniform int uAtlasSize;\r\n\r\nout vec4 outColor;\r\n\r\nin vec2 vUvs;\r\nin float vAlpha;\r\nflat in int vInstanceId;\r\n\r\nvoid main() {\r\n    int itemIndex = vInstanceId % uItemCount;\r\n    int cellsPerRow = uAtlasSize;\r\n    int cellX = itemIndex % cellsPerRow;\r\n    int cellY = itemIndex / cellsPerRow;\r\n    vec2 cellSize = vec2(1.0) / vec2(float(cellsPerRow));\r\n    vec2 cellOffset = vec2(float(cellX), float(cellY)) * cellSize;\r\n\r\n    ivec2 texSize = textureSize(uTex, 0);\r\n    float imageAspect = float(texSize.x) / float(texSize.y);\r\n    float containerAspect = 1.0;\r\n    \r\n    float scale = max(imageAspect / containerAspect, \r\n                     containerAspect / imageAspect);\r\n    \r\n    vec2 st = vec2(vUvs.x, 1.0 - vUvs.y);\r\n    st = (st - 0.5) * scale + 0.5;\r\n    \r\n    st = clamp(st, 0.0, 1.0);\r\n    \r\n    st = st * cellSize + cellOffset;\r\n    \r\n    outColor = texture(uTex, st);\r\n    outColor.a *= vAlpha;\r\n}\r\n`;\r\n\r\nclass Face {\r\n  constructor(a: number, b: number, c: number) {\r\n    this.a = a;\r\n    this.b = b;\r\n    this.c = c;\r\n  }\r\n  a: number;\r\n  b: number;\r\n  c: number;\r\n}\r\n\r\nclass Vertex {\r\n  constructor(x: number, y: number, z: number) {\r\n    this.position = vec3.fromValues(x, y, z);\r\n    this.normal = vec3.create();\r\n    this.uv = vec2.create();\r\n  }\r\n  position: vec3;\r\n  normal: vec3;\r\n  uv: vec2;\r\n}\r\n\r\nclass Geometry {\r\n  constructor() {\r\n    this.vertices = [];\r\n    this.faces = [];\r\n  }\r\n  vertices: Vertex[];\r\n  faces: Face[];\r\n\r\n  addVertex(...args: number[]) {\r\n    for (let i = 0; i < args.length; i += 3) {\r\n      this.vertices.push(new Vertex(args[i], args[i + 1], args[i + 2]));\r\n    }\r\n    return this;\r\n  }\r\n\r\n  addFace(...args: number[]) {\r\n    for (let i = 0; i < args.length; i += 3) {\r\n      this.faces.push(new Face(args[i], args[i + 1], args[i + 2]));\r\n    }\r\n    return this;\r\n  }\r\n\r\n  get lastVertex() {\r\n    return this.vertices[this.vertices.length - 1];\r\n  }\r\n\r\n  subdivide(divisions = 1) {\r\n    const midPointCache: Record<string, number> = {};\r\n    let f = this.faces;\r\n\r\n    for (let div = 0; div < divisions; ++div) {\r\n      const newFaces = new Array(f.length * 4);\r\n\r\n      f.forEach((face, ndx) => {\r\n        const mAB = this.getMidPoint(face.a, face.b, midPointCache);\r\n        const mBC = this.getMidPoint(face.b, face.c, midPointCache);\r\n        const mCA = this.getMidPoint(face.c, face.a, midPointCache);\r\n\r\n        const i = ndx * 4;\r\n        newFaces[i + 0] = new Face(face.a, mAB, mCA);\r\n        newFaces[i + 1] = new Face(face.b, mBC, mAB);\r\n        newFaces[i + 2] = new Face(face.c, mCA, mBC);\r\n        newFaces[i + 3] = new Face(mAB, mBC, mCA);\r\n      });\r\n\r\n      f = newFaces;\r\n    }\r\n\r\n    this.faces = f;\r\n    return this;\r\n  }\r\n\r\n  spherize(radius = 1) {\r\n    this.vertices.forEach(vertex => {\r\n      vec3.normalize(vertex.normal, vertex.position);\r\n      vec3.scale(vertex.position, vertex.normal, radius);\r\n    });\r\n    return this;\r\n  }\r\n\r\n  get data() {\r\n    return {\r\n      vertices: this.vertexData,\r\n      indices: this.indexData,\r\n      normals: this.normalData,\r\n      uvs: this.uvData\r\n    };\r\n  }\r\n\r\n  get vertexData() {\r\n    return new Float32Array(this.vertices.flatMap(v => Array.from(v.position)));\r\n  }\r\n\r\n  get normalData() {\r\n    return new Float32Array(this.vertices.flatMap(v => Array.from(v.normal)));\r\n  }\r\n\r\n  get uvData() {\r\n    return new Float32Array(this.vertices.flatMap(v => Array.from(v.uv)));\r\n  }\r\n\r\n  get indexData() {\r\n    return new Uint16Array(this.faces.flatMap(f => [f.a, f.b, f.c]));\r\n  }\r\n\r\n  getMidPoint(ndxA: number, ndxB: number, cache: Record<string, number>) {\r\n    const cacheKey = ndxA < ndxB ? `k_${ndxB}_${ndxA}` : `k_${ndxA}_${ndxB}`;\r\n    if (Object.prototype.hasOwnProperty.call(cache, cacheKey)) {\r\n      return cache[cacheKey];\r\n    }\r\n    const a = this.vertices[ndxA].position;\r\n    const b = this.vertices[ndxB].position;\r\n    const ndx = this.vertices.length;\r\n    cache[cacheKey] = ndx;\r\n    this.addVertex((a[0] + b[0]) * 0.5, (a[1] + b[1]) * 0.5, (a[2] + b[2]) * 0.5);\r\n    return ndx;\r\n  }\r\n}\r\n\r\nclass IcosahedronGeometry extends Geometry {\r\n  constructor() {\r\n    super();\r\n    const t = Math.sqrt(5) * 0.5 + 0.5;\r\n    this.addVertex(\r\n      -1,\r\n      t,\r\n      0,\r\n      1,\r\n      t,\r\n      0,\r\n      -1,\r\n      -t,\r\n      0,\r\n      1,\r\n      -t,\r\n      0,\r\n      0,\r\n      -1,\r\n      t,\r\n      0,\r\n      1,\r\n      t,\r\n      0,\r\n      -1,\r\n      -t,\r\n      0,\r\n      1,\r\n      -t,\r\n      t,\r\n      0,\r\n      -1,\r\n      t,\r\n      0,\r\n      1,\r\n      -t,\r\n      0,\r\n      -1,\r\n      -t,\r\n      0,\r\n      1\r\n    ).addFace(\r\n      0,\r\n      11,\r\n      5,\r\n      0,\r\n      5,\r\n      1,\r\n      0,\r\n      1,\r\n      7,\r\n      0,\r\n      7,\r\n      10,\r\n      0,\r\n      10,\r\n      11,\r\n      1,\r\n      5,\r\n      9,\r\n      5,\r\n      11,\r\n      4,\r\n      11,\r\n      10,\r\n      2,\r\n      10,\r\n      7,\r\n      6,\r\n      7,\r\n      1,\r\n      8,\r\n      3,\r\n      9,\r\n      4,\r\n      3,\r\n      4,\r\n      2,\r\n      3,\r\n      2,\r\n      6,\r\n      3,\r\n      6,\r\n      8,\r\n      3,\r\n      8,\r\n      9,\r\n      4,\r\n      9,\r\n      5,\r\n      2,\r\n      4,\r\n      11,\r\n      6,\r\n      2,\r\n      10,\r\n      8,\r\n      6,\r\n      7,\r\n      9,\r\n      8,\r\n      1\r\n    );\r\n  }\r\n}\r\n\r\nclass DiscGeometry extends Geometry {\r\n  constructor(steps = 4, radius = 1) {\r\n    super();\r\n    steps = Math.max(4, steps);\r\n\r\n    const alpha = (2 * Math.PI) / steps;\r\n\r\n    this.addVertex(0, 0, 0);\r\n    this.lastVertex.uv[0] = 0.5;\r\n    this.lastVertex.uv[1] = 0.5;\r\n\r\n    for (let i = 0; i < steps; ++i) {\r\n      const x = Math.cos(alpha * i);\r\n      const y = Math.sin(alpha * i);\r\n      this.addVertex(radius * x, radius * y, 0);\r\n      this.lastVertex.uv[0] = x * 0.5 + 0.5;\r\n      this.lastVertex.uv[1] = y * 0.5 + 0.5;\r\n\r\n      if (i > 0) {\r\n        this.addFace(0, i, i + 1);\r\n      }\r\n    }\r\n    this.addFace(0, steps, 1);\r\n  }\r\n}\r\n\r\nfunction createShader(gl: WebGL2RenderingContext, type: number, source: string) {\r\n  const shader = gl.createShader(type);\r\n  if (!shader) return null;\r\n  gl.shaderSource(shader, source);\r\n  gl.compileShader(shader);\r\n  const success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\r\n\r\n  if (success) {\r\n    return shader;\r\n  }\r\n\r\n  console.error(gl.getShaderInfoLog(shader));\r\n  gl.deleteShader(shader);\r\n  return null;\r\n}\r\n\r\nfunction createProgram(gl: WebGL2RenderingContext, shaderSources: string[], transformFeedbackVaryings?: string[], attribLocations?: Record<string, number>) {\r\n  const program = gl.createProgram();\r\n  if (!program) return null;\r\n\r\n  [gl.VERTEX_SHADER, gl.FRAGMENT_SHADER].forEach((type, ndx) => {\r\n    const shader = createShader(gl, type, shaderSources[ndx]);\r\n    if (shader) gl.attachShader(program, shader);\r\n  });\r\n\r\n  if (transformFeedbackVaryings) {\r\n    gl.transformFeedbackVaryings(program, transformFeedbackVaryings, gl.SEPARATE_ATTRIBS);\r\n  }\r\n\r\n  if (attribLocations) {\r\n    for (const attrib in attribLocations) {\r\n      gl.bindAttribLocation(program, attribLocations[attrib], attrib);\r\n    }\r\n  }\r\n\r\n  gl.linkProgram(program);\r\n  const success = gl.getProgramParameter(program, gl.LINK_STATUS);\r\n\r\n  if (success) {\r\n    return program;\r\n  }\r\n\r\n  console.error(gl.getProgramInfoLog(program));\r\n  gl.deleteProgram(program);\r\n  return null;\r\n}\r\n\r\nfunction makeVertexArray(gl: WebGL2RenderingContext, bufLocNumElmPairs: [WebGLBuffer, number, number][], indices?: number[]) {\r\n  const va = gl.createVertexArray();\r\n  gl.bindVertexArray(va);\r\n\r\n  for (const [buffer, loc, numElem] of bufLocNumElmPairs) {\r\n    if (loc === -1) continue;\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\r\n    gl.enableVertexAttribArray(loc);\r\n    gl.vertexAttribPointer(loc, numElem, gl.FLOAT, false, 0, 0);\r\n  }\r\n\r\n  if (indices) {\r\n    const indexBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);\r\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indices), gl.STATIC_DRAW);\r\n  }\r\n\r\n  gl.bindVertexArray(null);\r\n  return va;\r\n}\r\n\r\nfunction resizeCanvasToDisplaySize(canvas: HTMLCanvasElement) {\r\n  const dpr = Math.min(2, window.devicePixelRatio);\r\n  const displayWidth = Math.round(canvas.clientWidth * dpr);\r\n  const displayHeight = Math.round(canvas.clientHeight * dpr);\r\n  const needResize = canvas.width !== displayWidth || canvas.height !== displayHeight;\r\n  if (needResize) {\r\n    canvas.width = displayWidth;\r\n    canvas.height = displayHeight;\r\n  }\r\n  return needResize;\r\n}\r\n\r\nfunction makeBuffer(gl: WebGL2RenderingContext, sizeOrData: ArrayBuffer | ArrayBufferView | number, usage: number) {\r\n  const buf = gl.createBuffer();\r\n  gl.bindBuffer(gl.ARRAY_BUFFER, buf);\r\n  if (typeof sizeOrData === 'number') {\r\n    gl.bufferData(gl.ARRAY_BUFFER, sizeOrData, usage);\r\n  } else {\r\n    gl.bufferData(gl.ARRAY_BUFFER, sizeOrData as ArrayBufferView, usage);\r\n  }\r\n  gl.bindBuffer(gl.ARRAY_BUFFER, null);\r\n  return buf;\r\n}\r\n\r\nfunction createAndSetupTexture(gl: WebGL2RenderingContext, minFilter: number, magFilter: number, wrapS: number, wrapT: number) {\r\n  const texture = gl.createTexture();\r\n  gl.bindTexture(gl.TEXTURE_2D, texture);\r\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, wrapS);\r\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, wrapT);\r\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, minFilter);\r\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, magFilter);\r\n  return texture;\r\n}\r\n\r\nclass ArcballControl {\r\n  isPointerDown = false;\r\n  orientation = quat.create();\r\n  pointerRotation = quat.create();\r\n  rotationVelocity = 0;\r\n  rotationAxis = vec3.fromValues(1, 0, 0);\r\n  snapDirection = vec3.fromValues(0, 0, -1);\r\n  snapTargetDirection?: vec3;\r\n  EPSILON = 0.1;\r\n  IDENTITY_QUAT = quat.create();\r\n  canvas: HTMLCanvasElement;\r\n  updateCallback: (deltaTime: number) => void;\r\n  pointerPos = vec2.create();\r\n  previousPointerPos = vec2.create();\r\n  _rotationVelocity = 0;\r\n  _combinedQuat = quat.create();\r\n\r\n  constructor(canvas: HTMLCanvasElement, updateCallback?: (deltaTime: number) => void) {\r\n    this.canvas = canvas;\r\n    this.updateCallback = updateCallback || (() => null);\r\n\r\n    canvas.addEventListener('pointerdown', e => {\r\n      vec2.set(this.pointerPos, e.clientX, e.clientY);\r\n      vec2.copy(this.previousPointerPos, this.pointerPos);\r\n      this.isPointerDown = true;\r\n    });\r\n    canvas.addEventListener('pointerup', () => {\r\n      this.isPointerDown = false;\r\n    });\r\n    canvas.addEventListener('pointerleave', () => {\r\n      this.isPointerDown = false;\r\n    });\r\n    canvas.addEventListener('pointermove', e => {\r\n      if (this.isPointerDown) {\r\n        vec2.set(this.pointerPos, e.clientX, e.clientY);\r\n      }\r\n    });\r\n\r\n    canvas.style.touchAction = 'none';\r\n  }\r\n\r\n  update(deltaTime: number, targetFrameDuration = 16) {\r\n    const timeScale = deltaTime / targetFrameDuration + 0.00001;\r\n    let angleFactor = timeScale;\r\n    let snapRotation = quat.create();\r\n\r\n    if (this.isPointerDown) {\r\n      const INTENSITY = 0.3 * timeScale;\r\n      const ANGLE_AMPLIFICATION = 5 / timeScale;\r\n\r\n      const midPointerPos = vec2.sub(vec2.create(), this.pointerPos, this.previousPointerPos);\r\n      vec2.scale(midPointerPos, midPointerPos, INTENSITY);\r\n\r\n      if (vec2.sqrLen(midPointerPos) > this.EPSILON) {\r\n        vec2.add(midPointerPos, this.previousPointerPos, midPointerPos);\r\n\r\n        const p = this.#project(midPointerPos);\r\n        const q = this.#project(this.previousPointerPos);\r\n        const a = vec3.normalize(vec3.create(), p);\r\n        const b = vec3.normalize(vec3.create(), q);\r\n\r\n        vec2.copy(this.previousPointerPos, midPointerPos);\r\n\r\n        angleFactor *= ANGLE_AMPLIFICATION;\r\n\r\n        this.quatFromVectors(a, b, this.pointerRotation, angleFactor);\r\n      } else {\r\n        quat.slerp(this.pointerRotation, this.pointerRotation, this.IDENTITY_QUAT, INTENSITY);\r\n      }\r\n    } else {\r\n      const INTENSITY = 0.1 * timeScale;\r\n      quat.slerp(this.pointerRotation, this.pointerRotation, this.IDENTITY_QUAT, INTENSITY);\r\n\r\n      if (this.snapTargetDirection) {\r\n        const SNAPPING_INTENSITY = 0.2;\r\n        const a = this.snapTargetDirection;\r\n        const b = this.snapDirection;\r\n        const sqrDist = vec3.squaredDistance(a, b);\r\n        const distanceFactor = Math.max(0.1, 1 - sqrDist * 10);\r\n        angleFactor *= SNAPPING_INTENSITY * distanceFactor;\r\n        this.quatFromVectors(a, b, snapRotation, angleFactor);\r\n      }\r\n    }\r\n\r\n    const combinedQuat = quat.multiply(quat.create(), snapRotation, this.pointerRotation);\r\n    this.orientation = quat.multiply(quat.create(), combinedQuat, this.orientation);\r\n    quat.normalize(this.orientation, this.orientation);\r\n\r\n    const RA_INTENSITY = 0.8 * timeScale;\r\n    quat.slerp(this._combinedQuat, this._combinedQuat, combinedQuat, RA_INTENSITY);\r\n    quat.normalize(this._combinedQuat, this._combinedQuat);\r\n\r\n    const rad = Math.acos(this._combinedQuat[3]) * 2.0;\r\n    const s = Math.sin(rad / 2.0);\r\n    let rv = 0;\r\n    if (s > 0.000001) {\r\n      rv = rad / (2 * Math.PI);\r\n      this.rotationAxis[0] = this._combinedQuat[0] / s;\r\n      this.rotationAxis[1] = this._combinedQuat[1] / s;\r\n      this.rotationAxis[2] = this._combinedQuat[2] / s;\r\n    }\r\n\r\n    const RV_INTENSITY = 0.5 * timeScale;\r\n    this._rotationVelocity += (rv - this._rotationVelocity) * RV_INTENSITY;\r\n    this.rotationVelocity = this._rotationVelocity / timeScale;\r\n\r\n    this.updateCallback(deltaTime);\r\n  }\r\n\r\n  quatFromVectors(a: vec3, b: vec3, out: quat, angleFactor = 1) {\r\n    const axis = vec3.cross(vec3.create(), a, b);\r\n    vec3.normalize(axis, axis);\r\n    const d = Math.max(-1, Math.min(1, vec3.dot(a, b)));\r\n    const angle = Math.acos(d) * angleFactor;\r\n    quat.setAxisAngle(out, axis, angle);\r\n    return { q: out, axis, angle };\r\n  }\r\n\r\n  #project(pos: vec2) {\r\n    const r = 2;\r\n    const w = this.canvas.clientWidth;\r\n    const h = this.canvas.clientHeight;\r\n    const s = Math.max(w, h) - 1;\r\n\r\n    const x = (2 * pos[0] - w - 1) / s;\r\n    const y = (2 * pos[1] - h - 1) / s;\r\n    let z = 0;\r\n    const xySq = x * x + y * y;\r\n    const rSq = r * r;\r\n\r\n    if (xySq <= rSq / 2.0) {\r\n      z = Math.sqrt(rSq - xySq);\r\n    } else {\r\n      z = rSq / Math.sqrt(xySq);\r\n    }\r\n    return vec3.fromValues(-x, y, z);\r\n  }\r\n}\r\n\r\nclass InfiniteGridMenu {\r\n  TARGET_FRAME_DURATION = 1000 / 60;\r\n  SPHERE_RADIUS = 2;\r\n\r\n  #time = 0;\r\n  #deltaTime = 0;\r\n  #deltaFrames = 0;\r\n  #frames = 0;\r\n\r\n  camera = {\r\n    matrix: mat4.create(),\r\n    near: 0.1,\r\n    far: 40,\r\n    fov: Math.PI / 4,\r\n    aspect: 1,\r\n    position: vec3.fromValues(0, 0, 3),\r\n    up: vec3.fromValues(0, 1, 0),\r\n    matrices: {\r\n      view: mat4.create(),\r\n      projection: mat4.create(),\r\n      inversProjection: mat4.create()\r\n    }\r\n  };\r\n\r\n  nearestVertexIndex: number | null = null;\r\n  smoothRotationVelocity = 0;\r\n  scaleFactor = 1.0;\r\n  movementActive = false;\r\n\r\n  canvas: HTMLCanvasElement;\r\n  items: any[];\r\n  onActiveItemChange: (index: number) => void;\r\n  onMovementChange: (isMoving: boolean) => void;\r\n  gl!: WebGL2RenderingContext;\r\n  viewportSize!: vec2;\r\n  drawBufferSize!: vec2;\r\n  discProgram!: WebGLProgram;\r\n  discLocations!: any;\r\n  discGeo!: DiscGeometry;\r\n  discBuffers!: any;\r\n  discVAO!: WebGLVertexArrayObject;\r\n  icoGeo!: IcosahedronGeometry;\r\n  instancePositions!: vec3[];\r\n  DISC_INSTANCE_COUNT!: number;\r\n  worldMatrix!: mat4;\r\n  tex!: WebGLTexture;\r\n  atlasSize!: number;\r\n  discInstances!: any;\r\n  control!: ArcballControl;\r\n\r\n  constructor(canvas: HTMLCanvasElement, items: any[], onActiveItemChange?: (index: number) => void, onMovementChange?: (isMoving: boolean) => void, onInit?: (menu: InfiniteGridMenu) => void) {\r\n    this.canvas = canvas;\r\n    this.items = items || [];\r\n    this.onActiveItemChange = onActiveItemChange || (() => {});\r\n    this.onMovementChange = onMovementChange || (() => {});\r\n    this.#init(onInit);\r\n  }\r\n\r\n  resize() {\r\n    this.viewportSize = vec2.set(this.viewportSize || vec2.create(), this.canvas.clientWidth, this.canvas.clientHeight);\r\n\r\n    const gl = this.gl;\r\n    const needsResize = resizeCanvasToDisplaySize(this.canvas);\r\n    if (needsResize) {\r\n      gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\r\n    }\r\n\r\n    this.#updateProjectionMatrix(gl);\r\n  }\r\n\r\n  run(time = 0) {\r\n    this.#deltaTime = Math.min(32, time - this.#time);\r\n    this.#time = time;\r\n    this.#deltaFrames = this.#deltaTime / this.TARGET_FRAME_DURATION;\r\n    this.#frames += this.#deltaFrames;\r\n\r\n    this.#animate(this.#deltaTime);\r\n    this.#render();\r\n\r\n    requestAnimationFrame(t => this.run(t));\r\n  }\r\n\r\n  #init(onInit?: ((menu: InfiniteGridMenu) => void) | null) {\r\n    console.log('Initializing InfiniteGridMenu...');\r\n    this.gl = this.canvas.getContext('webgl2', { antialias: true, alpha: false })!;\r\n    const gl = this.gl;\r\n    if (!gl) {\r\n      console.error('WebGL2 not supported!');\r\n      throw new Error('No WebGL 2 context!');\r\n    }\r\n    console.log('WebGL2 context created successfully');\r\n\r\n    this.viewportSize = vec2.fromValues(this.canvas.clientWidth, this.canvas.clientHeight);\r\n    this.drawBufferSize = vec2.clone(this.viewportSize);\r\n\r\n    console.log('Creating shader program...');\r\n    this.discProgram = createProgram(gl, [discVertShaderSource, discFragShaderSource], undefined, {\r\n      aModelPosition: 0,\r\n      aModelNormal: 1,\r\n      aModelUvs: 2,\r\n      aInstanceMatrix: 3\r\n    });\r\n    \r\n    if (!this.discProgram) {\r\n      console.error('Failed to create shader program!');\r\n      throw new Error('Failed to create shader program');\r\n    }\r\n    console.log('Shader program created successfully');\r\n\r\n    this.discLocations = {\r\n      aModelPosition: gl.getAttribLocation(this.discProgram, 'aModelPosition'),\r\n      aModelUvs: gl.getAttribLocation(this.discProgram, 'aModelUvs'),\r\n      aInstanceMatrix: gl.getAttribLocation(this.discProgram, 'aInstanceMatrix'),\r\n      uWorldMatrix: gl.getUniformLocation(this.discProgram, 'uWorldMatrix'),\r\n      uViewMatrix: gl.getUniformLocation(this.discProgram, 'uViewMatrix'),\r\n      uProjectionMatrix: gl.getUniformLocation(this.discProgram, 'uProjectionMatrix'),\r\n      uCameraPosition: gl.getUniformLocation(this.discProgram, 'uCameraPosition'),\r\n      uScaleFactor: gl.getUniformLocation(this.discProgram, 'uScaleFactor'),\r\n      uRotationAxisVelocity: gl.getUniformLocation(this.discProgram, 'uRotationAxisVelocity'),\r\n      uTex: gl.getUniformLocation(this.discProgram, 'uTex'),\r\n      uFrames: gl.getUniformLocation(this.discProgram, 'uFrames'),\r\n      uItemCount: gl.getUniformLocation(this.discProgram, 'uItemCount'),\r\n      uAtlasSize: gl.getUniformLocation(this.discProgram, 'uAtlasSize')\r\n    };\r\n\r\n    this.discGeo = new DiscGeometry(56, 1);\r\n    this.discBuffers = this.discGeo.data;\r\n    this.discVAO = makeVertexArray(\r\n      gl,\r\n      [\r\n        [makeBuffer(gl, this.discBuffers.vertices, gl.STATIC_DRAW)!, this.discLocations.aModelPosition, 3],\r\n        [makeBuffer(gl, this.discBuffers.uvs, gl.STATIC_DRAW)!, this.discLocations.aModelUvs, 2]\r\n      ],\r\n      Array.from(this.discBuffers.indices)\r\n    )!;\r\n\r\n    this.icoGeo = new IcosahedronGeometry();\r\n    this.icoGeo.subdivide(1).spherize(this.SPHERE_RADIUS);\r\n    this.instancePositions = this.icoGeo.vertices.map(v => v.position);\r\n    this.DISC_INSTANCE_COUNT = this.icoGeo.vertices.length;\r\n    this.#initDiscInstances(this.DISC_INSTANCE_COUNT);\r\n\r\n    this.worldMatrix = mat4.create();\r\n    this.#initTexture();\r\n\r\n    this.control = new ArcballControl(this.canvas, deltaTime => this.#onControlUpdate(deltaTime));\r\n\r\n    this.#updateCameraMatrix();\r\n    this.#updateProjectionMatrix(gl);\r\n    this.resize();\r\n\r\n    if (onInit) onInit(this);\r\n  }\r\n\r\n  #initTexture() {\r\n    const gl = this.gl;\r\n    this.tex = createAndSetupTexture(gl, gl.LINEAR, gl.LINEAR, gl.CLAMP_TO_EDGE, gl.CLAMP_TO_EDGE)!;\r\n\r\n    const itemCount = Math.max(1, this.items.length);\r\n    this.atlasSize = Math.ceil(Math.sqrt(itemCount));\r\n    const canvas = document.createElement('canvas');\r\n    const ctx = canvas.getContext('2d')!;\r\n    const cellSize = 512;\r\n\r\n    canvas.width = this.atlasSize * cellSize;\r\n    canvas.height = this.atlasSize * cellSize;\r\n\r\n    Promise.all(\r\n      this.items.map(\r\n        item =>\r\n          new Promise<HTMLImageElement>(resolve => {\r\n            const img = new Image();\r\n            img.crossOrigin = 'anonymous';\r\n            img.onload = () => resolve(img);\r\n            img.src = item.image;\r\n          })\r\n      )\r\n    ).then(images => {\r\n      images.forEach((img, i) => {\r\n        const x = (i % this.atlasSize) * cellSize;\r\n        const y = Math.floor(i / this.atlasSize) * cellSize;\r\n        ctx.drawImage(img, x, y, cellSize, cellSize);\r\n      });\r\n\r\n      gl.bindTexture(gl.TEXTURE_2D, this.tex);\r\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, canvas);\r\n      gl.generateMipmap(gl.TEXTURE_2D);\r\n    });\r\n  }\r\n\r\n  #initDiscInstances(count: number) {\r\n    const gl = this.gl;\r\n    this.discInstances = {\r\n      matricesArray: new Float32Array(count * 16),\r\n      matrices: [] as Float32Array[],\r\n      buffer: gl.createBuffer()\r\n    };\r\n    for (let i = 0; i < count; ++i) {\r\n      const instanceMatrixArray = new Float32Array(this.discInstances.matricesArray.buffer, i * 16 * 4, 16);\r\n      instanceMatrixArray.set(mat4.create());\r\n      this.discInstances.matrices.push(instanceMatrixArray);\r\n    }\r\n    gl.bindVertexArray(this.discVAO);\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.discInstances.buffer);\r\n    gl.bufferData(gl.ARRAY_BUFFER, this.discInstances.matricesArray.byteLength, gl.DYNAMIC_DRAW);\r\n    const mat4AttribSlotCount = 4;\r\n    const bytesPerMatrix = 16 * 4;\r\n    for (let j = 0; j < mat4AttribSlotCount; ++j) {\r\n      const loc = this.discLocations.aInstanceMatrix + j;\r\n      gl.enableVertexAttribArray(loc);\r\n      gl.vertexAttribPointer(loc, 4, gl.FLOAT, false, bytesPerMatrix, j * 4 * 4);\r\n      gl.vertexAttribDivisor(loc, 1);\r\n    }\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\r\n    gl.bindVertexArray(null);\r\n  }\r\n\r\n  #animate(deltaTime: number) {\r\n    const gl = this.gl;\r\n    this.control.update(deltaTime, this.TARGET_FRAME_DURATION);\r\n\r\n    let positions = this.instancePositions.map(p => vec3.transformQuat(vec3.create(), p, this.control.orientation));\r\n    const scale = 0.25;\r\n    const SCALE_INTENSITY = 0.6;\r\n    positions.forEach((p, ndx) => {\r\n      const s = (Math.abs(p[2]) / this.SPHERE_RADIUS) * SCALE_INTENSITY + (1 - SCALE_INTENSITY);\r\n      const finalScale = s * scale;\r\n      const matrix = mat4.create();\r\n      mat4.multiply(matrix, matrix, mat4.fromTranslation(mat4.create(), vec3.negate(vec3.create(), p)));\r\n      mat4.multiply(matrix, matrix, mat4.targetTo(mat4.create(), [0, 0, 0], p, [0, 1, 0]));\r\n      mat4.multiply(matrix, matrix, mat4.fromScaling(mat4.create(), [finalScale, finalScale, finalScale]));\r\n      mat4.multiply(matrix, matrix, mat4.fromTranslation(mat4.create(), [0, 0, -this.SPHERE_RADIUS]));\r\n\r\n      mat4.copy(this.discInstances.matrices[ndx], matrix);\r\n    });\r\n\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.discInstances.buffer);\r\n    gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.discInstances.matricesArray);\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\r\n\r\n    this.smoothRotationVelocity = this.control.rotationVelocity;\r\n  }\r\n\r\n  #render() {\r\n    const gl = this.gl;\r\n    gl.useProgram(this.discProgram);\r\n\r\n    gl.enable(gl.CULL_FACE);\r\n    gl.enable(gl.DEPTH_TEST);\r\n\r\n    gl.clearColor(0, 0, 0, 0);\r\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n\r\n    gl.uniformMatrix4fv(this.discLocations.uWorldMatrix, false, this.worldMatrix);\r\n    gl.uniformMatrix4fv(this.discLocations.uViewMatrix, false, this.camera.matrices.view);\r\n    gl.uniformMatrix4fv(this.discLocations.uProjectionMatrix, false, this.camera.matrices.projection);\r\n    gl.uniform3f(\r\n      this.discLocations.uCameraPosition,\r\n      this.camera.position[0],\r\n      this.camera.position[1],\r\n      this.camera.position[2]\r\n    );\r\n    gl.uniform4f(\r\n      this.discLocations.uRotationAxisVelocity,\r\n      this.control.rotationAxis[0],\r\n      this.control.rotationAxis[1],\r\n      this.control.rotationAxis[2],\r\n      this.smoothRotationVelocity * 1.1\r\n    );\r\n\r\n    gl.uniform1i(this.discLocations.uItemCount, this.items.length);\r\n    gl.uniform1i(this.discLocations.uAtlasSize, this.atlasSize);\r\n\r\n    gl.uniform1f(this.discLocations.uFrames, this.#frames);\r\n    gl.uniform1f(this.discLocations.uScaleFactor, this.scaleFactor);\r\n    gl.uniform1i(this.discLocations.uTex, 0);\r\n    gl.activeTexture(gl.TEXTURE0);\r\n    gl.bindTexture(gl.TEXTURE_2D, this.tex);\r\n\r\n    gl.bindVertexArray(this.discVAO);\r\n    gl.drawElementsInstanced(\r\n      gl.TRIANGLES,\r\n      this.discBuffers.indices.length,\r\n      gl.UNSIGNED_SHORT,\r\n      0,\r\n      this.DISC_INSTANCE_COUNT\r\n    );\r\n  }\r\n\r\n  #updateCameraMatrix() {\r\n    mat4.targetTo(this.camera.matrix, this.camera.position, [0, 0, 0], this.camera.up);\r\n    mat4.invert(this.camera.matrices.view, this.camera.matrix);\r\n  }\r\n\r\n  #updateProjectionMatrix(gl: WebGL2RenderingContext) {\r\n    this.camera.aspect = this.canvas.clientWidth / this.canvas.clientHeight;\r\n    const height = this.SPHERE_RADIUS * 0.35;\r\n    const distance = this.camera.position[2];\r\n    if (this.camera.aspect > 1) {\r\n      this.camera.fov = 2 * Math.atan(height / distance);\r\n    } else {\r\n      this.camera.fov = 2 * Math.atan(height / this.camera.aspect / distance);\r\n    }\r\n    mat4.perspective(\r\n      this.camera.matrices.projection,\r\n      this.camera.fov,\r\n      this.camera.aspect,\r\n      this.camera.near,\r\n      this.camera.far\r\n    );\r\n    mat4.invert(this.camera.matrices.inversProjection, this.camera.matrices.projection);\r\n  }\r\n\r\n  #onControlUpdate(deltaTime: number) {\r\n    const timeScale = deltaTime / this.TARGET_FRAME_DURATION + 0.0001;\r\n    let damping = 5 / timeScale;\r\n    let cameraTargetZ = 3;\r\n\r\n    const isMoving = this.control.isPointerDown || Math.abs(this.smoothRotationVelocity) > 0.01;\r\n\r\n    if (isMoving !== this.movementActive) {\r\n      this.movementActive = isMoving;\r\n      this.onMovementChange(isMoving);\r\n    }\r\n\r\n    if (!this.control.isPointerDown) {\r\n      const nearestVertexIndex = this.#findNearestVertexIndex();\r\n      const itemIndex = nearestVertexIndex % Math.max(1, this.items.length);\r\n      this.onActiveItemChange(itemIndex);\r\n      const snapDirection = vec3.normalize(vec3.create(), this.#getVertexWorldPosition(nearestVertexIndex));\r\n      this.control.snapTargetDirection = snapDirection;\r\n    } else {\r\n      cameraTargetZ += this.control.rotationVelocity * 80 + 2.5;\r\n      damping = 7 / timeScale;\r\n    }\r\n\r\n    this.camera.position[2] += (cameraTargetZ - this.camera.position[2]) / damping;\r\n    this.#updateCameraMatrix();\r\n  }\r\n\r\n  #findNearestVertexIndex() {\r\n    const n = this.control.snapDirection;\r\n    const inversOrientation = quat.conjugate(quat.create(), this.control.orientation);\r\n    const nt = vec3.transformQuat(vec3.create(), n, inversOrientation);\r\n\r\n    let maxD = -1;\r\n    let nearestVertexIndex = 0;\r\n    for (let i = 0; i < this.instancePositions.length; ++i) {\r\n      const d = vec3.dot(nt, this.instancePositions[i]);\r\n      if (d > maxD) {\r\n        maxD = d;\r\n        nearestVertexIndex = i;\r\n      }\r\n    }\r\n    return nearestVertexIndex;\r\n  }\r\n\r\n  #getVertexWorldPosition(index: number) {\r\n    const nearestVertexPos = this.instancePositions[index];\r\n    return vec3.transformQuat(vec3.create(), nearestVertexPos, this.control.orientation);\r\n  }\r\n}\r\n\r\nconst defaultItems = [\r\n  {\r\n    image: 'https://picsum.photos/900/900?grayscale',\r\n    link: 'https://google.com/',\r\n    title: 'Generate Images',\r\n    description: 'Create AI-powered visuals'\r\n  },\r\n  {\r\n    image: 'https://picsum.photos/901/900?grayscale',\r\n    link: 'https://google.com/',\r\n    title: 'Generate Videos',\r\n    description: 'AI video creation and editing'\r\n  },\r\n  {\r\n    image: 'https://picsum.photos/902/900?grayscale',\r\n    link: 'https://google.com/',\r\n    title: 'Generate Bots',\r\n    description: 'Build intelligent chatbots'\r\n  },\r\n  {\r\n    image: 'https://picsum.photos/903/900?grayscale',\r\n    link: 'https://percify.io/',\r\n    title: 'Generate Avatars',\r\n    description: 'Create digital personas with Percify'\r\n  },\r\n  {\r\n    image: 'https://picsum.photos/904/900?grayscale',\r\n    link: 'https://google.com/',\r\n    title: 'Generate Audio',\r\n    description: 'AI-powered sound creation'\r\n  },\r\n  {\r\n    image: 'https://picsum.photos/905/900?grayscale',\r\n    link: 'https://google.com/',\r\n    title: 'Generate Income',\r\n    description: 'AI monetization strategies'\r\n  }\r\n];\r\n\r\ninterface InfiniteMenuProps {\r\n  isVisible: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nexport default function InfiniteMenu({ isVisible, onClose }: InfiniteMenuProps) {\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const [activeItem, setActiveItem] = useState<any>(null);\r\n  const [isMoving, setIsMoving] = useState(false);\r\n  \r\n  const items = defaultItems;\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    let sketch: InfiniteGridMenu;\r\n\r\n    const handleActiveItem = (index: number) => {\r\n      const itemIndex = index % items.length;\r\n      setActiveItem(items[itemIndex]);\r\n    };\r\n\r\n    if (canvas && isVisible) {\r\n      console.log('Creating InfiniteGridMenu with items:', items.length ? items : defaultItems);\r\n      try {\r\n        sketch = new InfiniteGridMenu(canvas, items.length ? items : defaultItems, handleActiveItem, setIsMoving, sk =>\r\n          sk.run()\r\n        );\r\n        console.log('InfiniteGridMenu created successfully');\r\n      } catch (error) {\r\n        console.error('Error creating InfiniteGridMenu:', error);\r\n      }\r\n    } else {\r\n      console.log('Canvas or isVisible condition not met:', { canvas: !!canvas, isVisible });\r\n    }\r\n\r\n    const handleResize = () => {\r\n      if (sketch) {\r\n        sketch.resize();\r\n      }\r\n    };\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    handleResize();\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', handleResize);\r\n    };\r\n  }, [items, isVisible]);\r\n\r\n  const handleButtonClick = () => {\r\n    if (!activeItem?.link) return;\r\n    console.log('Selected:', activeItem.title, 'Link:', activeItem.link);\r\n    \r\n    // Open the link in a new tab\r\n    if (activeItem.link.startsWith('http')) {\r\n      window.open(activeItem.link, '_blank');\r\n    } else {\r\n      // Handle internal routes if needed\r\n      console.log('Internal route:', activeItem.link);\r\n    }\r\n    \r\n    // Close the menu after opening the link\r\n    onClose();\r\n  };\r\n\r\n  if (!isVisible) return null;\r\n\r\n  return (\r\n    <div style={{ position: 'fixed', top: 0, left: 0, width: '100%', height: '100%', zIndex: 10000, background: '#000' }}>\r\n      <div style={{ position: 'absolute', top: '10px', left: '10px', color: 'white', zIndex: 10001, fontSize: '12px' }}>\r\n        Debug: InfiniteMenu Loaded - Items: {items.length} - Active: {activeItem?.title || 'None'}\r\n      </div>\r\n      \r\n      {/* Close Button */}\r\n      <button \r\n        onClick={onClose}\r\n        className=\"infinite-menu-close\"\r\n        aria-label=\"Close menu\"\r\n      >\r\n        ×\r\n      </button>\r\n      \r\n      <canvas id=\"infinite-grid-menu-canvas\" ref={canvasRef} style={{ width: '100%', height: '100%', cursor: 'grab' }} />\r\n\r\n      {activeItem && (\r\n        <>\r\n          <h2 className={`face-title ${isMoving ? 'inactive' : 'active'}`}>{activeItem.title}</h2>\r\n\r\n          <p className={`face-description ${isMoving ? 'inactive' : 'active'}`}> {activeItem.description}</p>\r\n\r\n          <div onClick={handleButtonClick} className={`action-button ${isMoving ? 'inactive' : 'active'}`}>\r\n            <p className=\"action-button-icon\">&#x2197;</p>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1742, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ajgre/Omi-AI-1/src/MetallicPaint.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useRef, useState } from 'react';\r\n\r\ntype ShaderParams = {\r\n  patternScale: number;\r\n  refraction: number;\r\n  edge: number;\r\n  patternBlur: number;\r\n  liquid: number;\r\n  speed: number;\r\n};\r\n\r\nconst defaultParams: ShaderParams = {\r\n  patternScale: 1,\r\n  refraction: 0.07,\r\n  edge: 0,\r\n  patternBlur: 0,\r\n  liquid: 0.75,\r\n  speed: 0.39\r\n};\r\n\r\nexport function parseLogoImage(file: File): Promise<{ imageData: ImageData; pngBlob: Blob }> {\r\n  const canvas = document.createElement('canvas');\r\n  const ctx = canvas.getContext('2d');\r\n\r\n  return new Promise((resolve, reject) => {\r\n    if (!file || !ctx) {\r\n      reject(new Error('Invalid file or context'));\r\n      return;\r\n    }\r\n\r\n    const img = new Image();\r\n    img.crossOrigin = 'anonymous';\r\n    img.onload = function () {\r\n      if (file.type === 'image/svg+xml') {\r\n        img.width = 1000;\r\n        img.height = 1000;\r\n      }\r\n\r\n      const MAX_SIZE = 1000;\r\n      const MIN_SIZE = 500;\r\n      let width = img.naturalWidth;\r\n      let height = img.naturalHeight;\r\n\r\n      if (width > MAX_SIZE || height > MAX_SIZE || width < MIN_SIZE || height < MIN_SIZE) {\r\n        if (width > height) {\r\n          if (width > MAX_SIZE) {\r\n            height = Math.round((height * MAX_SIZE) / width);\r\n            width = MAX_SIZE;\r\n          } else if (width < MIN_SIZE) {\r\n            height = Math.round((height * MIN_SIZE) / width);\r\n            width = MIN_SIZE;\r\n          }\r\n        } else {\r\n          if (height > MAX_SIZE) {\r\n            width = Math.round((width * MAX_SIZE) / height);\r\n            height = MAX_SIZE;\r\n          } else if (height < MIN_SIZE) {\r\n            width = Math.round((width * MIN_SIZE) / height);\r\n            height = MIN_SIZE;\r\n          }\r\n        }\r\n      }\r\n\r\n      canvas.width = width;\r\n      canvas.height = height;\r\n\r\n      const shapeCanvas = document.createElement('canvas');\r\n      shapeCanvas.width = width;\r\n      shapeCanvas.height = height;\r\n      const shapeCtx = shapeCanvas.getContext('2d')!;\r\n      shapeCtx.drawImage(img, 0, 0, width, height);\r\n\r\n      const shapeImageData = shapeCtx.getImageData(0, 0, width, height);\r\n      const data = shapeImageData.data;\r\n      const shapeMask = new Array(width * height).fill(false);\r\n      for (let y = 0; y < height; y++) {\r\n        for (let x = 0; x < width; x++) {\r\n          const idx4 = (y * width + x) * 4;\r\n          const r = data[idx4];\r\n          const g = data[idx4 + 1];\r\n          const b = data[idx4 + 2];\r\n          const a = data[idx4 + 3];\r\n          shapeMask[y * width + x] = !((r === 255 && g === 255 && b === 255 && a === 255) || a === 0);\r\n        }\r\n      }\r\n\r\n      function inside(x: number, y: number) {\r\n        if (x < 0 || x >= width || y < 0 || y >= height) return false;\r\n        return shapeMask[y * width + x];\r\n      }\r\n\r\n      const boundaryMask = new Array(width * height).fill(false);\r\n      for (let y = 0; y < height; y++) {\r\n        for (let x = 0; x < width; x++) {\r\n          const idx = y * width + x;\r\n          if (!shapeMask[idx]) continue;\r\n          let isBoundary = false;\r\n          for (let ny = y - 1; ny <= y + 1 && !isBoundary; ny++) {\r\n            for (let nx = x - 1; nx <= x + 1 && !isBoundary; nx++) {\r\n              if (!inside(nx, ny)) {\r\n                isBoundary = true;\r\n              }\r\n            }\r\n          }\r\n          if (isBoundary) {\r\n            boundaryMask[idx] = true;\r\n          }\r\n        }\r\n      }\r\n\r\n      const interiorMask = new Array(width * height).fill(false);\r\n      for (let y = 1; y < height - 1; y++) {\r\n        for (let x = 1; x < width - 1; x++) {\r\n          const idx = y * width + x;\r\n          if (\r\n            shapeMask[idx] &&\r\n            shapeMask[idx - 1] &&\r\n            shapeMask[idx + 1] &&\r\n            shapeMask[idx - width] &&\r\n            shapeMask[idx + width]\r\n          ) {\r\n            interiorMask[idx] = true;\r\n          }\r\n        }\r\n      }\r\n\r\n      const u = new Float32Array(width * height).fill(0);\r\n      const newU = new Float32Array(width * height).fill(0);\r\n      const C = 0.01;\r\n      const ITERATIONS = 300;\r\n\r\n      function getU(x: number, y: number, arr: Float32Array) {\r\n        if (x < 0 || x >= width || y < 0 || y >= height) return 0;\r\n        if (!shapeMask[y * width + x]) return 0;\r\n        return arr[y * width + x];\r\n      }\r\n\r\n      for (let iter = 0; iter < ITERATIONS; iter++) {\r\n        for (let y = 0; y < height; y++) {\r\n          for (let x = 0; x < width; x++) {\r\n            const idx = y * width + x;\r\n            if (!shapeMask[idx] || boundaryMask[idx]) {\r\n              newU[idx] = 0;\r\n              continue;\r\n            }\r\n            const sumN = getU(x + 1, y, u) + getU(x - 1, y, u) + getU(x, y + 1, u) + getU(x, y - 1, u);\r\n            newU[idx] = (C + sumN) / 4;\r\n          }\r\n        }\r\n        u.set(newU);\r\n      }\r\n\r\n      let maxVal = 0;\r\n      for (let i = 0; i < width * height; i++) {\r\n        if (u[i] > maxVal) maxVal = u[i];\r\n      }\r\n      const alpha = 2.0;\r\n      const outImg = ctx.createImageData(width, height);\r\n\r\n      for (let y = 0; y < height; y++) {\r\n        for (let x = 0; x < width; x++) {\r\n          const idx = y * width + x;\r\n          const px = idx * 4;\r\n          if (!shapeMask[idx]) {\r\n            outImg.data[px] = 255;\r\n            outImg.data[px + 1] = 255;\r\n            outImg.data[px + 2] = 255;\r\n            outImg.data[px + 3] = 255;\r\n          } else {\r\n            const raw = u[idx] / maxVal;\r\n            const remapped = Math.pow(raw, alpha);\r\n            const gray = 255 * (1 - remapped);\r\n            outImg.data[px] = gray;\r\n            outImg.data[px + 1] = gray;\r\n            outImg.data[px + 2] = gray;\r\n            outImg.data[px + 3] = 255;\r\n          }\r\n        }\r\n      }\r\n      ctx.putImageData(outImg, 0, 0);\r\n\r\n      canvas.toBlob(blob => {\r\n        if (!blob) {\r\n          reject(new Error('Failed to create PNG blob'));\r\n          return;\r\n        }\r\n        resolve({\r\n          imageData: outImg,\r\n          pngBlob: blob\r\n        });\r\n      }, 'image/png');\r\n    };\r\n\r\n    img.onerror = () => reject(new Error('Failed to load image'));\r\n    img.src = URL.createObjectURL(file);\r\n  });\r\n}\r\n\r\nconst vertexShaderSource = `#version 300 es\r\nprecision mediump float;\r\n\r\nin vec2 a_position;\r\nout vec2 vUv;\r\n\r\nvoid main() {\r\n    vUv = .5 * (a_position + 1.);\r\n    gl_Position = vec4(a_position, 0.0, 1.0);\r\n}`;\r\n\r\nconst liquidFragSource = `#version 300 es\r\nprecision mediump float;\r\n\r\nin vec2 vUv;\r\nout vec4 fragColor;\r\n\r\nuniform sampler2D u_image_texture;\r\nuniform float u_time;\r\nuniform float u_ratio;\r\nuniform float u_img_ratio;\r\nuniform float u_patternScale;\r\nuniform float u_refraction;\r\nuniform float u_edge;\r\nuniform float u_patternBlur;\r\nuniform float u_liquid;\r\n\r\n#define TWO_PI 6.28318530718\r\n#define PI 3.14159265358979323846\r\n\r\nvec3 mod289(vec3 x) { return x - floor(x * (1. / 289.)) * 289.; }\r\nvec2 mod289(vec2 x) { return x - floor(x * (1. / 289.)) * 289.; }\r\nvec3 permute(vec3 x) { return mod289(((x*34.)+1.)*x); }\r\nfloat snoise(vec2 v) {\r\n    const vec4 C = vec4(0.211324865405187, 0.366025403784439, -0.577350269189626, 0.024390243902439);\r\n    vec2 i = floor(v + dot(v, C.yy));\r\n    vec2 x0 = v - i + dot(i, C.xx);\r\n    vec2 i1;\r\n    i1 = (x0.x > x0.y) ? vec2(1., 0.) : vec2(0., 1.);\r\n    vec4 x12 = x0.xyxy + C.xxzz;\r\n    x12.xy -= i1;\r\n    i = mod289(i);\r\n    vec3 p = permute(permute(i.y + vec3(0., i1.y, 1.)) + i.x + vec3(0., i1.x, 1.));\r\n    vec3 m = max(0.5 - vec3(dot(x0, x0), dot(x12.xy, x12.xy), dot(x12.zw, x12.zw)), 0.);\r\n    m = m*m;\r\n    m = m*m;\r\n    vec3 x = 2. * fract(p * C.www) - 1.;\r\n    vec3 h = abs(x) - 0.5;\r\n    vec3 ox = floor(x + 0.5);\r\n    vec3 a0 = x - ox;\r\n    m *= 1.79284291400159 - 0.85373472095314 * (a0*a0 + h*h);\r\n    vec3 g;\r\n    g.x = a0.x * x0.x + h.x * x0.y;\r\n    g.yz = a0.yz * x12.xz + h.yz * x12.yw;\r\n    return 130. * dot(m, g);\r\n}\r\n\r\nvec2 get_img_uv() {\r\n    vec2 img_uv = vUv;\r\n    img_uv -= .5;\r\n    if (u_ratio > u_img_ratio) {\r\n        img_uv.x = img_uv.x * u_ratio / u_img_ratio;\r\n    } else {\r\n        img_uv.y = img_uv.y * u_img_ratio / u_ratio;\r\n    }\r\n    float scale_factor = 1.;\r\n    img_uv *= scale_factor;\r\n    img_uv += .5;\r\n    img_uv.y = 1. - img_uv.y;\r\n    return img_uv;\r\n}\r\nvec2 rotate(vec2 uv, float th) {\r\n    return mat2(cos(th), sin(th), -sin(th), cos(th)) * uv;\r\n}\r\nfloat get_color_channel(float c1, float c2, float stripe_p, vec3 w, float extra_blur, float b) {\r\n    float ch = c2;\r\n    float border = 0.;\r\n    float blur = u_patternBlur + extra_blur;\r\n    ch = mix(ch, c1, smoothstep(.0, blur, stripe_p));\r\n    border = w[0];\r\n    ch = mix(ch, c2, smoothstep(border - blur, border + blur, stripe_p));\r\n    b = smoothstep(.2, .8, b);\r\n    border = w[0] + .4 * (1. - b) * w[1];\r\n    ch = mix(ch, c1, smoothstep(border - blur, border + blur, stripe_p));\r\n    border = w[0] + .5 * (1. - b) * w[1];\r\n    ch = mix(ch, c2, smoothstep(border - blur, border + blur, stripe_p));\r\n    border = w[0] + w[1];\r\n    ch = mix(ch, c1, smoothstep(border - blur, border + blur, stripe_p));\r\n    float gradient_t = (stripe_p - w[0] - w[1]) / w[2];\r\n    float gradient = mix(c1, c2, smoothstep(0., 1., gradient_t));\r\n    ch = mix(ch, gradient, smoothstep(border - blur, border + blur, stripe_p));\r\n    return ch;\r\n}\r\nfloat get_img_frame_alpha(vec2 uv, float img_frame_width) {\r\n    float img_frame_alpha = smoothstep(0., img_frame_width, uv.x) * smoothstep(1., 1. - img_frame_width, uv.x);\r\n    img_frame_alpha *= smoothstep(0., img_frame_width, uv.y) * smoothstep(1., 1. - img_frame_width, uv.y);\r\n    return img_frame_alpha;\r\n}\r\nvoid main() {\r\n    vec2 uv = vUv;\r\n    uv.y = 1. - uv.y;\r\n    uv.x *= u_ratio;\r\n    float diagonal = uv.x - uv.y;\r\n    float t = .001 * u_time;\r\n    vec2 img_uv = get_img_uv();\r\n    vec4 img = texture(u_image_texture, img_uv);\r\n    vec3 color = vec3(0.);\r\n    float opacity = 1.;\r\n    vec3 color1 = vec3(.98, 0.98, 1.);\r\n    vec3 color2 = vec3(.1, .1, .1 + .1 * smoothstep(.7, 1.3, uv.x + uv.y));\r\n    float edge = img.r;\r\n    vec2 grad_uv = uv;\r\n    grad_uv -= .5;\r\n    float dist = length(grad_uv + vec2(0., .2 * diagonal));\r\n    grad_uv = rotate(grad_uv, (.25 - .2 * diagonal) * PI);\r\n    float bulge = pow(1.8 * dist, 1.2);\r\n    bulge = 1. - bulge;\r\n    bulge *= pow(uv.y, .3);\r\n    float cycle_width = u_patternScale;\r\n    float thin_strip_1_ratio = .12 / cycle_width * (1. - .4 * bulge);\r\n    float thin_strip_2_ratio = .07 / cycle_width * (1. + .4 * bulge);\r\n    float wide_strip_ratio = (1. - thin_strip_1_ratio - thin_strip_2_ratio);\r\n    float thin_strip_1_width = cycle_width * thin_strip_1_ratio;\r\n    float thin_strip_2_width = cycle_width * thin_strip_2_ratio;\r\n    opacity = 1. - smoothstep(.9 - .5 * u_edge, 1. - .5 * u_edge, edge);\r\n    opacity *= get_img_frame_alpha(img_uv, 0.01);\r\n    float noise = snoise(uv - t);\r\n    edge += (1. - edge) * u_liquid * noise;\r\n    float refr = 0.;\r\n    refr += (1. - bulge);\r\n    refr = clamp(refr, 0., 1.);\r\n    float dir = grad_uv.x;\r\n    dir += diagonal;\r\n    dir -= 2. * noise * diagonal * (smoothstep(0., 1., edge) * smoothstep(1., 0., edge));\r\n    bulge *= clamp(pow(uv.y, .1), .3, 1.);\r\n    dir *= (.1 + (1.1 - edge) * bulge);\r\n    dir *= smoothstep(1., .7, edge);\r\n    dir += .18 * (smoothstep(.1, .2, uv.y) * smoothstep(.4, .2, uv.y));\r\n    dir += .03 * (smoothstep(.1, .2, 1. - uv.y) * smoothstep(.4, .2, 1. - uv.y));\r\n    dir *= (.5 + .5 * pow(uv.y, 2.));\r\n    dir *= cycle_width;\r\n    dir -= t;\r\n    float refr_r = refr;\r\n    refr_r += .03 * bulge * noise;\r\n    float refr_b = 1.3 * refr;\r\n    refr_r += 5. * (smoothstep(-.1, .2, uv.y) * smoothstep(.5, .1, uv.y)) * (smoothstep(.4, .6, bulge) * smoothstep(1., .4, bulge));\r\n    refr_r -= diagonal;\r\n    refr_b += (smoothstep(0., .4, uv.y) * smoothstep(.8, .1, uv.y)) * (smoothstep(.4, .6, bulge) * smoothstep(.8, .4, bulge));\r\n    refr_b -= .2 * edge;\r\n    refr_r *= u_refraction;\r\n    refr_b *= u_refraction;\r\n    vec3 w = vec3(thin_strip_1_width, thin_strip_2_width, wide_strip_ratio);\r\n    w[1] -= .02 * smoothstep(.0, 1., edge + bulge);\r\n    float stripe_r = mod(dir + refr_r, 1.);\r\n    float r = get_color_channel(color1.r, color2.r, stripe_r, w, 0.02 + .03 * u_refraction * bulge, bulge);\r\n    float stripe_g = mod(dir, 1.);\r\n    float g = get_color_channel(color1.g, color2.g, stripe_g, w, 0.01 / (1. - diagonal), bulge);\r\n    float stripe_b = mod(dir - refr_b, 1.);\r\n    float b = get_color_channel(color1.b, color2.b, stripe_b, w, .01, bulge);\r\n    color = vec3(r, g, b);\r\n    color *= opacity;\r\n    fragColor = vec4(color, opacity);\r\n}\r\n`;\r\n\r\nexport default function MetallicPaint({\r\n  imageData,\r\n  params = defaultParams\r\n}: {\r\n  imageData: ImageData;\r\n  params?: ShaderParams;\r\n}) {\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const [gl, setGl] = useState<WebGL2RenderingContext | null>(null);\r\n  const [uniforms, setUniforms] = useState<Record<string, WebGLUniformLocation>>({});\r\n  const totalAnimationTime = useRef(0);\r\n  const lastRenderTime = useRef(0);\r\n\r\n  function updateUniforms() {\r\n    if (!gl || !uniforms) return;\r\n    gl.uniform1f(uniforms.u_edge, params.edge);\r\n    gl.uniform1f(uniforms.u_patternBlur, params.patternBlur);\r\n    gl.uniform1f(uniforms.u_time, 0);\r\n    gl.uniform1f(uniforms.u_patternScale, params.patternScale);\r\n    gl.uniform1f(uniforms.u_refraction, params.refraction);\r\n    gl.uniform1f(uniforms.u_liquid, params.liquid);\r\n  }\r\n\r\n  useEffect(() => {\r\n    function initShader() {\r\n      const canvas = canvasRef.current;\r\n      const gl = canvas?.getContext('webgl2', {\r\n        antialias: true,\r\n        alpha: true\r\n      });\r\n      if (!canvas || !gl) {\r\n        return;\r\n      }\r\n\r\n      function createShader(gl: WebGL2RenderingContext, sourceCode: string, type: number) {\r\n        const shader = gl.createShader(type);\r\n        if (!shader) {\r\n          return null;\r\n        }\r\n\r\n        gl.shaderSource(shader, sourceCode);\r\n        gl.compileShader(shader);\r\n\r\n        if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\r\n          console.error('An error occurred compiling the shaders: ' + gl.getShaderInfoLog(shader));\r\n          gl.deleteShader(shader);\r\n          return null;\r\n        }\r\n\r\n        return shader;\r\n      }\r\n\r\n      const vertexShader = createShader(gl, vertexShaderSource, gl.VERTEX_SHADER);\r\n      const fragmentShader = createShader(gl, liquidFragSource, gl.FRAGMENT_SHADER);\r\n      const program = gl.createProgram();\r\n      if (!program || !vertexShader || !fragmentShader) {\r\n        return;\r\n      }\r\n\r\n      gl.attachShader(program, vertexShader);\r\n      gl.attachShader(program, fragmentShader);\r\n      gl.linkProgram(program);\r\n\r\n      if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\r\n        console.error('Unable to initialize the shader program: ' + gl.getProgramInfoLog(program));\r\n        return null;\r\n      }\r\n\r\n      function getUniforms(program: WebGLProgram, gl: WebGL2RenderingContext) {\r\n        let uniforms: Record<string, WebGLUniformLocation> = {};\r\n        let uniformCount = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\r\n        for (let i = 0; i < uniformCount; i++) {\r\n          let uniformName = gl.getActiveUniform(program, i)?.name;\r\n          if (!uniformName) continue;\r\n          uniforms[uniformName] = gl.getUniformLocation(program, uniformName) as WebGLUniformLocation;\r\n        }\r\n        return uniforms;\r\n      }\r\n      const uniforms = getUniforms(program, gl);\r\n      setUniforms(uniforms);\r\n\r\n      const vertices = new Float32Array([-1, -1, 1, -1, -1, 1, 1, 1]);\r\n      const vertexBuffer = gl.createBuffer();\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\r\n      gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\r\n\r\n      gl.useProgram(program);\r\n\r\n      const positionLocation = gl.getAttribLocation(program, 'a_position');\r\n      gl.enableVertexAttribArray(positionLocation);\r\n\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\r\n      gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);\r\n\r\n      setGl(gl);\r\n    }\r\n\r\n    initShader();\r\n    updateUniforms();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!gl || !uniforms) return;\r\n    updateUniforms();\r\n  }, [gl, params, uniforms]);\r\n\r\n  useEffect(() => {\r\n    if (!gl || !uniforms) return;\r\n\r\n    let renderId: number;\r\n\r\n    function render(currentTime: number) {\r\n      const deltaTime = currentTime - lastRenderTime.current;\r\n      lastRenderTime.current = currentTime;\r\n\r\n      totalAnimationTime.current += deltaTime * params.speed;\r\n      gl!.uniform1f(uniforms.u_time, totalAnimationTime.current);\r\n      gl!.drawArrays(gl!.TRIANGLE_STRIP, 0, 4);\r\n      renderId = requestAnimationFrame(render);\r\n    }\r\n\r\n    lastRenderTime.current = performance.now();\r\n    renderId = requestAnimationFrame(render);\r\n\r\n    return () => {\r\n      cancelAnimationFrame(renderId);\r\n    };\r\n  }, [gl, params.speed]);\r\n\r\n  useEffect(() => {\r\n    const canvasEl = canvasRef.current;\r\n    if (!canvasEl || !gl || !uniforms) return;\r\n\r\n    function resizeCanvas() {\r\n      if (!canvasEl || !gl || !uniforms || !imageData) return;\r\n      const imgRatio = imageData.width / imageData.height;\r\n      gl.uniform1f(uniforms.u_img_ratio, imgRatio);\r\n\r\n      const side = 1000;\r\n      canvasEl.width = side * devicePixelRatio;\r\n      canvasEl.height = side * devicePixelRatio;\r\n      gl.viewport(0, 0, canvasEl.height, canvasEl.height);\r\n      gl.uniform1f(uniforms.u_ratio, 1);\r\n      gl.uniform1f(uniforms.u_img_ratio, imgRatio);\r\n    }\r\n\r\n    resizeCanvas();\r\n    window.addEventListener('resize', resizeCanvas);\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', resizeCanvas);\r\n    };\r\n  }, [gl, uniforms, imageData]);\r\n\r\n  useEffect(() => {\r\n    if (!gl || !uniforms) return;\r\n\r\n    const existingTexture = gl.getParameter(gl.TEXTURE_BINDING_2D);\r\n    if (existingTexture) {\r\n      gl.deleteTexture(existingTexture);\r\n    }\r\n\r\n    const imageTexture = gl.createTexture();\r\n    gl.activeTexture(gl.TEXTURE0);\r\n    gl.bindTexture(gl.TEXTURE_2D, imageTexture);\r\n\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n\r\n    gl.pixelStorei(gl.UNPACK_ALIGNMENT, 1);\r\n\r\n    try {\r\n      gl.texImage2D(\r\n        gl.TEXTURE_2D,\r\n        0,\r\n        gl.RGBA,\r\n        imageData?.width,\r\n        imageData?.height,\r\n        0,\r\n        gl.RGBA,\r\n        gl.UNSIGNED_BYTE,\r\n        imageData?.data\r\n      );\r\n\r\n      gl.uniform1i(uniforms.u_image_texture, 0);\r\n    } catch (e) {\r\n      console.error('Error uploading texture:', e);\r\n    }\r\n\r\n    return () => {\r\n      if (imageTexture) {\r\n        gl.deleteTexture(imageTexture);\r\n      }\r\n    };\r\n  }, [gl, uniforms, imageData]);\r\n\r\n  return <canvas ref={canvasRef} className=\"paint-container\" />;\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2288, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ajgre/Omi-AI-1/src/OmiLoadingAnimation.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport MetallicPaint from './MetallicPaint';\r\n\r\nexport default function OmiLoadingAnimation() {\r\n  const [imageData, setImageData] = useState<ImageData | null>(null);\r\n\r\n  useEffect(() => {\r\n    // Create Omi logo programmatically\r\n    const canvas = document.createElement('canvas');\r\n    const ctx = canvas.getContext('2d');\r\n    if (!ctx) return;\r\n\r\n    const size = 800;\r\n    canvas.width = size;\r\n    canvas.height = size;\r\n\r\n    // Fill background with white\r\n    ctx.fillStyle = 'white';\r\n    ctx.fillRect(0, 0, size, size);\r\n\r\n    // Draw Omi logo - simple circle with \"O\" \r\n    const centerX = size / 2;\r\n    const centerY = size / 2;\r\n    const radius = size * 0.35;\r\n\r\n    // Draw outer circle\r\n    ctx.fillStyle = 'black';\r\n    ctx.beginPath();\r\n    ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);\r\n    ctx.fill();\r\n\r\n    // Draw inner circle (making it an O shape)\r\n    ctx.fillStyle = 'white';\r\n    ctx.beginPath();\r\n    ctx.arc(centerX, centerY, radius * 0.6, 0, Math.PI * 2);\r\n    ctx.fill();\r\n\r\n    // Add sparkle/star elements around the circle\r\n    const sparkleCount = 8;\r\n    for (let i = 0; i < sparkleCount; i++) {\r\n      const angle = (i / sparkleCount) * Math.PI * 2;\r\n      const distance = radius * 1.4;\r\n      const x = centerX + Math.cos(angle) * distance;\r\n      const y = centerY + Math.sin(angle) * distance;\r\n      \r\n      ctx.fillStyle = 'black';\r\n      ctx.beginPath();\r\n      ctx.arc(x, y, radius * 0.08, 0, Math.PI * 2);\r\n      ctx.fill();\r\n    }\r\n\r\n    // Get image data\r\n    const data = ctx.getImageData(0, 0, size, size);\r\n    setImageData(data);\r\n  }, []);\r\n\r\n  if (!imageData) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <MetallicPaint\r\n      imageData={imageData}\r\n      params={{\r\n        patternScale: 1,\r\n        refraction: 0.07,\r\n        edge: 0,\r\n        patternBlur: 0,\r\n        liquid: 0.75,\r\n        speed: 0.39\r\n      }}\r\n    />\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKe,SAAS;;IACtB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,oSAAQ,EAAmB;IAE7D,IAAA,qSAAS;yCAAC;YACR,mCAAmC;YACnC,MAAM,SAAS,SAAS,aAAa,CAAC;YACtC,MAAM,MAAM,OAAO,UAAU,CAAC;YAC9B,IAAI,CAAC,KAAK;YAEV,MAAM,OAAO;YACb,OAAO,KAAK,GAAG;YACf,OAAO,MAAM,GAAG;YAEhB,6BAA6B;YAC7B,IAAI,SAAS,GAAG;YAChB,IAAI,QAAQ,CAAC,GAAG,GAAG,MAAM;YAEzB,0CAA0C;YAC1C,MAAM,UAAU,OAAO;YACvB,MAAM,UAAU,OAAO;YACvB,MAAM,SAAS,OAAO;YAEtB,oBAAoB;YACpB,IAAI,SAAS,GAAG;YAChB,IAAI,SAAS;YACb,IAAI,GAAG,CAAC,SAAS,SAAS,QAAQ,GAAG,KAAK,EAAE,GAAG;YAC/C,IAAI,IAAI;YAER,2CAA2C;YAC3C,IAAI,SAAS,GAAG;YAChB,IAAI,SAAS;YACb,IAAI,GAAG,CAAC,SAAS,SAAS,SAAS,KAAK,GAAG,KAAK,EAAE,GAAG;YACrD,IAAI,IAAI;YAER,8CAA8C;YAC9C,MAAM,eAAe;YACrB,IAAK,IAAI,IAAI,GAAG,IAAI,cAAc,IAAK;gBACrC,MAAM,QAAQ,AAAC,IAAI,eAAgB,KAAK,EAAE,GAAG;gBAC7C,MAAM,WAAW,SAAS;gBAC1B,MAAM,IAAI,UAAU,KAAK,GAAG,CAAC,SAAS;gBACtC,MAAM,IAAI,UAAU,KAAK,GAAG,CAAC,SAAS;gBAEtC,IAAI,SAAS,GAAG;gBAChB,IAAI,SAAS;gBACb,IAAI,GAAG,CAAC,GAAG,GAAG,SAAS,MAAM,GAAG,KAAK,EAAE,GAAG;gBAC1C,IAAI,IAAI;YACV;YAEA,iBAAiB;YACjB,MAAM,OAAO,IAAI,YAAY,CAAC,GAAG,GAAG,MAAM;YAC1C,aAAa;QACf;wCAAG,EAAE;IAEL,IAAI,CAAC,WAAW;QACd,OAAO;IACT;IAEA,qBACE,wTAAC,qJAAa;QACZ,WAAW;QACX,QAAQ;YACN,cAAc;YACd,YAAY;YACZ,MAAM;YACN,aAAa;YACb,QAAQ;YACR,OAAO;QACT;;;;;;AAGN;GAtEwB;KAAA"}},
    {"offset": {"line": 2376, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ajgre/Omi-AI-1/src/ChromaGrid.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useRef, useEffect } from 'react';\r\nimport { gsap } from 'gsap';\r\n\r\nexport interface ChromaGridItem {\r\n  image: string;\r\n  title: string;\r\n  subtitle: string;\r\n  handle?: string;\r\n  location?: string;\r\n  borderColor?: string;\r\n  gradient?: string;\r\n  url?: string;\r\n}\r\n\r\nexport interface ChromaGridProps {\r\n  items?: ChromaGridItem[];\r\n  className?: string;\r\n  radius?: number;\r\n  columns?: number;\r\n  rows?: number;\r\n  damping?: number;\r\n  fadeOut?: number;\r\n  ease?: string;\r\n  onClose?: () => void;\r\n  onPersonaSelect?: (persona: ChromaGridItem) => void;\r\n  selectedPersona?: string | null;\r\n}\r\n\r\nexport const ChromaGrid: React.FC<ChromaGridProps> = ({\r\n  items,\r\n  className = '',\r\n  radius = 300,\r\n  columns = 3,\r\n  rows = 2,\r\n  damping = 0.45,\r\n  fadeOut = 0.6,\r\n  ease = 'power3.out',\r\n  onClose,\r\n  onPersonaSelect,\r\n  selectedPersona\r\n}) => {\r\n  const rootRef = useRef<HTMLDivElement>(null);\r\n  const fadeRef = useRef<HTMLDivElement>(null);\r\n  const setX = useRef<any>(null);\r\n  const setY = useRef<any>(null);\r\n  const pos = useRef({ x: 0, y: 0 });\r\n\r\n  // AI Personas demo data\r\n  const demo: ChromaGridItem[] = [\r\n    {\r\n      image: 'https://i.pravatar.cc/300?img=8',\r\n      title: 'The Teacher',\r\n      subtitle: 'Patient & Explanatory',\r\n      handle: '@educator',\r\n      borderColor: '#4F46E5',\r\n      gradient: 'linear-gradient(145deg, #4F46E5, #000)',\r\n      url: '#'\r\n    },\r\n    {\r\n      image: 'https://i.pravatar.cc/300?img=11',\r\n      title: 'The Critic',\r\n      subtitle: 'Analytical & Direct',\r\n      handle: '@analyst',\r\n      borderColor: '#EF4444',\r\n      gradient: 'linear-gradient(210deg, #EF4444, #000)',\r\n      url: '#'\r\n    },\r\n    {\r\n      image: 'https://i.pravatar.cc/300?img=3',\r\n      title: 'The Explorer',\r\n      subtitle: 'Curious & Adventurous',\r\n      handle: '@wanderer',\r\n      borderColor: '#F59E0B',\r\n      gradient: 'linear-gradient(165deg, #F59E0B, #000)',\r\n      url: '#'\r\n    },\r\n    {\r\n      image: 'https://i.pravatar.cc/300?img=16',\r\n      title: 'The Poet',\r\n      subtitle: 'Creative & Eloquent',\r\n      handle: '@wordsmith',\r\n      borderColor: '#8B5CF6',\r\n      gradient: 'linear-gradient(195deg, #8B5CF6, #000)',\r\n      url: '#'\r\n    },\r\n    {\r\n      image: '/images/personas/scientist.jpg',\r\n      title: 'The Scientist',\r\n      subtitle: 'Logical & Precise',\r\n      handle: '@researcher',\r\n      borderColor: '#10B981',\r\n      gradient: 'linear-gradient(225deg, #10B981, #000)',\r\n      url: '#'\r\n    },\r\n    {\r\n      image: 'https://i.pravatar.cc/300?img=60',\r\n      title: 'The Friend',\r\n      subtitle: 'Supportive & Empathetic',\r\n      handle: '@companion',\r\n      borderColor: '#06B6D4',\r\n      gradient: 'linear-gradient(135deg, #06B6D4, #000)',\r\n      url: '#'\r\n    }\r\n  ];\r\n  \r\n  const data = items?.length ? items : demo;\r\n\r\n  useEffect(() => {\r\n    const el = rootRef.current;\r\n    if (!el) return;\r\n    setX.current = gsap.quickSetter(el, '--x', 'px');\r\n    setY.current = gsap.quickSetter(el, '--y', 'px');\r\n    const { width, height } = el.getBoundingClientRect();\r\n    pos.current = { x: width / 2, y: height / 2 };\r\n    if (setX.current) setX.current(pos.current.x);\r\n    if (setY.current) setY.current(pos.current.y);\r\n  }, []);\r\n\r\n  // Esc key listener to close ChromaGrid\r\n  useEffect(() => {\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape' && onClose) {\r\n        onClose();\r\n      }\r\n    };\r\n\r\n    document.addEventListener('keydown', handleKeyDown);\r\n    return () => {\r\n      document.removeEventListener('keydown', handleKeyDown);\r\n    };\r\n  }, [onClose]);\r\n\r\n  const moveTo = (x: number, y: number) => {\r\n    gsap.to(pos.current, {\r\n      x,\r\n      y,\r\n      duration: damping,\r\n      ease,\r\n      onUpdate: () => {\r\n        setX.current?.(pos.current.x);\r\n        setY.current?.(pos.current.y);\r\n      },\r\n      overwrite: true\r\n    });\r\n  };\r\n\r\n  const handleMove = (e: React.PointerEvent) => {\r\n    if (!rootRef.current) return;\r\n    const r = rootRef.current.getBoundingClientRect();\r\n    moveTo(e.clientX - r.left, e.clientY - r.top);\r\n    gsap.to(fadeRef.current, { opacity: 0, duration: 0.25, overwrite: true });\r\n  };\r\n\r\n  const handleLeave = () => {\r\n    gsap.to(fadeRef.current, {\r\n      opacity: 1,\r\n      duration: fadeOut,\r\n      overwrite: true\r\n    });\r\n  };\r\n\r\n  const handleCardClick = (persona: ChromaGridItem) => {\r\n    // If there's a URL and it's not a placeholder, open it\r\n    if (persona.url && persona.url !== '#') {\r\n      window.open(persona.url, '_blank', 'noopener,noreferrer');\r\n      return;\r\n    }\r\n    \r\n    // Otherwise, handle persona selection\r\n    if (onPersonaSelect) {\r\n      onPersonaSelect(persona);\r\n      console.log('Selected persona:', persona.title);\r\n      \r\n      // Don't close the ChromaGrid - keep it open so users can see the selection\r\n      // They can close it manually with Esc or the close button\r\n    }\r\n  };\r\n\r\n  const handleCardMove = (e: React.MouseEvent<HTMLElement>) => {\r\n    const card = e.currentTarget;\r\n    const rect = card.getBoundingClientRect();\r\n    const x = e.clientX - rect.left;\r\n    const y = e.clientY - rect.top;\r\n    card.style.setProperty('--mouse-x', `${x}px`);\r\n    card.style.setProperty('--mouse-y', `${y}px`);\r\n  };\r\n\r\n  return (\r\n    <div className={`chroma-grid-container active ${className}`}>\r\n      <div\r\n        ref={rootRef}\r\n        className=\"chroma-grid\"\r\n        style={{\r\n          '--r': `${radius}px`,\r\n          '--cols': columns,\r\n          '--rows': rows\r\n        } as React.CSSProperties}\r\n        onPointerMove={handleMove}\r\n        onPointerLeave={handleLeave}\r\n      >\r\n        <div ref={fadeRef} className=\"chroma-grid-fade\" />\r\n        \r\n        {/* Close Button */}\r\n        {onClose && (\r\n          <button \r\n            className=\"chroma-grid-close\"\r\n            onClick={onClose}\r\n            aria-label=\"Close personas\"\r\n          >\r\n            ×\r\n          </button>\r\n        )}\r\n        \r\n        {/* Grid Content */}\r\n        <div className=\"chroma-grid-content\">\r\n          {data.map((c, i) => {\r\n            const isSelected = selectedPersona === c.title;\r\n            return (\r\n              <article\r\n                key={i}\r\n                className={`chroma-grid-card ${isSelected ? 'selected' : ''}`}\r\n                onMouseMove={handleCardMove}\r\n                onClick={() => handleCardClick(c)}\r\n                style={{\r\n                  '--border-color': c.borderColor || '#e5e5e5',\r\n                  '--card-gradient': c.gradient || 'linear-gradient(135deg, #e5e5e5, #000)',\r\n                  cursor: c.url && c.url !== '#' ? 'pointer' : 'default'\r\n                } as React.CSSProperties}\r\n              >\r\n                {isSelected && (\r\n                  <div className=\"chroma-grid-selected-indicator\">\r\n                    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                      <circle cx=\"12\" cy=\"12\" r=\"11\" fill={c.borderColor || '#e5e5e5'} />\r\n                      <path d=\"M7 12L10.5 15.5L17 9\" stroke=\"white\" strokeWidth=\"2.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n                    </svg>\r\n                  </div>\r\n                )}\r\n                <img \r\n                  src={c.image} \r\n                  alt={c.title} \r\n                  className=\"chroma-grid-avatar\"\r\n                  loading=\"lazy\" \r\n                />\r\n                <h3 className=\"chroma-grid-title\">{c.title}</h3>\r\n                <p className=\"chroma-grid-subtitle\">{c.subtitle}</p>\r\n                {c.handle && <span className=\"chroma-grid-handle\">{c.handle}</span>}\r\n              </article>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChromaGrid;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2701, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ajgre/Omi-AI-1/src/CircularGallery.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Camera, Mesh, Plane, Program, Renderer, Texture, Transform } from 'ogl';\r\nimport { useEffect, useRef } from 'react';\r\n\r\ntype GL = Renderer['gl'];\r\n\r\nfunction debounce<T extends (...args: any[]) => void>(func: T, wait: number) {\r\n  let timeout: number;\r\n  return function (this: any, ...args: Parameters<T>) {\r\n    window.clearTimeout(timeout);\r\n    timeout = window.setTimeout(() => func.apply(this, args), wait);\r\n  };\r\n}\r\n\r\nfunction lerp(p1: number, p2: number, t: number): number {\r\n  return p1 + (p2 - p1) * t;\r\n}\r\n\r\nfunction autoBind(instance: any): void {\r\n  const proto = Object.getPrototypeOf(instance);\r\n  Object.getOwnPropertyNames(proto).forEach(key => {\r\n    if (key !== 'constructor' && typeof instance[key] === 'function') {\r\n      instance[key] = instance[key].bind(instance);\r\n    }\r\n  });\r\n}\r\n\r\nfunction getFontSize(font: string): number {\r\n  const match = font.match(/(\\d+)px/);\r\n  return match ? parseInt(match[1], 10) : 30;\r\n}\r\n\r\nfunction createTextTexture(\r\n  gl: GL,\r\n  text: string,\r\n  font: string = 'bold 30px monospace',\r\n  color: string = 'black'\r\n): { texture: Texture; width: number; height: number } {\r\n  const canvas = document.createElement('canvas');\r\n  const context = canvas.getContext('2d');\r\n  if (!context) throw new Error('Could not get 2d context');\r\n\r\n  context.font = font;\r\n  const metrics = context.measureText(text);\r\n  const textWidth = Math.ceil(metrics.width);\r\n  const fontSize = getFontSize(font);\r\n  const textHeight = Math.ceil(fontSize * 1.2);\r\n\r\n  canvas.width = textWidth + 20;\r\n  canvas.height = textHeight + 20;\r\n\r\n  context.font = font;\r\n  context.fillStyle = color;\r\n  context.textBaseline = 'middle';\r\n  context.textAlign = 'center';\r\n  context.clearRect(0, 0, canvas.width, canvas.height);\r\n  context.fillText(text, canvas.width / 2, canvas.height / 2);\r\n\r\n  const texture = new Texture(gl, { generateMipmaps: false });\r\n  texture.image = canvas;\r\n  return { texture, width: canvas.width, height: canvas.height };\r\n}\r\n\r\ninterface TitleProps {\r\n  gl: GL;\r\n  plane: Mesh;\r\n  renderer: Renderer;\r\n  text: string;\r\n  textColor?: string;\r\n  font?: string;\r\n}\r\n\r\nclass Title {\r\n  gl: GL;\r\n  plane: Mesh;\r\n  renderer: Renderer;\r\n  text: string;\r\n  textColor: string;\r\n  font: string;\r\n  mesh!: Mesh;\r\n\r\n  constructor({ gl, plane, renderer, text, textColor = '#545050', font = '30px sans-serif' }: TitleProps) {\r\n    autoBind(this);\r\n    this.gl = gl;\r\n    this.plane = plane;\r\n    this.renderer = renderer;\r\n    this.text = text;\r\n    this.textColor = textColor;\r\n    this.font = font;\r\n    this.createMesh();\r\n  }\r\n\r\n  createMesh() {\r\n    const { texture, width, height } = createTextTexture(this.gl, this.text, this.font, this.textColor);\r\n    const geometry = new Plane(this.gl);\r\n    const program = new Program(this.gl, {\r\n      vertex: `\r\n        attribute vec3 position;\r\n        attribute vec2 uv;\r\n        uniform mat4 modelViewMatrix;\r\n        uniform mat4 projectionMatrix;\r\n        varying vec2 vUv;\r\n        void main() {\r\n          vUv = uv;\r\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n        }\r\n      `,\r\n      fragment: `\r\n        precision highp float;\r\n        uniform sampler2D tMap;\r\n        varying vec2 vUv;\r\n        void main() {\r\n          vec4 color = texture2D(tMap, vUv);\r\n          if (color.a < 0.1) discard;\r\n          gl_FragColor = color;\r\n        }\r\n      `,\r\n      uniforms: { tMap: { value: texture } },\r\n      transparent: true\r\n    });\r\n    this.mesh = new Mesh(this.gl, { geometry, program });\r\n    const aspect = width / height;\r\n    const textHeightScaled = this.plane.scale.y * 0.15;\r\n    const textWidthScaled = textHeightScaled * aspect;\r\n    this.mesh.scale.set(textWidthScaled, textHeightScaled, 1);\r\n    this.mesh.position.y = -this.plane.scale.y * 0.5 - textHeightScaled * 0.5 - 0.05;\r\n    this.mesh.setParent(this.plane);\r\n  }\r\n}\r\n\r\ninterface ScreenSize {\r\n  width: number;\r\n  height: number;\r\n}\r\n\r\ninterface Viewport {\r\n  width: number;\r\n  height: number;\r\n}\r\n\r\ninterface MediaProps {\r\n  geometry: Plane;\r\n  gl: GL;\r\n  image: string;\r\n  index: number;\r\n  length: number;\r\n  renderer: Renderer;\r\n  scene: Transform;\r\n  screen: ScreenSize;\r\n  text: string;\r\n  viewport: Viewport;\r\n  bend: number;\r\n  textColor: string;\r\n  borderRadius?: number;\r\n  font?: string;\r\n}\r\n\r\ninterface CircularGalleryItem {\r\n  image: string;\r\n  text: string;\r\n  link?: string;\r\n}\r\n\r\nclass Media {\r\n  extra: number = 0;\r\n  geometry: Plane;\r\n  gl: GL;\r\n  image: string;\r\n  index: number;\r\n  length: number;\r\n  renderer: Renderer;\r\n  scene: Transform;\r\n  screen: ScreenSize;\r\n  text: string;\r\n  viewport: Viewport;\r\n  bend: number;\r\n  textColor: string;\r\n  borderRadius: number;\r\n  font?: string;\r\n  program!: Program;\r\n  plane!: Mesh;\r\n  title!: Title;\r\n  scale!: number;\r\n  padding!: number;\r\n  width!: number;\r\n  widthTotal!: number;\r\n  x!: number;\r\n  speed: number = 0;\r\n  isBefore: boolean = false;\r\n  isAfter: boolean = false;\r\n\r\n  constructor({\r\n    geometry,\r\n    gl,\r\n    image,\r\n    index,\r\n    length,\r\n    renderer,\r\n    scene,\r\n    screen,\r\n    text,\r\n    viewport,\r\n    bend,\r\n    textColor,\r\n    borderRadius = 0,\r\n    font\r\n  }: MediaProps) {\r\n    this.geometry = geometry;\r\n    this.gl = gl;\r\n    this.image = image;\r\n    this.index = index;\r\n    this.length = length;\r\n    this.renderer = renderer;\r\n    this.scene = scene;\r\n    this.screen = screen;\r\n    this.text = text;\r\n    this.viewport = viewport;\r\n    this.bend = bend;\r\n    this.textColor = textColor;\r\n    this.borderRadius = borderRadius;\r\n    this.font = font;\r\n    this.createShader();\r\n    this.createMesh();\r\n    this.createTitle();\r\n    this.onResize();\r\n  }\r\n\r\n  createShader() {\r\n    const texture = new Texture(this.gl, {\r\n      generateMipmaps: true\r\n    });\r\n    this.program = new Program(this.gl, {\r\n      depthTest: false,\r\n      depthWrite: false,\r\n      vertex: `\r\n        precision highp float;\r\n        attribute vec3 position;\r\n        attribute vec2 uv;\r\n        uniform mat4 modelViewMatrix;\r\n        uniform mat4 projectionMatrix;\r\n        uniform float uTime;\r\n        uniform float uSpeed;\r\n        varying vec2 vUv;\r\n        void main() {\r\n          vUv = uv;\r\n          vec3 p = position;\r\n          p.z = (sin(p.x * 4.0 + uTime) * 1.5 + cos(p.y * 2.0 + uTime) * 1.5) * (0.1 + uSpeed * 0.5);\r\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(p, 1.0);\r\n        }\r\n      `,\r\n      fragment: `\r\n        precision highp float;\r\n        uniform vec2 uImageSizes;\r\n        uniform vec2 uPlaneSizes;\r\n        uniform sampler2D tMap;\r\n        uniform float uBorderRadius;\r\n        varying vec2 vUv;\r\n        \r\n        float roundedBoxSDF(vec2 p, vec2 b, float r) {\r\n          vec2 d = abs(p) - b;\r\n          return length(max(d, vec2(0.0))) + min(max(d.x, d.y), 0.0) - r;\r\n        }\r\n        \r\n        void main() {\r\n          vec2 ratio = vec2(\r\n            min((uPlaneSizes.x / uPlaneSizes.y) / (uImageSizes.x / uImageSizes.y), 1.0),\r\n            min((uPlaneSizes.y / uPlaneSizes.x) / (uImageSizes.y / uImageSizes.x), 1.0)\r\n          );\r\n          vec2 uv = vec2(\r\n            vUv.x * ratio.x + (1.0 - ratio.x) * 0.5,\r\n            vUv.y * ratio.y + (1.0 - ratio.y) * 0.5\r\n          );\r\n          vec4 color = texture2D(tMap, uv);\r\n          \r\n          float d = roundedBoxSDF(vUv - 0.5, vec2(0.5 - uBorderRadius), uBorderRadius);\r\n          \r\n          float edgeSmooth = 0.002;\r\n          float alpha = 1.0 - smoothstep(-edgeSmooth, edgeSmooth, d);\r\n          \r\n          gl_FragColor = vec4(color.rgb, alpha);\r\n        }\r\n      `,\r\n      uniforms: {\r\n        tMap: { value: texture },\r\n        uPlaneSizes: { value: [0, 0] },\r\n        uImageSizes: { value: [0, 0] },\r\n        uSpeed: { value: 0 },\r\n        uTime: { value: 100 * Math.random() },\r\n        uBorderRadius: { value: this.borderRadius }\r\n      },\r\n      transparent: true\r\n    });\r\n    const img = new Image();\r\n    img.crossOrigin = 'anonymous';\r\n    img.src = this.image;\r\n    img.onload = () => {\r\n      texture.image = img;\r\n      this.program.uniforms.uImageSizes.value = [img.naturalWidth, img.naturalHeight];\r\n    };\r\n  }\r\n\r\n  createMesh() {\r\n    this.plane = new Mesh(this.gl, {\r\n      geometry: this.geometry,\r\n      program: this.program\r\n    });\r\n    this.plane.setParent(this.scene);\r\n  }\r\n\r\n  createTitle() {\r\n    this.title = new Title({\r\n      gl: this.gl,\r\n      plane: this.plane,\r\n      renderer: this.renderer,\r\n      text: this.text,\r\n      textColor: this.textColor,\r\n      font: this.font\r\n    });\r\n  }\r\n\r\n  update(scroll: { current: number; last: number }, direction: 'right' | 'left') {\r\n    this.plane.position.x = this.x - scroll.current - this.extra;\r\n\r\n    const x = this.plane.position.x;\r\n    const H = this.viewport.width / 2;\r\n\r\n    if (this.bend === 0) {\r\n      this.plane.position.y = 0;\r\n      this.plane.rotation.z = 0;\r\n    } else {\r\n      const B_abs = Math.abs(this.bend);\r\n      const R = (H * H + B_abs * B_abs) / (2 * B_abs);\r\n      const effectiveX = Math.min(Math.abs(x), H);\r\n\r\n      const arc = R - Math.sqrt(R * R - effectiveX * effectiveX);\r\n      if (this.bend > 0) {\r\n        this.plane.position.y = -arc;\r\n        this.plane.rotation.z = -Math.sign(x) * Math.asin(effectiveX / R);\r\n      } else {\r\n        this.plane.position.y = arc;\r\n        this.plane.rotation.z = Math.sign(x) * Math.asin(effectiveX / R);\r\n      }\r\n    }\r\n\r\n    this.speed = scroll.current - scroll.last;\r\n    this.program.uniforms.uTime.value += 0.04;\r\n    this.program.uniforms.uSpeed.value = this.speed;\r\n\r\n    const planeOffset = this.plane.scale.x / 2;\r\n    const viewportOffset = this.viewport.width / 2;\r\n    this.isBefore = this.plane.position.x + planeOffset < -viewportOffset;\r\n    this.isAfter = this.plane.position.x - planeOffset > viewportOffset;\r\n    if (direction === 'right' && this.isBefore) {\r\n      this.extra -= this.widthTotal;\r\n      this.isBefore = this.isAfter = false;\r\n    }\r\n    if (direction === 'left' && this.isAfter) {\r\n      this.extra += this.widthTotal;\r\n      this.isBefore = this.isAfter = false;\r\n    }\r\n  }\r\n\r\n  onResize({ screen, viewport }: { screen?: ScreenSize; viewport?: Viewport } = {}) {\r\n    if (screen) this.screen = screen;\r\n    if (viewport) {\r\n      this.viewport = viewport;\r\n      if (this.plane.program.uniforms.uViewportSizes) {\r\n        this.plane.program.uniforms.uViewportSizes.value = [this.viewport.width, this.viewport.height];\r\n      }\r\n    }\r\n    this.scale = this.screen.height / 1500;\r\n    this.plane.scale.y = (this.viewport.height * (900 * this.scale)) / this.screen.height;\r\n    this.plane.scale.x = (this.viewport.width * (700 * this.scale)) / this.screen.width;\r\n    this.plane.program.uniforms.uPlaneSizes.value = [this.plane.scale.x, this.plane.scale.y];\r\n    this.padding = 2;\r\n    this.width = this.plane.scale.x + this.padding;\r\n    this.widthTotal = this.width * this.length;\r\n    this.x = this.width * this.index;\r\n  }\r\n}\r\n\r\ninterface AppConfig {\r\n  items?: CircularGalleryItem[];\r\n  bend?: number;\r\n  textColor?: string;\r\n  borderRadius?: number;\r\n  font?: string;\r\n  scrollSpeed?: number;\r\n  scrollEase?: number;\r\n}\r\n\r\nclass App {\r\n  container: HTMLElement;\r\n  scrollSpeed: number;\r\n  scroll: {\r\n    ease: number;\r\n    current: number;\r\n    target: number;\r\n    last: number;\r\n    position?: number;\r\n  };\r\n  onCheckDebounce: (...args: any[]) => void;\r\n  renderer!: Renderer;\r\n  gl!: GL;\r\n  camera!: Camera;\r\n  scene!: Transform;\r\n  planeGeometry!: Plane;\r\n  medias: Media[] = [];\r\n  mediasImages: CircularGalleryItem[] = [];\r\n  screen!: { width: number; height: number };\r\n  viewport!: { width: number; height: number };\r\n  raf: number = 0;\r\n\r\n  boundOnResize!: () => void;\r\n  boundOnWheel!: (e: Event) => void;\r\n  boundOnTouchDown!: (e: MouseEvent | TouchEvent) => void;\r\n  boundOnTouchMove!: (e: MouseEvent | TouchEvent) => void;\r\n  boundOnTouchUp!: () => void;\r\n\r\n  isDown: boolean = false;\r\n  start: number = 0;\r\n\r\n  constructor(\r\n    container: HTMLElement,\r\n    {\r\n      items,\r\n      bend = 1,\r\n      textColor = '#ffffff',\r\n      borderRadius = 0,\r\n      font = 'bold 30px Figtree',\r\n      scrollSpeed = 2,\r\n      scrollEase = 0.05\r\n    }: AppConfig\r\n  ) {\r\n    document.documentElement.classList.remove('no-js');\r\n    this.container = container;\r\n    this.scrollSpeed = scrollSpeed;\r\n    this.scroll = { ease: scrollEase, current: 0, target: 0, last: 0 };\r\n    this.onCheckDebounce = debounce(this.onCheck.bind(this), 200);\r\n    this.createRenderer();\r\n    this.createCamera();\r\n    this.createScene();\r\n    this.onResize();\r\n    this.createGeometry();\r\n    this.createMedias(items, bend, textColor, borderRadius, font);\r\n    this.update();\r\n    this.addEventListeners();\r\n  }\r\n\r\n  createRenderer() {\r\n    this.renderer = new Renderer({\r\n      alpha: true,\r\n      antialias: true,\r\n      dpr: Math.min(window.devicePixelRatio || 1, 2)\r\n    });\r\n    this.gl = this.renderer.gl;\r\n    this.gl.clearColor(0, 0, 0, 0);\r\n    this.container.appendChild(this.renderer.gl.canvas as HTMLCanvasElement);\r\n  }\r\n\r\n  createCamera() {\r\n    this.camera = new Camera(this.gl);\r\n    this.camera.fov = 45;\r\n    this.camera.position.z = 20;\r\n  }\r\n\r\n  createScene() {\r\n    this.scene = new Transform();\r\n  }\r\n\r\n  createGeometry() {\r\n    this.planeGeometry = new Plane(this.gl, {\r\n      heightSegments: 50,\r\n      widthSegments: 100\r\n    });\r\n  }\r\n\r\n  createMedias(\r\n    items: CircularGalleryItem[] | undefined,\r\n    bend: number = 1,\r\n    textColor: string,\r\n    borderRadius: number,\r\n    font: string\r\n  ) {\r\n    const defaultItems: CircularGalleryItem[] = [\r\n      {\r\n        image: `https://picsum.photos/seed/1/800/600?grayscale`,\r\n        text: 'Bridge'\r\n      },\r\n      {\r\n        image: `https://picsum.photos/seed/2/800/600?grayscale`,\r\n        text: 'Desk Setup'\r\n      },\r\n      {\r\n        image: `https://picsum.photos/seed/3/800/600?grayscale`,\r\n        text: 'Waterfall'\r\n      },\r\n      {\r\n        image: `https://picsum.photos/seed/4/800/600?grayscale`,\r\n        text: 'Strawberries'\r\n      },\r\n      {\r\n        image: `https://picsum.photos/seed/5/800/600?grayscale`,\r\n        text: 'Deep Diving'\r\n      },\r\n      {\r\n        image: `https://picsum.photos/seed/16/800/600?grayscale`,\r\n        text: 'Train Track'\r\n      },\r\n      {\r\n        image: `https://picsum.photos/seed/17/800/600?grayscale`,\r\n        text: 'Santorini'\r\n      },\r\n      {\r\n        image: `https://picsum.photos/seed/8/800/600?grayscale`,\r\n        text: 'Blurry Lights'\r\n      },\r\n      {\r\n        image: `https://picsum.photos/seed/9/800/600?grayscale`,\r\n        text: 'New York'\r\n      },\r\n      {\r\n        image: `https://picsum.photos/seed/10/800/600?grayscale`,\r\n        text: 'Good Boy'\r\n      },\r\n      {\r\n        image: `https://picsum.photos/seed/21/800/600?grayscale`,\r\n        text: 'Coastline'\r\n      },\r\n      {\r\n        image: `https://picsum.photos/seed/12/800/600?grayscale`,\r\n        text: 'Palm Trees'\r\n      }\r\n    ];\r\n    const galleryItems = items && items.length ? items : defaultItems;\r\n    this.mediasImages = galleryItems.concat(galleryItems);\r\n    this.medias = this.mediasImages.map((data, index) => {\r\n      return new Media({\r\n        geometry: this.planeGeometry,\r\n        gl: this.gl,\r\n        image: data.image,\r\n        index,\r\n        length: this.mediasImages.length,\r\n        renderer: this.renderer,\r\n        scene: this.scene,\r\n        screen: this.screen,\r\n        text: data.text,\r\n        viewport: this.viewport,\r\n        bend,\r\n        textColor,\r\n        borderRadius,\r\n        font\r\n      });\r\n    });\r\n  }\r\n\r\n  onTouchDown(e: MouseEvent | TouchEvent) {\r\n    this.isDown = true;\r\n    this.scroll.position = this.scroll.current;\r\n    this.start = 'touches' in e ? e.touches[0].clientX : e.clientX;\r\n  }\r\n\r\n  onTouchMove(e: MouseEvent | TouchEvent) {\r\n    if (!this.isDown) return;\r\n    const x = 'touches' in e ? e.touches[0].clientX : e.clientX;\r\n    const distance = (this.start - x) * (this.scrollSpeed * 0.025);\r\n    this.scroll.target = (this.scroll.position ?? 0) + distance;\r\n  }\r\n\r\n  onTouchUp() {\r\n    this.isDown = false;\r\n    this.onCheck();\r\n  }\r\n\r\n  onWheel(e: Event) {\r\n    const wheelEvent = e as WheelEvent;\r\n    const delta = wheelEvent.deltaY || (wheelEvent as any).wheelDelta || (wheelEvent as any).detail;\r\n    this.scroll.target += (delta > 0 ? this.scrollSpeed : -this.scrollSpeed) * 0.2;\r\n    this.onCheckDebounce();\r\n  }\r\n\r\n  onCheck() {\r\n    if (!this.medias || !this.medias[0]) return;\r\n    const width = this.medias[0].width;\r\n    const itemIndex = Math.round(Math.abs(this.scroll.target) / width);\r\n    const item = width * itemIndex;\r\n    this.scroll.target = this.scroll.target < 0 ? -item : item;\r\n  }\r\n\r\n  onResize() {\r\n    this.screen = {\r\n      width: this.container.clientWidth,\r\n      height: this.container.clientHeight\r\n    };\r\n    this.renderer.setSize(this.screen.width, this.screen.height);\r\n    this.camera.perspective({\r\n      aspect: this.screen.width / this.screen.height\r\n    });\r\n    const fov = (this.camera.fov * Math.PI) / 180;\r\n    const height = 2 * Math.tan(fov / 2) * this.camera.position.z;\r\n    const width = height * this.camera.aspect;\r\n    this.viewport = { width, height };\r\n    if (this.medias) {\r\n      this.medias.forEach(media => media.onResize({ screen: this.screen, viewport: this.viewport }));\r\n    }\r\n  }\r\n\r\n  update() {\r\n    this.scroll.current = lerp(this.scroll.current, this.scroll.target, this.scroll.ease);\r\n    const direction = this.scroll.current > this.scroll.last ? 'right' : 'left';\r\n    if (this.medias) {\r\n      this.medias.forEach(media => media.update(this.scroll, direction));\r\n    }\r\n    this.renderer.render({ scene: this.scene, camera: this.camera });\r\n    this.scroll.last = this.scroll.current;\r\n    this.raf = window.requestAnimationFrame(this.update.bind(this));\r\n  }\r\n\r\n  addEventListeners() {\r\n    this.boundOnResize = this.onResize.bind(this);\r\n    this.boundOnWheel = this.onWheel.bind(this);\r\n    this.boundOnTouchDown = this.onTouchDown.bind(this);\r\n    this.boundOnTouchMove = this.onTouchMove.bind(this);\r\n    this.boundOnTouchUp = this.onTouchUp.bind(this);\r\n    window.addEventListener('resize', this.boundOnResize);\r\n    window.addEventListener('mousewheel', this.boundOnWheel);\r\n    window.addEventListener('wheel', this.boundOnWheel);\r\n    window.addEventListener('mousedown', this.boundOnTouchDown);\r\n    window.addEventListener('mousemove', this.boundOnTouchMove);\r\n    window.addEventListener('mouseup', this.boundOnTouchUp);\r\n    window.addEventListener('touchstart', this.boundOnTouchDown);\r\n    window.addEventListener('touchmove', this.boundOnTouchMove);\r\n    window.addEventListener('touchend', this.boundOnTouchUp);\r\n  }\r\n\r\n  destroy() {\r\n    window.cancelAnimationFrame(this.raf);\r\n    window.removeEventListener('resize', this.boundOnResize);\r\n    window.removeEventListener('mousewheel', this.boundOnWheel);\r\n    window.removeEventListener('wheel', this.boundOnWheel);\r\n    window.removeEventListener('mousedown', this.boundOnTouchDown);\r\n    window.removeEventListener('mousemove', this.boundOnTouchMove);\r\n    window.removeEventListener('mouseup', this.boundOnTouchUp);\r\n    window.removeEventListener('touchstart', this.boundOnTouchDown);\r\n    window.removeEventListener('touchmove', this.boundOnTouchMove);\r\n    window.removeEventListener('touchend', this.boundOnTouchUp);\r\n    if (this.renderer && this.renderer.gl && this.renderer.gl.canvas.parentNode) {\r\n      this.renderer.gl.canvas.parentNode.removeChild(this.renderer.gl.canvas as HTMLCanvasElement);\r\n    }\r\n  }\r\n}\r\n\r\ninterface CircularGalleryProps {\r\n  items?: CircularGalleryItem[];\r\n  bend?: number;\r\n  textColor?: string;\r\n  borderRadius?: number;\r\n  font?: string;\r\n  scrollSpeed?: number;\r\n  scrollEase?: number;\r\n}\r\n\r\nexport default function CircularGallery({\r\n  items,\r\n  bend = 3,\r\n  textColor = '#ffffff',\r\n  borderRadius = 0.05,\r\n  font = 'bold 30px Figtree',\r\n  scrollSpeed = 2,\r\n  scrollEase = 0.02\r\n}: CircularGalleryProps) {\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  useEffect(() => {\r\n    if (!containerRef.current) return;\r\n    const app = new App(containerRef.current, {\r\n      items,\r\n      bend,\r\n      textColor,\r\n      borderRadius,\r\n      font,\r\n      scrollSpeed,\r\n      scrollEase\r\n    });\r\n    return () => {\r\n      app.destroy();\r\n    };\r\n  }, [items, bend, textColor, borderRadius, font, scrollSpeed, scrollEase]);\r\n  return <div className=\"circular-gallery\" ref={containerRef} />;\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3332, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ajgre/Omi-AI-1/src/ConversationSidebar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { DbConversation } from './databaseService'\r\n\r\ninterface ConversationSidebarProps {\r\n  conversations: DbConversation[]\r\n  currentConversationId: string | null\r\n  onSelectConversation: (conversationId: string) => void\r\n  onNewConversation: () => void\r\n  onDeleteConversation: (conversationId: string) => void\r\n  isOpen: boolean\r\n  onClose: () => void\r\n}\r\n\r\nexport default function ConversationSidebar({\r\n  conversations,\r\n  currentConversationId,\r\n  onSelectConversation,\r\n  onNewConversation,\r\n  onDeleteConversation,\r\n  isOpen,\r\n  onClose\r\n}: ConversationSidebarProps) {\r\n  const [deletingId, setDeletingId] = useState<string | null>(null)\r\n\r\n  // Close sidebar with Escape key\r\n  useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape' && isOpen) {\r\n        onClose()\r\n      }\r\n    }\r\n    document.addEventListener('keydown', handleEscape)\r\n    return () => document.removeEventListener('keydown', handleEscape)\r\n  }, [isOpen, onClose])\r\n\r\n  const handleDelete = async (e: React.MouseEvent, conversationId: string) => {\r\n    e.stopPropagation()\r\n    if (window.confirm('Delete this conversation? This cannot be undone.')) {\r\n      setDeletingId(conversationId)\r\n      await onDeleteConversation(conversationId)\r\n      setDeletingId(null)\r\n    }\r\n  }\r\n\r\n  const formatDate = (dateString: string) => {\r\n    const date = new Date(dateString)\r\n    const now = new Date()\r\n    const diffMs = now.getTime() - date.getTime()\r\n    const diffMins = Math.floor(diffMs / 60000)\r\n    const diffHours = Math.floor(diffMs / 3600000)\r\n    const diffDays = Math.floor(diffMs / 86400000)\r\n\r\n    if (diffMins < 1) return 'Just now'\r\n    if (diffMins < 60) return `${diffMins}m ago`\r\n    if (diffHours < 24) return `${diffHours}h ago`\r\n    if (diffDays < 7) return `${diffDays}d ago`\r\n    return date.toLocaleDateString()\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/* Backdrop */}\r\n      {isOpen && (\r\n        <div \r\n          className=\"sidebar-backdrop\" \r\n          onClick={onClose}\r\n        />\r\n      )}\r\n\r\n      {/* Sidebar */}\r\n      <div className={`conversation-sidebar ${isOpen ? 'open' : ''}`}>\r\n        <div className=\"sidebar-header\">\r\n          <h2 className=\"sidebar-title\">Conversations</h2>\r\n          <button \r\n            className=\"sidebar-close-btn\"\r\n            onClick={onClose}\r\n            aria-label=\"Close sidebar\"\r\n          >\r\n            ✕\r\n          </button>\r\n        </div>\r\n\r\n        <button \r\n          className=\"new-conversation-btn\"\r\n          onClick={() => {\r\n            onNewConversation()\r\n            onClose()\r\n          }}\r\n        >\r\n          <span className=\"new-conversation-icon\">+</span>\r\n          New Conversation\r\n        </button>\r\n\r\n        <div className=\"conversations-list\">\r\n          {conversations.length === 0 ? (\r\n            <div className=\"empty-state\">\r\n              <p>No conversations yet</p>\r\n              <p className=\"empty-state-hint\">Start chatting to create one!</p>\r\n            </div>\r\n          ) : (\r\n            conversations.map((conversation) => (\r\n              <div\r\n                key={conversation.id}\r\n                className={`conversation-item ${\r\n                  conversation.id === currentConversationId ? 'active' : ''\r\n                } ${deletingId === conversation.id ? 'deleting' : ''}`}\r\n                onClick={() => {\r\n                  onSelectConversation(conversation.id)\r\n                  onClose()\r\n                }}\r\n              >\r\n                <div className=\"conversation-info\">\r\n                  <div className=\"conversation-title\">\r\n                    {conversation.title}\r\n                  </div>\r\n                  <div className=\"conversation-meta\">\r\n                    <span className=\"conversation-model\">{conversation.model}</span>\r\n                    <span className=\"conversation-date\">\r\n                      {formatDate(conversation.updated_at)}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  className=\"delete-conversation-btn\"\r\n                  onClick={(e) => handleDelete(e, conversation.id)}\r\n                  aria-label=\"Delete conversation\"\r\n                  disabled={deletingId === conversation.id}\r\n                >\r\n                  {deletingId === conversation.id ? '...' : '🗑️'}\r\n                </button>\r\n              </div>\r\n            ))\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAee,SAAS,oBAAoB,EAC1C,aAAa,EACb,qBAAqB,EACrB,oBAAoB,EACpB,iBAAiB,EACjB,oBAAoB,EACpB,MAAM,EACN,OAAO,EACkB;;IACzB,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,oSAAQ,EAAgB;IAE5D,gCAAgC;IAChC,IAAA,qSAAS;yCAAC;YACR,MAAM;8DAAe,CAAC;oBACpB,IAAI,EAAE,GAAG,KAAK,YAAY,QAAQ;wBAChC;oBACF;gBACF;;YACA,SAAS,gBAAgB,CAAC,WAAW;YACrC;iDAAO,IAAM,SAAS,mBAAmB,CAAC,WAAW;;QACvD;wCAAG;QAAC;QAAQ;KAAQ;IAEpB,MAAM,eAAe,OAAO,GAAqB;QAC/C,EAAE,eAAe;QACjB,IAAI,OAAO,OAAO,CAAC,qDAAqD;YACtE,cAAc;YACd,MAAM,qBAAqB;YAC3B,cAAc;QAChB;IACF;IAEA,MAAM,aAAa,CAAC;QAClB,MAAM,OAAO,IAAI,KAAK;QACtB,MAAM,MAAM,IAAI;QAChB,MAAM,SAAS,IAAI,OAAO,KAAK,KAAK,OAAO;QAC3C,MAAM,WAAW,KAAK,KAAK,CAAC,SAAS;QACrC,MAAM,YAAY,KAAK,KAAK,CAAC,SAAS;QACtC,MAAM,WAAW,KAAK,KAAK,CAAC,SAAS;QAErC,IAAI,WAAW,GAAG,OAAO;QACzB,IAAI,WAAW,IAAI,OAAO,GAAG,SAAS,KAAK,CAAC;QAC5C,IAAI,YAAY,IAAI,OAAO,GAAG,UAAU,KAAK,CAAC;QAC9C,IAAI,WAAW,GAAG,OAAO,GAAG,SAAS,KAAK,CAAC;QAC3C,OAAO,KAAK,kBAAkB;IAChC;IAEA,qBACE;;YAEG,wBACC,wTAAC;gBACC,WAAU;gBACV,SAAS;;;;;;0BAKb,wTAAC;gBAAI,WAAW,CAAC,qBAAqB,EAAE,SAAS,SAAS,IAAI;;kCAC5D,wTAAC;wBAAI,WAAU;;0CACb,wTAAC;gCAAG,WAAU;0CAAgB;;;;;;0CAC9B,wTAAC;gCACC,WAAU;gCACV,SAAS;gCACT,cAAW;0CACZ;;;;;;;;;;;;kCAKH,wTAAC;wBACC,WAAU;wBACV,SAAS;4BACP;4BACA;wBACF;;0CAEA,wTAAC;gCAAK,WAAU;0CAAwB;;;;;;4BAAQ;;;;;;;kCAIlD,wTAAC;wBAAI,WAAU;kCACZ,cAAc,MAAM,KAAK,kBACxB,wTAAC;4BAAI,WAAU;;8CACb,wTAAC;8CAAE;;;;;;8CACH,wTAAC;oCAAE,WAAU;8CAAmB;;;;;;;;;;;mCAGlC,cAAc,GAAG,CAAC,CAAC,6BACjB,wTAAC;gCAEC,WAAW,CAAC,kBAAkB,EAC5B,aAAa,EAAE,KAAK,wBAAwB,WAAW,GACxD,CAAC,EAAE,eAAe,aAAa,EAAE,GAAG,aAAa,IAAI;gCACtD,SAAS;oCACP,qBAAqB,aAAa,EAAE;oCACpC;gCACF;;kDAEA,wTAAC;wCAAI,WAAU;;0DACb,wTAAC;gDAAI,WAAU;0DACZ,aAAa,KAAK;;;;;;0DAErB,wTAAC;gDAAI,WAAU;;kEACb,wTAAC;wDAAK,WAAU;kEAAsB,aAAa,KAAK;;;;;;kEACxD,wTAAC;wDAAK,WAAU;kEACb,WAAW,aAAa,UAAU;;;;;;;;;;;;;;;;;;kDAIzC,wTAAC;wCACC,WAAU;wCACV,SAAS,CAAC,IAAM,aAAa,GAAG,aAAa,EAAE;wCAC/C,cAAW;wCACX,UAAU,eAAe,aAAa,EAAE;kDAEvC,eAAe,aAAa,EAAE,GAAG,QAAQ;;;;;;;+BA1BvC,aAAa,EAAE;;;;;;;;;;;;;;;;;;AAmCpC;GA5HwB;KAAA"}},
    {"offset": {"line": 3563, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ajgre/Omi-AI-1/src/NewsTicker.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useRef } from 'react';\r\nimport { useState } from 'react';\r\n\r\ninterface ActivityItem {\r\n  username: string;\r\n  action: string;\r\n  timestamp: string;\r\n}\r\n\r\nexport default function NewsTicker() {\r\n  const [activities, setActivities] = useState<ActivityItem[]>([]);\r\n  const tickerRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    generateActivities();\r\n    // Generate new activities every 30 seconds\r\n    const interval = setInterval(generateActivities, 30000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const generateActivities = () => {\r\n    const usernames = [\r\n      'Alex414', 'SamantaGlory', 'Pirateboy', 'tomandjarry', 'DataNinja', 'CodeWizard',\r\n      'AIEnthusiast', 'TechSavvy', 'PixelMaster', 'DevGuru', 'CloudRider', 'ByteHunter',\r\n      'CyberPhoenix', 'QuantumLeap', 'NeonDreamer', 'SyntaxKing', 'LogicLord', 'BinaryBoss',\r\n      'ScriptMage', 'DigitalDuke', 'AlgoAce', 'MatrixMind', 'VirtualVoyager', 'CryptoChamp',\r\n      'WebWarrior', 'CodeCrusader', 'TechTitan', 'PixelPirate', 'DataDragon', 'CloudChaser',\r\n      'ByteBender', 'CyberSamurai', 'QuantumQuest', 'NeonNinja', 'SyntaxSage', 'LogicLegend',\r\n      'BinaryBard', 'ScriptSensei', 'DigitalDynamo', 'AlgoArchitect', 'MatrixMaverick'\r\n    ];\r\n\r\n    const actions = [\r\n      'just trained a Custom Omi',\r\n      'just chatted with Omi Chat',\r\n      'just generated a new image in the Media Studio',\r\n      'just Upgraded to the Pro Plan!',\r\n      'just created a new AI Workflow',\r\n      'just generated a stunning video',\r\n      'just completed a deep web search',\r\n      'just customized their AI assistant',\r\n      'just exported media from the gallery',\r\n      'just discovered a new feature',\r\n      'just integrated an API',\r\n      'just automated a complex task',\r\n      'just analyzed data with AI',\r\n      'just created research content',\r\n      'just generated code snippets',\r\n      'just trained a specialized model',\r\n      'just built a business workflow',\r\n      'just designed a creative project',\r\n      'just optimized their AI settings',\r\n      'just shared their Custom Omi',\r\n      'just completed an AI task',\r\n      'just explored the Command Hub',\r\n      'just unlocked advanced features',\r\n      'just personalized their workspace',\r\n      'just generated multiple images',\r\n      'just created AI-powered content',\r\n      'just enhanced their workflow',\r\n      'just automated data processing',\r\n      'just built an intelligent system',\r\n      'just mastered a new AI tool'\r\n    ];\r\n\r\n    // Generate 40 random activities\r\n    const generatedActivities: ActivityItem[] = [];\r\n    for (let i = 0; i < 40; i++) {\r\n      const randomUsername = usernames[Math.floor(Math.random() * usernames.length)];\r\n      const randomAction = actions[Math.floor(Math.random() * actions.length)];\r\n      const randomMinutesAgo = Math.floor(Math.random() * 60) + 1;\r\n      \r\n      generatedActivities.push({\r\n        username: randomUsername,\r\n        action: randomAction,\r\n        timestamp: new Date(Date.now() - randomMinutesAgo * 60000).toISOString()\r\n      });\r\n    }\r\n\r\n    setActivities(generatedActivities);\r\n  };\r\n\r\n  const formatTimeAgo = (dateString: string) => {\r\n    const date = new Date(dateString);\r\n    const now = new Date();\r\n    const diffMs = now.getTime() - date.getTime();\r\n    const diffMins = Math.floor(diffMs / 60000);\r\n    const diffHours = Math.floor(diffMins / 60);\r\n    const diffDays = Math.floor(diffHours / 24);\r\n\r\n    if (diffMins < 1) return 'just now';\r\n    if (diffMins < 60) return `${diffMins}m ago`;\r\n    if (diffHours < 24) return `${diffHours}h ago`;\r\n    return `${diffDays}d ago`;\r\n  };\r\n\r\n  if (activities.length === 0) {\r\n    return (\r\n      <div className=\"news-ticker\">\r\n        <div className=\"news-ticker-container\">\r\n          <div className=\"news-ticker-label\">\r\n            <span className=\"ticker-icon\">◈</span>\r\n            <span>LIVE ACTIVITY</span>\r\n          </div>\r\n          <div className=\"news-ticker-content loading\">\r\n            <span>Loading user activity...</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"news-ticker\">\r\n      <div className=\"news-ticker-container\">\r\n        <div className=\"news-ticker-label\">\r\n          <span className=\"ticker-icon\">◈</span>\r\n          <span>LIVE ACTIVITY</span>\r\n        </div>\r\n        <div className=\"news-ticker-content\" ref={tickerRef}>\r\n          <div className=\"news-ticker-track\">\r\n            {/* Duplicate items for seamless loop */}\r\n            {[...activities, ...activities].map((item, index) => (\r\n              <div key={index} className=\"news-item\">\r\n                <span className=\"news-bullet\">●</span>\r\n                <span className=\"activity-username\">{item.username}</span>\r\n                <span className=\"activity-action\">{item.action}</span>\r\n                <span className=\"news-meta\">\r\n                  <span className=\"news-time\">{formatTimeAgo(item.timestamp)}</span>\r\n                </span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3864, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ajgre/Omi-AI-1/src/supabaseClient.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { getBrowserSupabaseClient } from \"@/lib/supabase-browser\";\r\n\r\nexport const supabase = getBrowserSupabaseClient();\r\n\r\n// Database Types\r\nexport interface User {\r\n  id: string;\r\n  email: string;\r\n  name: string | null;\r\n  avatar_url: string | null;\r\n  created_at: string;\r\n}\r\n\r\nexport interface Conversation {\r\n  id: string;\r\n  user_id: string;\r\n  title: string;\r\n  model: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface Message {\r\n  id: string;\r\n  conversation_id: string;\r\n  role: \"user\" | \"assistant\";\r\n  content: string;\r\n  timestamp: string;\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AAFA;;AAIO,MAAM,WAAW,IAAA,2KAAwB"}},
    {"offset": {"line": 3879, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ajgre/Omi-AI-1/src/mediaService.ts"],"sourcesContent":["import { supabase } from './supabaseClient';\r\n\r\nexport interface GeneratedMedia {\r\n  id: string;\r\n  user_id: string;\r\n  type: 'image' | 'video';\r\n  url: string;\r\n  prompt: string;\r\n  created_at: string;\r\n}\r\n\r\n// Save generated media to database\r\nexport async function saveGeneratedMedia(\r\n  userId: string,\r\n  type: 'image' | 'video',\r\n  url: string,\r\n  prompt: string\r\n): Promise<boolean> {\r\n  try {\r\n    const { error } = await supabase\r\n      .from('generated_media')\r\n      .insert([\r\n        {\r\n          user_id: userId,\r\n          type,\r\n          url,\r\n          prompt,\r\n          created_at: new Date().toISOString(),\r\n        },\r\n      ]);\r\n\r\n    if (error) {\r\n      console.error('Error saving media:', error);\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  } catch (error) {\r\n    console.error('Error saving media:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\n// Get all generated media for a user\r\nexport async function getUserGeneratedMedia(\r\n  userId: string\r\n): Promise<GeneratedMedia[]> {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from('generated_media')\r\n      .select('*')\r\n      .eq('user_id', userId)\r\n      .order('created_at', { ascending: false });\r\n\r\n    if (error) {\r\n      console.error('Error fetching media:', error);\r\n      return [];\r\n    }\r\n\r\n    return data || [];\r\n  } catch (error) {\r\n    console.error('Error fetching media:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\n// Delete a generated media item\r\nexport async function deleteGeneratedMedia(mediaId: string): Promise<boolean> {\r\n  try {\r\n    const { error } = await supabase\r\n      .from('generated_media')\r\n      .delete()\r\n      .eq('id', mediaId);\r\n\r\n    if (error) {\r\n      console.error('Error deleting media:', error);\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  } catch (error) {\r\n    console.error('Error deleting media:', error);\r\n    return false;\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAYO,eAAe,mBACpB,MAAc,EACd,IAAuB,EACvB,GAAW,EACX,MAAc;IAEd,IAAI;QACF,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,sJAAQ,CAC7B,IAAI,CAAC,mBACL,MAAM,CAAC;YACN;gBACE,SAAS;gBACT;gBACA;gBACA;gBACA,YAAY,IAAI,OAAO,WAAW;YACpC;SACD;QAEH,IAAI,OAAO;YACT,QAAQ,KAAK,CAAC,uBAAuB;YACrC,OAAO;QACT;QAEA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO;IACT;AACF;AAGO,eAAe,sBACpB,MAAc;IAEd,IAAI;QACF,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,sJAAQ,CACnC,IAAI,CAAC,mBACL,MAAM,CAAC,KACP,EAAE,CAAC,WAAW,QACd,KAAK,CAAC,cAAc;YAAE,WAAW;QAAM;QAE1C,IAAI,OAAO;YACT,QAAQ,KAAK,CAAC,yBAAyB;YACvC,OAAO,EAAE;QACX;QAEA,OAAO,QAAQ,EAAE;IACnB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,EAAE;IACX;AACF;AAGO,eAAe,qBAAqB,OAAe;IACxD,IAAI;QACF,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,sJAAQ,CAC7B,IAAI,CAAC,mBACL,MAAM,GACN,EAAE,CAAC,MAAM;QAEZ,IAAI,OAAO;YACT,QAAQ,KAAK,CAAC,yBAAyB;YACvC,OAAO;QACT;QAEA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO;IACT;AACF"}},
    {"offset": {"line": 3945, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ajgre/Omi-AI-1/src/MediaGallery.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { getUserGeneratedMedia, deleteGeneratedMedia, type GeneratedMedia } from './mediaService';\r\n\r\ninterface MediaGalleryProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  userId: string | null;\r\n}\r\n\r\nexport default function MediaGallery({ isOpen, onClose, userId }: MediaGalleryProps) {\r\n  const [media, setMedia] = useState<GeneratedMedia[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [filter, setFilter] = useState<'all' | 'image' | 'video'>('all');\r\n  const [selectedMedia, setSelectedMedia] = useState<GeneratedMedia | null>(null);\r\n\r\n  // Load media when modal opens or userId changes\r\n  useEffect(() => {\r\n    if (isOpen && userId) {\r\n      console.log('📥 Loading media for user:', userId);\r\n      loadMedia();\r\n    }\r\n  }, [isOpen, userId]);\r\n\r\n  // Refresh media every time the modal opens (to catch new additions)\r\n  useEffect(() => {\r\n    if (isOpen && userId) {\r\n      loadMedia();\r\n    }\r\n  }, [isOpen]);\r\n\r\n  const loadMedia = async () => {\r\n    if (!userId) {\r\n      console.warn('⚠️ No userId provided to MediaGallery');\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n    \r\n    setIsLoading(true);\r\n    const data = await getUserGeneratedMedia(userId);\r\n    console.log('📸 Loaded media items:', data.length);\r\n    setMedia(data);\r\n    setIsLoading(false);\r\n  };\r\n\r\n  const handleDelete = async (mediaId: string) => {\r\n    if (!confirm('Are you sure you want to delete this item?')) return;\r\n    \r\n    const success = await deleteGeneratedMedia(mediaId);\r\n    if (success) {\r\n      setMedia(media.filter(m => m.id !== mediaId));\r\n      if (selectedMedia?.id === mediaId) {\r\n        setSelectedMedia(null);\r\n      }\r\n    }\r\n  };\r\n\r\n  const filteredMedia = filter === 'all' \r\n    ? media \r\n    : media.filter(m => m.type === filter);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"media-gallery-overlay\" onClick={onClose}>\r\n      <div className=\"media-gallery-modal\" onClick={(e) => e.stopPropagation()}>\r\n        <div className=\"media-gallery-header\">\r\n          <h2>Your Generated Media</h2>\r\n          <button className=\"close-btn\" onClick={onClose}>✕</button>\r\n        </div>\r\n\r\n        <div className=\"media-gallery-filters\">\r\n          <button\r\n            className={`filter-btn ${filter === 'all' ? 'active' : ''}`}\r\n            onClick={() => setFilter('all')}\r\n          >\r\n            All ({media.length})\r\n          </button>\r\n          <button\r\n            className={`filter-btn ${filter === 'image' ? 'active' : ''}`}\r\n            onClick={() => setFilter('image')}\r\n          >\r\n            Images ({media.filter(m => m.type === 'image').length})\r\n          </button>\r\n          <button\r\n            className={`filter-btn ${filter === 'video' ? 'active' : ''}`}\r\n            onClick={() => setFilter('video')}\r\n          >\r\n            Videos ({media.filter(m => m.type === 'video').length})\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"media-gallery-content\">\r\n          {isLoading ? (\r\n            <div className=\"loading-state\">\r\n              <div className=\"spinner\"></div>\r\n              <p>Loading your media...</p>\r\n            </div>\r\n          ) : filteredMedia.length === 0 ? (\r\n            <div className=\"empty-state\">\r\n              <div className=\"empty-icon\">📁</div>\r\n              <p>No {filter !== 'all' ? filter + 's' : 'media'} yet</p>\r\n              <p className=\"empty-hint\">Generate images and videos in the AI Media Studio to see them here</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"media-grid\">\r\n              {filteredMedia.map((item) => (\r\n                <div key={item.id} className=\"media-card\">\r\n                  <div className=\"media-preview\" onClick={() => setSelectedMedia(item)}>\r\n                    {item.type === 'image' ? (\r\n                      <img \r\n                        src={item.url} \r\n                        alt={item.prompt} \r\n                        loading=\"lazy\"\r\n                        onError={(e) => {\r\n                          console.error('Failed to load image:', item.url);\r\n                          e.currentTarget.src = 'data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 400 300\"%3E%3Crect fill=\"%23111\" width=\"400\" height=\"300\"/%3E%3Ctext x=\"50%25\" y=\"50%25\" text-anchor=\"middle\" fill=\"%23666\" font-size=\"16\"%3EImage unavailable%3C/text%3E%3C/svg%3E';\r\n                        }}\r\n                      />\r\n                    ) : (\r\n                      <video \r\n                        src={item.url}\r\n                        onError={() => {\r\n                          console.error('Failed to load video:', item.url);\r\n                        }}\r\n                      />\r\n                    )}\r\n                    <div className=\"media-overlay\">\r\n                      <span className=\"media-type-badge\">\r\n                        {item.type === 'image' ? '🖼️' : '🎬'}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"media-card-footer\">\r\n                    <p className=\"media-prompt\" title={item.prompt}>\r\n                      {item.prompt}\r\n                    </p>\r\n                    <div className=\"media-card-actions\">\r\n                      <a\r\n                        href={item.url}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        className=\"media-action-btn\"\r\n                        title=\"Open\"\r\n                      >\r\n                        🔗\r\n                      </a>\r\n                      <button\r\n                        className=\"media-action-btn delete-btn\"\r\n                        onClick={() => handleDelete(item.id)}\r\n                        title=\"Delete\"\r\n                      >\r\n                        🗑️\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Lightbox for selected media */}\r\n        {selectedMedia && (\r\n          <div className=\"media-lightbox\" onClick={() => setSelectedMedia(null)}>\r\n            <div className=\"lightbox-content\" onClick={(e) => e.stopPropagation()}>\r\n              <button className=\"lightbox-close\" onClick={() => setSelectedMedia(null)}>✕</button>\r\n              {selectedMedia.type === 'image' ? (\r\n                <img \r\n                  src={selectedMedia.url} \r\n                  alt={selectedMedia.prompt}\r\n                  onError={(e) => {\r\n                    console.error('Failed to load image in lightbox:', selectedMedia.url);\r\n                    e.currentTarget.src = 'data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 800 600\"%3E%3Crect fill=\"%23111\" width=\"800\" height=\"600\"/%3E%3Ctext x=\"50%25\" y=\"50%25\" text-anchor=\"middle\" fill=\"%23666\" font-size=\"24\"%3EImage unavailable%3C/text%3E%3C/svg%3E';\r\n                  }}\r\n                />\r\n              ) : (\r\n                <video \r\n                  src={selectedMedia.url} \r\n                  controls \r\n                  autoPlay\r\n                  onError={() => {\r\n                    console.error('Failed to load video in lightbox:', selectedMedia.url);\r\n                  }}\r\n                />\r\n              )}\r\n              <div className=\"lightbox-info\">\r\n                <p className=\"lightbox-prompt\">{selectedMedia.prompt}</p>\r\n                <p className=\"lightbox-date\">\r\n                  {new Date(selectedMedia.created_at).toLocaleDateString('en-US', {\r\n                    year: 'numeric',\r\n                    month: 'long',\r\n                    day: 'numeric',\r\n                    hour: '2-digit',\r\n                    minute: '2-digit'\r\n                  })}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4369, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ajgre/Omi-AI-1/src/SearchModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\n\r\ninterface SearchResult {\r\n  type: 'conversation' | 'message' | 'feature';\r\n  title: string;\r\n  description: string;\r\n  icon: string;\r\n  onClick: () => void;\r\n}\r\n\r\ninterface SearchModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nexport default function SearchModal({ isOpen, onClose }: SearchModalProps) {\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [searchResults, setSearchResults] = useState<SearchResult[]>([]);\r\n  const [isSearching, setIsSearching] = useState(false);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n  // Focus input when modal opens\r\n  useEffect(() => {\r\n    if (isOpen && inputRef.current) {\r\n      inputRef.current.focus();\r\n    }\r\n  }, [isOpen]);\r\n\r\n  // Handle escape key\r\n  useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape' && isOpen) {\r\n        onClose();\r\n      }\r\n    };\r\n\r\n    document.addEventListener('keydown', handleEscape);\r\n    return () => document.removeEventListener('keydown', handleEscape);\r\n  }, [isOpen, onClose]);\r\n\r\n  // Search features and content\r\n  const features: SearchResult[] = [\r\n    {\r\n      type: 'feature',\r\n      title: 'Omi Chat',\r\n      description: 'Conversational AI with advanced reasoning',\r\n      icon: '💬',\r\n      onClick: () => {\r\n        console.log('Navigate to Omi Chat');\r\n        onClose();\r\n      }\r\n    },\r\n    {\r\n      type: 'feature',\r\n      title: 'Web Search',\r\n      description: 'Search the web with AI-powered insights',\r\n      icon: '🌐',\r\n      onClick: () => {\r\n        console.log('Navigate to Web Search');\r\n        onClose();\r\n      }\r\n    },\r\n    {\r\n      type: 'feature',\r\n      title: 'Image Generation',\r\n      description: 'Create stunning visuals with AI',\r\n      icon: '🎨',\r\n      onClick: () => {\r\n        console.log('Navigate to Image Generation');\r\n        onClose();\r\n      }\r\n    },\r\n    {\r\n      type: 'feature',\r\n      title: 'Video Generation',\r\n      description: 'Transform ideas into motion',\r\n      icon: '🎬',\r\n      onClick: () => {\r\n        console.log('Navigate to Video Generation');\r\n        onClose();\r\n      }\r\n    },\r\n    {\r\n      type: 'feature',\r\n      title: 'Media Gallery',\r\n      description: 'View all your generated images and videos',\r\n      icon: '⊞',\r\n      onClick: () => {\r\n        console.log('Navigate to Media Gallery');\r\n        onClose();\r\n      }\r\n    },\r\n    {\r\n      type: 'feature',\r\n      title: 'Settings',\r\n      description: 'Configure your preferences',\r\n      icon: '⚙',\r\n      onClick: () => {\r\n        console.log('Navigate to Settings');\r\n        onClose();\r\n      }\r\n    },\r\n    {\r\n      type: 'feature',\r\n      title: 'Command Hub',\r\n      description: 'Access all tools and features',\r\n      icon: '◆',\r\n      onClick: () => {\r\n        console.log('Navigate to Command Hub');\r\n        onClose();\r\n      }\r\n    }\r\n  ];\r\n\r\n  // Perform search\r\n  useEffect(() => {\r\n    if (!searchQuery.trim()) {\r\n      setSearchResults([]);\r\n      setIsSearching(false);\r\n      return;\r\n    }\r\n\r\n    setIsSearching(true);\r\n\r\n    // Simple search filter\r\n    const query = searchQuery.toLowerCase();\r\n    const filtered = features.filter(\r\n      item =>\r\n        item.title.toLowerCase().includes(query) ||\r\n        item.description.toLowerCase().includes(query)\r\n    );\r\n\r\n    // Simulate search delay for better UX\r\n    const timeout = setTimeout(() => {\r\n      setSearchResults(filtered);\r\n      setIsSearching(false);\r\n    }, 150);\r\n\r\n    return () => clearTimeout(timeout);\r\n  }, [searchQuery]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <>\r\n      {/* Backdrop */}\r\n      <div className=\"search-backdrop\" onClick={onClose} />\r\n\r\n      {/* Search Modal */}\r\n      <div className=\"search-modal\">\r\n        <div className=\"search-header\">\r\n          <div className=\"search-icon\">🔍</div>\r\n          <input\r\n            ref={inputRef}\r\n            type=\"text\"\r\n            className=\"search-input\"\r\n            placeholder=\"Search features, conversations, or keywords...\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            autoComplete=\"off\"\r\n          />\r\n          <button className=\"search-close\" onClick={onClose}>\r\n            ✕\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"search-content\">\r\n          {!searchQuery && (\r\n            <div className=\"search-empty\">\r\n              <div className=\"search-empty-icon\">🔎</div>\r\n              <p className=\"search-empty-text\">Search across the entire app</p>\r\n              <p className=\"search-empty-hint\">Try searching for features, conversations, or actions</p>\r\n            </div>\r\n          )}\r\n\r\n          {isSearching && (\r\n            <div className=\"search-loading\">\r\n              <div className=\"search-spinner\"></div>\r\n              <p>Searching...</p>\r\n            </div>\r\n          )}\r\n\r\n          {searchQuery && !isSearching && searchResults.length === 0 && (\r\n            <div className=\"search-no-results\">\r\n              <div className=\"search-no-results-icon\">🔍</div>\r\n              <p className=\"search-no-results-text\">No results found</p>\r\n              <p className=\"search-no-results-hint\">Try a different search term</p>\r\n            </div>\r\n          )}\r\n\r\n          {searchResults.length > 0 && (\r\n            <div className=\"search-results\">\r\n              <p className=\"search-results-label\">{searchResults.length} result{searchResults.length !== 1 ? 's' : ''}</p>\r\n              {searchResults.map((result, index) => (\r\n                <button\r\n                  key={index}\r\n                  className=\"search-result-item\"\r\n                  onClick={result.onClick}\r\n                >\r\n                  <div className=\"search-result-icon\">{result.icon}</div>\r\n                  <div className=\"search-result-content\">\r\n                    <div className=\"search-result-title\">{result.title}</div>\r\n                    <div className=\"search-result-description\">{result.description}</div>\r\n                  </div>\r\n                  <div className=\"search-result-arrow\">→</div>\r\n                </button>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"search-footer\">\r\n          <div className=\"search-shortcut\">\r\n            <kbd>ESC</kbd> to close\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4782, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ajgre/Omi-AI-1/src/ImagePreviewTooltip.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from 'react';\r\n\r\ninterface ImagePreviewTooltipProps {\r\n  isVisible: boolean;\r\n}\r\n\r\nconst ImagePreviewTooltip: React.FC<ImagePreviewTooltipProps> = ({ isVisible }) => {\r\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\r\n\r\n  // Sample images - replace these URLs with actual sample images\r\n  const sampleImages = [\r\n    '/images/samples/ai.jpg',\r\n    '/images/samples/sample2.jpg',\r\n    '/images/samples/little guy.png',\r\n    '/images/samples/overl.png',\r\n  ];\r\n\r\n  useEffect(() => {\r\n    if (!isVisible) return;\r\n\r\n    const interval = setInterval(() => {\r\n      setCurrentImageIndex((prev) => (prev + 1) % sampleImages.length);\r\n    }, 1500); // Change image every 1.5 seconds\r\n\r\n    return () => clearInterval(interval);\r\n  }, [isVisible, sampleImages.length]);\r\n\r\n  if (!isVisible) return null;\r\n\r\n  return (\r\n    <div className=\"image-preview-tooltip\">\r\n      <div className=\"preview-content\">\r\n        <div className=\"preview-text\">Real-time AI image generation</div>\r\n        <div className=\"preview-carousel\">\r\n          {sampleImages.map((img, index) => (\r\n            <img\r\n              key={index}\r\n              src={img}\r\n              alt={`Sample ${index + 1}`}\r\n              className={`preview-image ${index === currentImageIndex ? 'active' : ''}`}\r\n            />\r\n          ))}\r\n        </div>\r\n        <div className=\"preview-caption\">\r\n          Type a prompt to generate stunning images\r\n        </div>\r\n      </div>\r\n      <div className=\"tooltip-arrow\"></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImagePreviewTooltip;\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAQA,MAAM,sBAA0D,CAAC,EAAE,SAAS,EAAE;;IAC5E,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,oSAAQ,EAAC;IAE3D,+DAA+D;IAC/D,MAAM,eAAe;QACnB;QACA;QACA;QACA;KACD;IAED,IAAA,qSAAS;yCAAC;YACR,IAAI,CAAC,WAAW;YAEhB,MAAM,WAAW;0DAAY;oBAC3B;kEAAqB,CAAC,OAAS,CAAC,OAAO,CAAC,IAAI,aAAa,MAAM;;gBACjE;yDAAG,OAAO,iCAAiC;YAE3C;iDAAO,IAAM,cAAc;;QAC7B;wCAAG;QAAC;QAAW,aAAa,MAAM;KAAC;IAEnC,IAAI,CAAC,WAAW,OAAO;IAEvB,qBACE,wTAAC;QAAI,WAAU;;0BACb,wTAAC;gBAAI,WAAU;;kCACb,wTAAC;wBAAI,WAAU;kCAAe;;;;;;kCAC9B,wTAAC;wBAAI,WAAU;kCACZ,aAAa,GAAG,CAAC,CAAC,KAAK,sBACtB,wTAAC;gCAEC,KAAK;gCACL,KAAK,CAAC,OAAO,EAAE,QAAQ,GAAG;gCAC1B,WAAW,CAAC,cAAc,EAAE,UAAU,oBAAoB,WAAW,IAAI;+BAHpE;;;;;;;;;;kCAOX,wTAAC;wBAAI,WAAU;kCAAkB;;;;;;;;;;;;0BAInC,wTAAC;gBAAI,WAAU;;;;;;;;;;;;AAGrB;GA5CM;KAAA;uCA8CS"}},
    {"offset": {"line": 4891, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ajgre/Omi-AI-1/src/VideoPreviewTooltip.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useRef, useState } from 'react';\r\n\r\ninterface VideoPreviewTooltipProps {\r\n  isVisible: boolean;\r\n}\r\n\r\nconst VideoPreviewTooltip: React.FC<VideoPreviewTooltipProps> = ({ isVisible }) => {\r\n  const [currentVideoIndex, setCurrentVideoIndex] = useState(0);\r\n  const videoRef = useRef<HTMLVideoElement>(null);\r\n\r\n  // Sample videos from the static/videos folder\r\n  const sampleVideos = [\r\n    '/videos/vidpreview.mp4',\r\n    '/videos/dogclimb.mp4',\r\n    '/videos/matrixcode.mp4',\r\n    '/videos/rockbug.mp4'\r\n  ];\r\n\r\n  useEffect(() => {\r\n    if (!isVisible) {\r\n      // Pause video when not visible\r\n      if (videoRef.current) {\r\n        videoRef.current.pause();\r\n      }\r\n      return;\r\n    }\r\n\r\n    // Play the current video when visible\r\n    if (videoRef.current) {\r\n      videoRef.current.play().catch(err => {\r\n        console.log('Video autoplay failed:', err);\r\n      });\r\n    }\r\n\r\n    // Change video every 4 seconds\r\n    const interval = setInterval(() => {\r\n      setCurrentVideoIndex((prev) => (prev + 1) % sampleVideos.length);\r\n    }, 4000);\r\n\r\n    return () => clearInterval(interval);\r\n  }, [isVisible, sampleVideos.length]);\r\n\r\n  // When video index changes, load and play the new video\r\n  useEffect(() => {\r\n    if (videoRef.current && isVisible) {\r\n      const video = videoRef.current;\r\n      \r\n      console.log('Loading video:', sampleVideos[currentVideoIndex]);\r\n      \r\n      // Add event listener to play once loaded\r\n      const handleCanPlay = () => {\r\n        console.log('Video can play:', sampleVideos[currentVideoIndex]);\r\n        video.play().catch(err => {\r\n          console.log('Video autoplay failed:', err);\r\n        });\r\n      };\r\n      \r\n      const handleError = () => {\r\n        console.error('Video load error:', sampleVideos[currentVideoIndex], video.error);\r\n      };\r\n      \r\n      video.addEventListener('canplay', handleCanPlay);\r\n      video.addEventListener('error', handleError);\r\n      video.load();\r\n      \r\n      return () => {\r\n        video.removeEventListener('canplay', handleCanPlay);\r\n        video.removeEventListener('error', handleError);\r\n      };\r\n    }\r\n  }, [currentVideoIndex, isVisible, sampleVideos]);\r\n\r\n  if (!isVisible) return null;\r\n\r\n  return (\r\n    <div className=\"video-preview-tooltip\">\r\n      <div className=\"preview-content\">\r\n        <div className=\"preview-text\">Generate AI videos from text prompts</div>\r\n        <div className=\"preview-video-container\">\r\n          <video\r\n            ref={videoRef}\r\n            className=\"preview-video\"\r\n            muted\r\n            loop={false}\r\n            playsInline\r\n            autoPlay\r\n            preload=\"auto\"\r\n            key={currentVideoIndex}\r\n          >\r\n            <source src={sampleVideos[currentVideoIndex]} type=\"video/mp4\" />\r\n            Your browser does not support the video tag.\r\n          </video>\r\n          <div className=\"video-overlay-gradient\"></div>\r\n        </div>\r\n        <div className=\"preview-caption\">\r\n          Create stunning video content with AI\r\n        </div>\r\n      </div>\r\n      <div className=\"tooltip-arrow\"></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VideoPreviewTooltip;\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAQA,MAAM,sBAA0D,CAAC,EAAE,SAAS,EAAE;;IAC5E,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,oSAAQ,EAAC;IAC3D,MAAM,WAAW,IAAA,kSAAM,EAAmB;IAE1C,8CAA8C;IAC9C,MAAM,eAAe;QACnB;QACA;QACA;QACA;KACD;IAED,IAAA,qSAAS;yCAAC;YACR,IAAI,CAAC,WAAW;gBACd,+BAA+B;gBAC/B,IAAI,SAAS,OAAO,EAAE;oBACpB,SAAS,OAAO,CAAC,KAAK;gBACxB;gBACA;YACF;YAEA,sCAAsC;YACtC,IAAI,SAAS,OAAO,EAAE;gBACpB,SAAS,OAAO,CAAC,IAAI,GAAG,KAAK;qDAAC,CAAA;wBAC5B,QAAQ,GAAG,CAAC,0BAA0B;oBACxC;;YACF;YAEA,+BAA+B;YAC/B,MAAM,WAAW;0DAAY;oBAC3B;kEAAqB,CAAC,OAAS,CAAC,OAAO,CAAC,IAAI,aAAa,MAAM;;gBACjE;yDAAG;YAEH;iDAAO,IAAM,cAAc;;QAC7B;wCAAG;QAAC;QAAW,aAAa,MAAM;KAAC;IAEnC,wDAAwD;IACxD,IAAA,qSAAS;yCAAC;YACR,IAAI,SAAS,OAAO,IAAI,WAAW;gBACjC,MAAM,QAAQ,SAAS,OAAO;gBAE9B,QAAQ,GAAG,CAAC,kBAAkB,YAAY,CAAC,kBAAkB;gBAE7D,yCAAyC;gBACzC,MAAM;mEAAgB;wBACpB,QAAQ,GAAG,CAAC,mBAAmB,YAAY,CAAC,kBAAkB;wBAC9D,MAAM,IAAI,GAAG,KAAK;2EAAC,CAAA;gCACjB,QAAQ,GAAG,CAAC,0BAA0B;4BACxC;;oBACF;;gBAEA,MAAM;iEAAc;wBAClB,QAAQ,KAAK,CAAC,qBAAqB,YAAY,CAAC,kBAAkB,EAAE,MAAM,KAAK;oBACjF;;gBAEA,MAAM,gBAAgB,CAAC,WAAW;gBAClC,MAAM,gBAAgB,CAAC,SAAS;gBAChC,MAAM,IAAI;gBAEV;qDAAO;wBACL,MAAM,mBAAmB,CAAC,WAAW;wBACrC,MAAM,mBAAmB,CAAC,SAAS;oBACrC;;YACF;QACF;wCAAG;QAAC;QAAmB;QAAW;KAAa;IAE/C,IAAI,CAAC,WAAW,OAAO;IAEvB,qBACE,wTAAC;QAAI,WAAU;;0BACb,wTAAC;gBAAI,WAAU;;kCACb,wTAAC;wBAAI,WAAU;kCAAe;;;;;;kCAC9B,wTAAC;wBAAI,WAAU;;0CACb,wTAAC;gCACC,KAAK;gCACL,WAAU;gCACV,KAAK;gCACL,MAAM;gCACN,WAAW;gCACX,QAAQ;gCACR,SAAQ;;kDAGR,wTAAC;wCAAO,KAAK,YAAY,CAAC,kBAAkB;wCAAE,MAAK;;;;;;oCAAc;;+BAF5D;;;;;0CAKP,wTAAC;gCAAI,WAAU;;;;;;;;;;;;kCAEjB,wTAAC;wBAAI,WAAU;kCAAkB;;;;;;;;;;;;0BAInC,wTAAC;gBAAI,WAAU;;;;;;;;;;;;AAGrB;GA/FM;KAAA;uCAiGS"}},
    {"offset": {"line": 5078, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ajgre/Omi-AI-1/src/databaseService.ts"],"sourcesContent":["import { supabase } from './supabaseClient'\r\n\r\nexport interface DbConversation {\r\n  id: string\r\n  user_id: string\r\n  title: string\r\n  model: string\r\n  created_at: string\r\n  updated_at: string\r\n}\r\n\r\nexport interface DbMessage {\r\n  id: string\r\n  conversation_id: string\r\n  role: 'user' | 'assistant'\r\n  content: string\r\n  timestamp: string\r\n}\r\n\r\n/**\r\n * Create a new conversation\r\n */\r\nexport async function createConversation(\r\n  userId: string,\r\n  title: string = 'New Conversation',\r\n  model: string = 'Gemini Pro'\r\n): Promise<DbConversation | null> {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from('conversations')\r\n      .insert({\r\n        user_id: userId,\r\n        title,\r\n        model\r\n      })\r\n      .select()\r\n      .single()\r\n\r\n    if (error) {\r\n      console.error('Error creating conversation:', error)\r\n      return null\r\n    }\r\n\r\n    return data\r\n  } catch (error) {\r\n    console.error('Error creating conversation:', error)\r\n    return null\r\n  }\r\n}\r\n\r\n/**\r\n * Get all conversations for a user\r\n */\r\nexport async function getUserConversations(userId: string): Promise<DbConversation[]> {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from('conversations')\r\n      .select('*')\r\n      .eq('user_id', userId)\r\n      .order('updated_at', { ascending: false })\r\n\r\n    if (error) {\r\n      console.error('Error fetching conversations:', error)\r\n      return []\r\n    }\r\n\r\n    return data || []\r\n  } catch (error) {\r\n    console.error('Error fetching conversations:', error)\r\n    return []\r\n  }\r\n}\r\n\r\n/**\r\n * Get messages for a specific conversation\r\n */\r\nexport async function getConversationMessages(conversationId: string): Promise<DbMessage[]> {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from('messages')\r\n      .select('*')\r\n      .eq('conversation_id', conversationId)\r\n      .order('timestamp', { ascending: true })\r\n\r\n    if (error) {\r\n      console.error('Error fetching messages:', error)\r\n      return []\r\n    }\r\n\r\n    return data || []\r\n  } catch (error) {\r\n    console.error('Error fetching messages:', error)\r\n    return []\r\n  }\r\n}\r\n\r\n/**\r\n * Save a message to a conversation\r\n */\r\nexport async function saveMessage(\r\n  conversationId: string,\r\n  role: 'user' | 'assistant',\r\n  content: string\r\n): Promise<DbMessage | null> {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from('messages')\r\n      .insert({\r\n        conversation_id: conversationId,\r\n        role,\r\n        content\r\n      })\r\n      .select()\r\n      .single()\r\n\r\n    if (error) {\r\n      console.error('Error saving message:', error)\r\n      return null\r\n    }\r\n\r\n    // Update conversation's updated_at timestamp\r\n    await supabase\r\n      .from('conversations')\r\n      .update({ updated_at: new Date().toISOString() })\r\n      .eq('id', conversationId)\r\n\r\n    return data\r\n  } catch (error) {\r\n    console.error('Error saving message:', error)\r\n    return null\r\n  }\r\n}\r\n\r\n/**\r\n * Update conversation title\r\n */\r\nexport async function updateConversationTitle(\r\n  conversationId: string,\r\n  title: string\r\n): Promise<boolean> {\r\n  try {\r\n    const { error } = await supabase\r\n      .from('conversations')\r\n      .update({ title })\r\n      .eq('id', conversationId)\r\n\r\n    if (error) {\r\n      console.error('Error updating conversation title:', error)\r\n      return false\r\n    }\r\n\r\n    return true\r\n  } catch (error) {\r\n    console.error('Error updating conversation title:', error)\r\n    return false\r\n  }\r\n}\r\n\r\n/**\r\n * Delete a conversation and all its messages\r\n */\r\nexport async function deleteConversation(conversationId: string): Promise<boolean> {\r\n  try {\r\n    const { error } = await supabase\r\n      .from('conversations')\r\n      .delete()\r\n      .eq('id', conversationId)\r\n\r\n    if (error) {\r\n      console.error('Error deleting conversation:', error)\r\n      return false\r\n    }\r\n\r\n    return true\r\n  } catch (error) {\r\n    console.error('Error deleting conversation:', error)\r\n    return false\r\n  }\r\n}\r\n\r\n/**\r\n * Generate a smart title from the first user message\r\n */\r\nexport function generateConversationTitle(firstMessage: string): string {\r\n  // Take first 50 characters or up to first line break\r\n  const title = firstMessage.split('\\n')[0].slice(0, 50)\r\n  return title.length < firstMessage.length ? `${title}...` : title\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5204, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ajgre/Omi-AI-1/src/ElectricBorder.tsx"],"sourcesContent":["import { useEffect, useId, useLayoutEffect, useRef } from 'react';\r\nimport './ElectricBorder.css';\r\n\r\ninterface ElectricBorderProps {\r\n  children: React.ReactNode;\r\n  color?: string;\r\n  speed?: number;\r\n  chaos?: number;\r\n  thickness?: number;\r\n  className?: string;\r\n  style?: React.CSSProperties;\r\n}\r\n\r\nconst ElectricBorder: React.FC<ElectricBorderProps> = ({ \r\n  children, \r\n  color = '#5227FF', \r\n  speed = 1, \r\n  chaos = 1, \r\n  thickness = 2, \r\n  className, \r\n  style \r\n}) => {\r\n  const rawId = useId().replace(/[:]/g, '');\r\n  const filterId = `turbulent-displace-${rawId}`;\r\n  const svgRef = useRef<SVGSVGElement>(null);\r\n  const rootRef = useRef<HTMLDivElement>(null);\r\n  const strokeRef = useRef<HTMLDivElement>(null);\r\n\r\n  const updateAnim = () => {\r\n    const svg = svgRef.current;\r\n    const host = rootRef.current;\r\n    if (!svg || !host) return;\r\n\r\n    if (strokeRef.current) {\r\n      strokeRef.current.style.filter = `url(#${filterId})`;\r\n    }\r\n\r\n    const width = Math.max(1, Math.round(host.clientWidth || host.getBoundingClientRect().width || 0));\r\n    const height = Math.max(1, Math.round(host.clientHeight || host.getBoundingClientRect().height || 0));\r\n\r\n    const dyAnims = Array.from(svg.querySelectorAll('feOffset > animate[attributeName=\"dy\"]'));\r\n    if (dyAnims.length >= 2) {\r\n      dyAnims[0].setAttribute('values', `${height}; 0`);\r\n      dyAnims[1].setAttribute('values', `0; -${height}`);\r\n    }\r\n\r\n    const dxAnims = Array.from(svg.querySelectorAll('feOffset > animate[attributeName=\"dx\"]'));\r\n    if (dxAnims.length >= 2) {\r\n      dxAnims[0].setAttribute('values', `${width}; 0`);\r\n      dxAnims[1].setAttribute('values', `0; -${width}`);\r\n    }\r\n\r\n    const baseDur = 6;\r\n    const dur = Math.max(0.001, baseDur / (speed || 1));\r\n    [...dyAnims, ...dxAnims].forEach(a => a.setAttribute('dur', `${dur}s`));\r\n\r\n    const disp = svg.querySelector('feDisplacementMap');\r\n    if (disp) disp.setAttribute('scale', String(30 * (chaos || 1)));\r\n\r\n    const filterEl = svg.querySelector(`#${CSS.escape(filterId)}`);\r\n    if (filterEl) {\r\n      filterEl.setAttribute('x', '-200%');\r\n      filterEl.setAttribute('y', '-200%');\r\n      filterEl.setAttribute('width', '500%');\r\n      filterEl.setAttribute('height', '500%');\r\n    }\r\n\r\n    requestAnimationFrame(() => {\r\n      [...dyAnims, ...dxAnims].forEach(a => {\r\n        if (typeof (a as any).beginElement === 'function') {\r\n          try {\r\n            (a as any).beginElement();\r\n          } catch {\r\n            console.warn('ElectricBorder: beginElement failed, this may be due to a browser limitation.');\r\n          }\r\n        }\r\n      });\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    updateAnim();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [speed, chaos]);\r\n\r\n  useLayoutEffect(() => {\r\n    if (!rootRef.current) return;\r\n    const ro = new ResizeObserver(() => updateAnim());\r\n    ro.observe(rootRef.current);\r\n    updateAnim();\r\n    return () => ro.disconnect();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const vars = {\r\n    ['--electric-border-color' as string]: color,\r\n    ['--eb-border-width' as string]: `${thickness}px`\r\n  };\r\n\r\n  return (\r\n    <div ref={rootRef} className={`electric-border ${className ?? ''}`} style={{ ...vars, ...style }}>\r\n      <svg ref={svgRef} className=\"eb-svg\" aria-hidden focusable=\"false\">\r\n        <defs>\r\n          <filter id={filterId} colorInterpolationFilters=\"sRGB\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\">\r\n            <feTurbulence type=\"turbulence\" baseFrequency=\"0.02\" numOctaves={10} result=\"noise1\" seed=\"1\" />\r\n            <feOffset in=\"noise1\" dx=\"0\" dy=\"0\" result=\"offsetNoise1\">\r\n              <animate attributeName=\"dy\" values=\"700; 0\" dur=\"6s\" repeatCount=\"indefinite\" calcMode=\"linear\" />\r\n            </feOffset>\r\n\r\n            <feTurbulence type=\"turbulence\" baseFrequency=\"0.02\" numOctaves={10} result=\"noise2\" seed=\"1\" />\r\n            <feOffset in=\"noise2\" dx=\"0\" dy=\"0\" result=\"offsetNoise2\">\r\n              <animate attributeName=\"dy\" values=\"0; -700\" dur=\"6s\" repeatCount=\"indefinite\" calcMode=\"linear\" />\r\n            </feOffset>\r\n\r\n            <feTurbulence type=\"turbulence\" baseFrequency=\"0.02\" numOctaves={10} result=\"noise1\" seed=\"2\" />\r\n            <feOffset in=\"noise1\" dx=\"0\" dy=\"0\" result=\"offsetNoise3\">\r\n              <animate attributeName=\"dx\" values=\"490; 0\" dur=\"6s\" repeatCount=\"indefinite\" calcMode=\"linear\" />\r\n            </feOffset>\r\n\r\n            <feTurbulence type=\"turbulence\" baseFrequency=\"0.02\" numOctaves={10} result=\"noise2\" seed=\"2\" />\r\n            <feOffset in=\"noise2\" dx=\"0\" dy=\"0\" result=\"offsetNoise4\">\r\n              <animate attributeName=\"dx\" values=\"0; -490\" dur=\"6s\" repeatCount=\"indefinite\" calcMode=\"linear\" />\r\n            </feOffset>\r\n\r\n            <feComposite in=\"offsetNoise1\" in2=\"offsetNoise2\" result=\"part1\" />\r\n            <feComposite in=\"offsetNoise3\" in2=\"offsetNoise4\" result=\"part2\" />\r\n            <feBlend in=\"part1\" in2=\"part2\" mode=\"color-dodge\" result=\"combinedNoise\" />\r\n            <feDisplacementMap\r\n              in=\"SourceGraphic\"\r\n              in2=\"combinedNoise\"\r\n              scale=\"30\"\r\n              xChannelSelector=\"R\"\r\n              yChannelSelector=\"B\"\r\n            />\r\n          </filter>\r\n        </defs>\r\n      </svg>\r\n\r\n      <div className=\"eb-layers\">\r\n        <div ref={strokeRef} className=\"eb-stroke\" />\r\n        <div className=\"eb-glow-1\" />\r\n        <div className=\"eb-glow-2\" />\r\n        <div className=\"eb-background-glow\" />\r\n      </div>\r\n\r\n      <div className=\"eb-content\">{children}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ElectricBorder;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5571, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ajgre/Omi-AI-1/src/PaywallModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React from 'react';\r\nimport ElectricBorder from './ElectricBorder';\r\nimport { getBrowserSupabaseClient } from '@/lib/supabase-browser';\r\n\r\nconst supabase = getBrowserSupabaseClient();\r\n\r\ninterface PaywallModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  limitType: 'chat' | 'image' | 'video';\r\n  currentUsage: number;\r\n  usageLimit: number;\r\n  resetAt?: string | null;\r\n}\r\n\r\nconst PaywallModal: React.FC<PaywallModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  limitType,\r\n  currentUsage,\r\n  usageLimit,\r\n  resetAt\r\n}) => {\r\n  if (!isOpen) return null;\r\n\r\n  const handleUpgrade = async (plan: 'pro' | 'ultra') => {\r\n    try {\r\n      // For Ultra plan, use direct Stripe payment link\r\n      if (plan === 'ultra') {\r\n        window.location.href = 'https://buy.stripe.com/fZu14ndCtdVZfvf4Y8dfG0g';\r\n        return;\r\n      }\r\n\r\n      // For Pro plan, use the API checkout session\r\n      // Get current user from Supabase\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n\r\n      if (!user) {\r\n        alert('Please log in to upgrade');\r\n        return;\r\n      }\r\n\r\n      // Create checkout session with plan type\r\n      const response = await fetch('/api/create-checkout-session', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          userId: user.id,\r\n          email: user.email,\r\n          plan: plan\r\n        }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.url) {\r\n        window.location.href = data.url;\r\n      } else {\r\n        throw new Error('No checkout URL returned');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error creating checkout:', error);\r\n      alert('Failed to start checkout. Please try again.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"paywall-overlay\" onClick={onClose}>\r\n      <div className=\"paywall-modal\" onClick={(e) => e.stopPropagation()}>\r\n        <button className=\"paywall-close\" onClick={onClose}>×</button>\r\n\r\n        <div className=\"paywall-content\">\r\n          <h2 className=\"plans-title\">Choose Your Plan</h2>\r\n\r\n          <div className=\"plans-container\">\r\n            {/* FREE PLAN */}\r\n            <div className=\"free-plan-card\">\r\n              <div className=\"card-border\"></div>\r\n              \r\n              <div className=\"plan-header\">\r\n                <div className=\"plan-icon-badge\">\r\n                  <div className=\"icon-inner\">🆓</div>\r\n                </div>\r\n                <div className=\"plan-title-group\">\r\n                  <h3 className=\"plan-name\">OMI FREE</h3>\r\n                  <p className=\"plan-subtitle\">For trying Omi</p>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"plan-pricing\">\r\n                <div className=\"price-wrapper\">\r\n                  <span className=\"amount\">Free</span>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"features-list\">\r\n                <div className=\"feature-item\">\r\n                  <div className=\"feature-icon-box\">\r\n                    <span className=\"icon\">🪙</span>\r\n                  </div>\r\n                  <span className=\"feature-text\">500 credits / month</span>\r\n                </div>\r\n                <div className=\"feature-item\">\r\n                  <div className=\"feature-icon-box\">\r\n                    <span className=\"icon\">💬</span>\r\n                  </div>\r\n                  <span className=\"feature-text\">Basic models only</span>\r\n                </div>\r\n                <div className=\"feature-item\">\r\n                  <div className=\"feature-icon-box\">\r\n                    <span className=\"icon\">🖼️</span>\r\n                  </div>\r\n                  <span className=\"feature-text\">~20–30 images/month</span>\r\n                </div>\r\n                <div className=\"feature-item disabled\">\r\n                  <div className=\"feature-icon-box\">\r\n                    <span className=\"icon\">❌</span>\r\n                  </div>\r\n                  <span className=\"feature-text\">No Video Generation</span>\r\n                </div>\r\n                <div className=\"feature-item disabled\">\r\n                  <div className=\"feature-icon-box\">\r\n                    <span className=\"icon\">❌</span>\r\n                  </div>\r\n                  <span className=\"feature-text\">No Long-term Memory</span>\r\n                </div>\r\n                <div className=\"feature-item\">\r\n                  <div className=\"feature-icon-box\">\r\n                    <span className=\"icon\">⚡</span>\r\n                  </div>\r\n                  <span className=\"feature-text\">Standard Processing</span>\r\n                </div>\r\n              </div>\r\n\r\n              <button\r\n                className=\"cta-button free-button\"\r\n                onClick={onClose}\r\n              >\r\n                <span className=\"button-text\">Current Plan</span>\r\n              </button>\r\n            </div>\r\n\r\n            {/* PRO PLAN */}\r\n            <div className=\"pro-plan-card\">\r\n              <div className=\"card-glow\"></div>\r\n              <div className=\"card-border\"></div>\r\n\r\n              <div className=\"plan-header\">\r\n                <div className=\"plan-icon-badge\">\r\n                  <div className=\"icon-inner\">⚡</div>\r\n                </div>\r\n                <div className=\"plan-title-group\">\r\n                  <h3 className=\"plan-name\">OMI PRO</h3>\r\n                  <p className=\"plan-subtitle\">Your main conversion plan</p>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"plan-pricing\">\r\n                <div className=\"price-wrapper\">\r\n                  <span className=\"currency\">$</span>\r\n                  <span className=\"amount\">4.99</span>\r\n                  <span className=\"billing-text\">/ month</span>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"features-list\">\r\n                <div className=\"feature-item\">\r\n                  <div className=\"feature-icon-box\">\r\n                    <span className=\"icon\">🪙</span>\r\n                  </div>\r\n                  <span className=\"feature-text\">5,000 credits / month</span>\r\n                </div>\r\n                <div className=\"feature-item\">\r\n                  <div className=\"feature-icon-box\">\r\n                    <span className=\"icon\">🧠</span>\r\n                  </div>\r\n                  <span className=\"feature-text\">Long-term Memory ✅</span>\r\n                </div>\r\n                <div className=\"feature-item\">\r\n                  <div className=\"feature-icon-box\">\r\n                    <span className=\"icon\">🖼️</span>\r\n                  </div>\r\n                  <span className=\"feature-text\">~100–150 images/month</span>\r\n                </div>\r\n                <div className=\"feature-item\">\r\n                  <div className=\"feature-icon-box\">\r\n                    <span className=\"icon\">🎬</span>\r\n                  </div>\r\n                  <span className=\"feature-text\">~10 short videos/month</span>\r\n                </div>\r\n                <div className=\"feature-item\">\r\n                  <div className=\"feature-icon-box\">\r\n                    <span className=\"icon\">☺</span>\r\n                  </div>\r\n                  <span className=\"feature-text\">2 Custom Omi's</span>\r\n                </div>\r\n                <div className=\"feature-item\">\r\n                  <div className=\"feature-icon-box\">\r\n                    <span className=\"icon\">⚡</span>\r\n                  </div>\r\n                  <span className=\"feature-text\">Faster Queue</span>\r\n                </div>\r\n              </div>\r\n\r\n              <button\r\n                className=\"cta-button\"\r\n                onClick={() => handleUpgrade('pro')}\r\n              >\r\n                <div className=\"button-glow\"></div>\r\n                <span className=\"button-text\">Choose Pro</span>\r\n              </button>\r\n\r\n              <div className=\"secure-badge\">\r\n                <span className=\"lock\">◆</span>\r\n                <span className=\"text\">Secured by Stripe</span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* ULTRA PLAN */}\r\n            <ElectricBorder\r\n              color=\"#C0C0C0\"\r\n              speed={1}\r\n              chaos={0.3}\r\n              thickness={2}\r\n              style={{ borderRadius: 16, width: '100%', display: 'flex' }}\r\n            >\r\n              <div className=\"ultra-plan-card\" style={{ width: '100%', flex: 1 }}>\r\n                <div className=\"ultra-badge\">ULTRA</div>\r\n\r\n                <div className=\"plan-header\">\r\n                  <div className=\"plan-icon-badge ultra-icon\">\r\n                    <div className=\"icon-inner\">✦</div>\r\n                  </div>\r\n                  <div className=\"plan-title-group\">\r\n                    <h3 className=\"plan-name ultra-name\">OMI ULTRA</h3>\r\n                    <p className=\"plan-subtitle\">For power users & creators</p>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"plan-pricing\">\r\n                  <div className=\"price-wrapper\">\r\n                    <span className=\"currency\">$</span>\r\n                    <span className=\"amount\">19.99</span>\r\n                    <span className=\"billing-text\">/ month</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"features-list\">\r\n                  <div className=\"feature-item\">\r\n                    <div className=\"feature-icon-box ultra-feature\">\r\n                      <span className=\"icon\">🪙</span>\r\n                    </div>\r\n                    <span className=\"feature-text\">25,000 credits / month</span>\r\n                  </div>\r\n                  <div className=\"feature-item\">\r\n                    <div className=\"feature-icon-box ultra-feature\">\r\n                      <span className=\"icon\">🧠</span>\r\n                    </div>\r\n                    <span className=\"feature-text\">Infinite Memory ✅</span>\r\n                  </div>\r\n                  <div className=\"feature-item\">\r\n                    <div className=\"feature-icon-box ultra-feature\">\r\n                      <span className=\"icon\">🖼️</span>\r\n                    </div>\r\n                    <span className=\"feature-text\">Unlimited Image Gen (soft cap)</span>\r\n                  </div>\r\n                  <div className=\"feature-item\">\r\n                    <div className=\"feature-icon-box ultra-feature\">\r\n                      <span className=\"icon\">🎬</span>\r\n                    </div>\r\n                    <span className=\"feature-text\">~50 videos/month</span>\r\n                  </div>\r\n                  <div className=\"feature-item\">\r\n                    <div className=\"feature-icon-box ultra-feature\">\r\n                      <span className=\"icon\">★</span>\r\n                    </div>\r\n                    <span className=\"feature-text\">Unlimited Custom Omi's</span>\r\n                  </div>\r\n                  <div className=\"feature-item\">\r\n                    <div className=\"feature-icon-box ultra-feature\">\r\n                      <span className=\"icon\">⚡</span>\r\n                    </div>\r\n                    <span className=\"feature-text\">Priority Processing</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <button\r\n                  className=\"cta-button ultra-button\"\r\n                  onClick={() => handleUpgrade('ultra')}\r\n                >\r\n                  <span className=\"button-text\">Choose Ultra</span>\r\n                </button>\r\n\r\n                <div className=\"secure-badge\">\r\n                  <span className=\"lock\">◆</span>\r\n                  <span className=\"text\">Secured by Stripe</span>\r\n                </div>\r\n              </div>\r\n            </ElectricBorder>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PaywallModal;\r\n"],"names":[],"mappings":";;;;;AAGA;AACA;AAJA;;;;AAMA,MAAM,WAAW,IAAA,2KAAwB;AAWzC,MAAM,eAA4C,CAAC,EACjD,MAAM,EACN,OAAO,EACP,SAAS,EACT,YAAY,EACZ,UAAU,EACV,OAAO,EACR;IACC,IAAI,CAAC,QAAQ,OAAO;IAEpB,MAAM,gBAAgB,OAAO;QAC3B,IAAI;YACF,iDAAiD;YACjD,IAAI,SAAS,SAAS;gBACpB,OAAO,QAAQ,CAAC,IAAI,GAAG;gBACvB;YACF;YAEA,6CAA6C;YAC7C,iCAAiC;YACjC,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;YAEtD,IAAI,CAAC,MAAM;gBACT,MAAM;gBACN;YACF;YAEA,yCAAyC;YACzC,MAAM,WAAW,MAAM,MAAM,gCAAgC;gBAC3D,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACnB,QAAQ,KAAK,EAAE;oBACf,OAAO,KAAK,KAAK;oBACjB,MAAM;gBACR;YACF;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAEhC,IAAI,KAAK,GAAG,EAAE;gBACZ,OAAO,QAAQ,CAAC,IAAI,GAAG,KAAK,GAAG;YACjC,OAAO;gBACL,MAAM,IAAI,MAAM;YAClB;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,4BAA4B;YAC1C,MAAM;QACR;IACF;IAEA,qBACE,wTAAC;QAAI,WAAU;QAAkB,SAAS;kBACxC,cAAA,wTAAC;YAAI,WAAU;YAAgB,SAAS,CAAC,IAAM,EAAE,eAAe;;8BAC9D,wTAAC;oBAAO,WAAU;oBAAgB,SAAS;8BAAS;;;;;;8BAEpD,wTAAC;oBAAI,WAAU;;sCACb,wTAAC;4BAAG,WAAU;sCAAc;;;;;;sCAE5B,wTAAC;4BAAI,WAAU;;8CAEb,wTAAC;oCAAI,WAAU;;sDACb,wTAAC;4CAAI,WAAU;;;;;;sDAEf,wTAAC;4CAAI,WAAU;;8DACb,wTAAC;oDAAI,WAAU;8DACb,cAAA,wTAAC;wDAAI,WAAU;kEAAa;;;;;;;;;;;8DAE9B,wTAAC;oDAAI,WAAU;;sEACb,wTAAC;4DAAG,WAAU;sEAAY;;;;;;sEAC1B,wTAAC;4DAAE,WAAU;sEAAgB;;;;;;;;;;;;;;;;;;sDAIjC,wTAAC;4CAAI,WAAU;sDACb,cAAA,wTAAC;gDAAI,WAAU;0DACb,cAAA,wTAAC;oDAAK,WAAU;8DAAS;;;;;;;;;;;;;;;;sDAI7B,wTAAC;4CAAI,WAAU;;8DACb,wTAAC;oDAAI,WAAU;;sEACb,wTAAC;4DAAI,WAAU;sEACb,cAAA,wTAAC;gEAAK,WAAU;0EAAO;;;;;;;;;;;sEAEzB,wTAAC;4DAAK,WAAU;sEAAe;;;;;;;;;;;;8DAEjC,wTAAC;oDAAI,WAAU;;sEACb,wTAAC;4DAAI,WAAU;sEACb,cAAA,wTAAC;gEAAK,WAAU;0EAAO;;;;;;;;;;;sEAEzB,wTAAC;4DAAK,WAAU;sEAAe;;;;;;;;;;;;8DAEjC,wTAAC;oDAAI,WAAU;;sEACb,wTAAC;4DAAI,WAAU;sEACb,cAAA,wTAAC;gEAAK,WAAU;0EAAO;;;;;;;;;;;sEAEzB,wTAAC;4DAAK,WAAU;sEAAe;;;;;;;;;;;;8DAEjC,wTAAC;oDAAI,WAAU;;sEACb,wTAAC;4DAAI,WAAU;sEACb,cAAA,wTAAC;gEAAK,WAAU;0EAAO;;;;;;;;;;;sEAEzB,wTAAC;4DAAK,WAAU;sEAAe;;;;;;;;;;;;8DAEjC,wTAAC;oDAAI,WAAU;;sEACb,wTAAC;4DAAI,WAAU;sEACb,cAAA,wTAAC;gEAAK,WAAU;0EAAO;;;;;;;;;;;sEAEzB,wTAAC;4DAAK,WAAU;sEAAe;;;;;;;;;;;;8DAEjC,wTAAC;oDAAI,WAAU;;sEACb,wTAAC;4DAAI,WAAU;sEACb,cAAA,wTAAC;gEAAK,WAAU;0EAAO;;;;;;;;;;;sEAEzB,wTAAC;4DAAK,WAAU;sEAAe;;;;;;;;;;;;;;;;;;sDAInC,wTAAC;4CACC,WAAU;4CACV,SAAS;sDAET,cAAA,wTAAC;gDAAK,WAAU;0DAAc;;;;;;;;;;;;;;;;;8CAKlC,wTAAC;oCAAI,WAAU;;sDACb,wTAAC;4CAAI,WAAU;;;;;;sDACf,wTAAC;4CAAI,WAAU;;;;;;sDAEf,wTAAC;4CAAI,WAAU;;8DACb,wTAAC;oDAAI,WAAU;8DACb,cAAA,wTAAC;wDAAI,WAAU;kEAAa;;;;;;;;;;;8DAE9B,wTAAC;oDAAI,WAAU;;sEACb,wTAAC;4DAAG,WAAU;sEAAY;;;;;;sEAC1B,wTAAC;4DAAE,WAAU;sEAAgB;;;;;;;;;;;;;;;;;;sDAIjC,wTAAC;4CAAI,WAAU;sDACb,cAAA,wTAAC;gDAAI,WAAU;;kEACb,wTAAC;wDAAK,WAAU;kEAAW;;;;;;kEAC3B,wTAAC;wDAAK,WAAU;kEAAS;;;;;;kEACzB,wTAAC;wDAAK,WAAU;kEAAe;;;;;;;;;;;;;;;;;sDAInC,wTAAC;4CAAI,WAAU;;8DACb,wTAAC;oDAAI,WAAU;;sEACb,wTAAC;4DAAI,WAAU;sEACb,cAAA,wTAAC;gEAAK,WAAU;0EAAO;;;;;;;;;;;sEAEzB,wTAAC;4DAAK,WAAU;sEAAe;;;;;;;;;;;;8DAEjC,wTAAC;oDAAI,WAAU;;sEACb,wTAAC;4DAAI,WAAU;sEACb,cAAA,wTAAC;gEAAK,WAAU;0EAAO;;;;;;;;;;;sEAEzB,wTAAC;4DAAK,WAAU;sEAAe;;;;;;;;;;;;8DAEjC,wTAAC;oDAAI,WAAU;;sEACb,wTAAC;4DAAI,WAAU;sEACb,cAAA,wTAAC;gEAAK,WAAU;0EAAO;;;;;;;;;;;sEAEzB,wTAAC;4DAAK,WAAU;sEAAe;;;;;;;;;;;;8DAEjC,wTAAC;oDAAI,WAAU;;sEACb,wTAAC;4DAAI,WAAU;sEACb,cAAA,wTAAC;gEAAK,WAAU;0EAAO;;;;;;;;;;;sEAEzB,wTAAC;4DAAK,WAAU;sEAAe;;;;;;;;;;;;8DAEjC,wTAAC;oDAAI,WAAU;;sEACb,wTAAC;4DAAI,WAAU;sEACb,cAAA,wTAAC;gEAAK,WAAU;0EAAO;;;;;;;;;;;sEAEzB,wTAAC;4DAAK,WAAU;sEAAe;;;;;;;;;;;;8DAEjC,wTAAC;oDAAI,WAAU;;sEACb,wTAAC;4DAAI,WAAU;sEACb,cAAA,wTAAC;gEAAK,WAAU;0EAAO;;;;;;;;;;;sEAEzB,wTAAC;4DAAK,WAAU;sEAAe;;;;;;;;;;;;;;;;;;sDAInC,wTAAC;4CACC,WAAU;4CACV,SAAS,IAAM,cAAc;;8DAE7B,wTAAC;oDAAI,WAAU;;;;;;8DACf,wTAAC;oDAAK,WAAU;8DAAc;;;;;;;;;;;;sDAGhC,wTAAC;4CAAI,WAAU;;8DACb,wTAAC;oDAAK,WAAU;8DAAO;;;;;;8DACvB,wTAAC;oDAAK,WAAU;8DAAO;;;;;;;;;;;;;;;;;;8CAK3B,wTAAC,sJAAc;oCACb,OAAM;oCACN,OAAO;oCACP,OAAO;oCACP,WAAW;oCACX,OAAO;wCAAE,cAAc;wCAAI,OAAO;wCAAQ,SAAS;oCAAO;8CAE1D,cAAA,wTAAC;wCAAI,WAAU;wCAAkB,OAAO;4CAAE,OAAO;4CAAQ,MAAM;wCAAE;;0DAC/D,wTAAC;gDAAI,WAAU;0DAAc;;;;;;0DAE7B,wTAAC;gDAAI,WAAU;;kEACb,wTAAC;wDAAI,WAAU;kEACb,cAAA,wTAAC;4DAAI,WAAU;sEAAa;;;;;;;;;;;kEAE9B,wTAAC;wDAAI,WAAU;;0EACb,wTAAC;gEAAG,WAAU;0EAAuB;;;;;;0EACrC,wTAAC;gEAAE,WAAU;0EAAgB;;;;;;;;;;;;;;;;;;0DAIjC,wTAAC;gDAAI,WAAU;0DACb,cAAA,wTAAC;oDAAI,WAAU;;sEACb,wTAAC;4DAAK,WAAU;sEAAW;;;;;;sEAC3B,wTAAC;4DAAK,WAAU;sEAAS;;;;;;sEACzB,wTAAC;4DAAK,WAAU;sEAAe;;;;;;;;;;;;;;;;;0DAInC,wTAAC;gDAAI,WAAU;;kEACb,wTAAC;wDAAI,WAAU;;0EACb,wTAAC;gEAAI,WAAU;0EACb,cAAA,wTAAC;oEAAK,WAAU;8EAAO;;;;;;;;;;;0EAEzB,wTAAC;gEAAK,WAAU;0EAAe;;;;;;;;;;;;kEAEjC,wTAAC;wDAAI,WAAU;;0EACb,wTAAC;gEAAI,WAAU;0EACb,cAAA,wTAAC;oEAAK,WAAU;8EAAO;;;;;;;;;;;0EAEzB,wTAAC;gEAAK,WAAU;0EAAe;;;;;;;;;;;;kEAEjC,wTAAC;wDAAI,WAAU;;0EACb,wTAAC;gEAAI,WAAU;0EACb,cAAA,wTAAC;oEAAK,WAAU;8EAAO;;;;;;;;;;;0EAEzB,wTAAC;gEAAK,WAAU;0EAAe;;;;;;;;;;;;kEAEjC,wTAAC;wDAAI,WAAU;;0EACb,wTAAC;gEAAI,WAAU;0EACb,cAAA,wTAAC;oEAAK,WAAU;8EAAO;;;;;;;;;;;0EAEzB,wTAAC;gEAAK,WAAU;0EAAe;;;;;;;;;;;;kEAEjC,wTAAC;wDAAI,WAAU;;0EACb,wTAAC;gEAAI,WAAU;0EACb,cAAA,wTAAC;oEAAK,WAAU;8EAAO;;;;;;;;;;;0EAEzB,wTAAC;gEAAK,WAAU;0EAAe;;;;;;;;;;;;kEAEjC,wTAAC;wDAAI,WAAU;;0EACb,wTAAC;gEAAI,WAAU;0EACb,cAAA,wTAAC;oEAAK,WAAU;8EAAO;;;;;;;;;;;0EAEzB,wTAAC;gEAAK,WAAU;0EAAe;;;;;;;;;;;;;;;;;;0DAInC,wTAAC;gDACC,WAAU;gDACV,SAAS,IAAM,cAAc;0DAE7B,cAAA,wTAAC;oDAAK,WAAU;8DAAc;;;;;;;;;;;0DAGhC,wTAAC;gDAAI,WAAU;;kEACb,wTAAC;wDAAK,WAAU;kEAAO;;;;;;kEACvB,wTAAC;wDAAK,WAAU;kEAAO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASzC;KAjSM;uCAmSS"}},
    {"offset": {"line": 6721, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ajgre/Omi-AI-1/src/SettingsModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { supabase } from './supabaseClient';\r\nimport { Eye, EyeOff, LogOut, CreditCard, Key, User, Shield, ChevronRight } from 'lucide-react';\r\nimport './SettingsModal.css';\r\n\r\ninterface SettingsModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  user: any;\r\n}\r\n\r\nexport default function SettingsModal({ isOpen, onClose, user }: SettingsModalProps) {\r\n  const [userEmail, setUserEmail] = useState('');\r\n  const [subscriptionTier, setSubscriptionTier] = useState('free');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [showApiKey, setShowApiKey] = useState<Record<string, boolean>>({});\r\n  const [apiKeys, setApiKeys] = useState({\r\n    openai: '',\r\n    anthropic: '',\r\n    google: '',\r\n    replicate: ''\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (user && isOpen) {\r\n      fetchUserData();\r\n    }\r\n  }, [user, isOpen]);\r\n\r\n  const fetchUserData = async () => {\r\n    if (!user) return;\r\n    \r\n    setIsLoading(true);\r\n    try {\r\n      const { data } = await supabase\r\n        .from('users')\r\n        .select('email, subscription_tier')\r\n        .eq('id', user.id)\r\n        .single();\r\n\r\n      if (data) {\r\n        setUserEmail(data.email || user.email);\r\n        setSubscriptionTier(data.subscription_tier || 'free');\r\n      }\r\n      \r\n      // Mock loading API keys from local storage or DB\r\n      const storedKeys = localStorage.getItem('omi_api_keys');\r\n      if (storedKeys) {\r\n        setApiKeys(JSON.parse(storedKeys));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching user data:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      await supabase.auth.signOut();\r\n      onClose();\r\n      window.location.reload();\r\n    } catch (error) {\r\n      console.error('Error logging out:', error);\r\n    }\r\n  };\r\n\r\n  const toggleApiKeyVisibility = (provider: string) => {\r\n    setShowApiKey(prev => ({\r\n      ...prev,\r\n      [provider]: !prev[provider]\r\n    }));\r\n  };\r\n\r\n  const handleApiKeyChange = (provider: string, value: string) => {\r\n    const newKeys = { ...apiKeys, [provider]: value };\r\n    setApiKeys(newKeys);\r\n    localStorage.setItem('omi_api_keys', JSON.stringify(newKeys));\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"settings-modal-overlay\" onClick={onClose}>\r\n      <div className=\"settings-modal\" onClick={(e) => e.stopPropagation()}>\r\n        <div className=\"settings-header\">\r\n          <div className=\"settings-title\">\r\n            <div className=\"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center\">\r\n              <User size={16} />\r\n            </div>\r\n            Account & API Settings\r\n          </div>\r\n          <button className=\"settings-close-btn\" onClick={onClose}>✕</button>\r\n        </div>\r\n\r\n        <div className=\"settings-content\">\r\n          {isLoading ? (\r\n            <div className=\"flex items-center justify-center py-12\">\r\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-white\"></div>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              {/* Profile Section */}\r\n              <div className=\"settings-section\">\r\n                <div className=\"section-label\">Profile</div>\r\n                <div className=\"settings-card\">\r\n                  <div className=\"settings-row\">\r\n                    <span className=\"row-label\">Email</span>\r\n                    <span className=\"row-value\">{userEmail || user?.email}</span>\r\n                  </div>\r\n                  <div className=\"settings-row\">\r\n                    <span className=\"row-label\">User ID</span>\r\n                    <span className=\"row-value\">{user?.id?.slice(0, 8)}...</span>\r\n                  </div>\r\n                  <div className=\"settings-row\">\r\n                    <span className=\"row-label\">Plan</span>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <span className={`px-2 py-1 rounded text-xs font-medium ${\r\n                        subscriptionTier === 'pro' ? 'bg-blue-500/20 text-blue-400' : 'bg-white/10 text-gray-400'\r\n                      }`}>\r\n                        {subscriptionTier.toUpperCase()}\r\n                      </span>\r\n                      {subscriptionTier === 'free' && (\r\n                        <button className=\"text-xs text-blue-400 hover:text-blue-300 font-medium\">\r\n                          Upgrade\r\n                        </button>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* API Keys Section */}\r\n              <div className=\"settings-section\">\r\n                <div className=\"section-label\">API Configuration</div>\r\n                <div className=\"settings-card\">\r\n                  {['openai', 'anthropic', 'google', 'replicate'].map((provider) => (\r\n                    <div key={provider} className=\"api-input-group border-b border-white/5 last:border-0\">\r\n                      <label className=\"api-input-label mb-2 capitalize\">\r\n                        {provider} API Key\r\n                      </label>\r\n                      <div className=\"api-input-wrapper\">\r\n                        <input\r\n                          type={showApiKey[provider] ? \"text\" : \"password\"}\r\n                          value={(apiKeys as any)[provider]}\r\n                          onChange={(e) => handleApiKeyChange(provider, e.target.value)}\r\n                          placeholder={`sk-...`}\r\n                          className=\"api-input\"\r\n                        />\r\n                        <button\r\n                          className=\"api-visibility-toggle\"\r\n                          onClick={() => toggleApiKeyVisibility(provider)}\r\n                        >\r\n                          {showApiKey[provider] ? <EyeOff size={14} /> : <Eye size={14} />}\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Actions */}\r\n              <div className=\"settings-section mt-4\">\r\n                <button className=\"settings-btn btn-danger\" onClick={handleLogout}>\r\n                  <LogOut size={16} />\r\n                  Sign Out\r\n                </button>\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7137, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ajgre/Omi-AI-1/src/usageTracking.ts"],"sourcesContent":["// Usage tracking helper functions\r\n\r\nexport interface UsageCheckResult {\r\n  canPerform: boolean;\r\n  isPro: boolean;\r\n  currentUsage: number;\r\n  usageLimit: number;\r\n  resetAt: string | null;\r\n}\r\n\r\nexport type UsageType = 'chat' | 'image_gen' | 'video_gen';\r\n\r\nexport async function checkUsageLimit(\r\n  userId: string,\r\n  usageType: UsageType\r\n): Promise<UsageCheckResult> {\r\n  try {\r\n    const response = await fetch('/api/usage?action=check', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ userId, usageType }),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error('Failed to check usage limit');\r\n    }\r\n\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error('Error checking usage limit:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport async function incrementUsage(\r\n  userId: string,\r\n  usageType: UsageType\r\n): Promise<{ success: boolean; limitReached?: boolean }> {\r\n  try {\r\n    const response = await fetch('/api/usage?action=increment', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ userId, usageType }),\r\n    });\r\n\r\n    const data = await response.json();\r\n\r\n    if (response.status === 403 && data.limitReached) {\r\n      return { success: false, limitReached: true };\r\n    }\r\n\r\n    if (!response.ok) {\r\n      throw new Error('Failed to increment usage');\r\n    }\r\n\r\n    return data;\r\n  } catch (error) {\r\n    console.error('Error incrementing usage:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport async function createCheckoutSession(\r\n  userId: string,\r\n  email: string\r\n): Promise<string> {\r\n  try {\r\n    const response = await fetch('/api/create-checkout-session', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ userId, email }),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error('Failed to create checkout session');\r\n    }\r\n\r\n    const data = await response.json();\r\n    return data.url;\r\n  } catch (error) {\r\n    console.error('Error creating checkout session:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport function getLimitMessage(usageType: UsageType, currentUsage: number, usageLimit: number): string {\r\n  switch (usageType) {\r\n    case 'chat':\r\n      return `You've used ${currentUsage} of ${usageLimit} chat prompts`;\r\n    case 'image_gen':\r\n      return `You've used ${currentUsage} of ${usageLimit} image generations`;\r\n    case 'video_gen':\r\n      return `You've used ${currentUsage} of ${usageLimit} video generations`;\r\n  }\r\n}\r\n"],"names":[],"mappings":"AAAA,kCAAkC;;;;;;;;;;;AAY3B,eAAe,gBACpB,MAAc,EACd,SAAoB;IAEpB,IAAI;QACF,MAAM,WAAW,MAAM,MAAM,2BAA2B;YACtD,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAQ;YAAU;QAC3C;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,IAAI,MAAM;QAClB;QAEA,OAAO,MAAM,SAAS,IAAI;IAC5B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,MAAM;IACR;AACF;AAEO,eAAe,eACpB,MAAc,EACd,SAAoB;IAEpB,IAAI;QACF,MAAM,WAAW,MAAM,MAAM,+BAA+B;YAC1D,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAQ;YAAU;QAC3C;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,IAAI,SAAS,MAAM,KAAK,OAAO,KAAK,YAAY,EAAE;YAChD,OAAO;gBAAE,SAAS;gBAAO,cAAc;YAAK;QAC9C;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,IAAI,MAAM;QAClB;QAEA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,MAAM;IACR;AACF;AAEO,eAAe,sBACpB,MAAc,EACd,KAAa;IAEb,IAAI;QACF,MAAM,WAAW,MAAM,MAAM,gCAAgC;YAC3D,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAQ;YAAM;QACvC;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,IAAI,MAAM;QAClB;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,OAAO,KAAK,GAAG;IACjB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,oCAAoC;QAClD,MAAM;IACR;AACF;AAEO,SAAS,gBAAgB,SAAoB,EAAE,YAAoB,EAAE,UAAkB;IAC5F,OAAQ;QACN,KAAK;YACH,OAAO,CAAC,YAAY,EAAE,aAAa,IAAI,EAAE,WAAW,aAAa,CAAC;QACpE,KAAK;YACH,OAAO,CAAC,YAAY,EAAE,aAAa,IAAI,EAAE,WAAW,kBAAkB,CAAC;QACzE,KAAK;YACH,OAAO,CAAC,YAAY,EAAE,aAAa,IAAI,EAAE,WAAW,kBAAkB,CAAC;IAC3E;AACF"}},
    {"offset": {"line": 7236, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ajgre/Omi-AI-1/src/SplashPage.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useRouter } from 'next/navigation';\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport FormattedText from './FormattedText';\r\nimport Dock from './Dock';\r\nimport InfiniteScroll from './InfiniteScroll';\r\nimport InfiniteMenu from './InfiniteMenu';\r\nimport OmiLoadingAnimation from './OmiLoadingAnimation';\r\nimport ChromaGrid from './ChromaGrid';\r\nimport CircularGallery from './CircularGallery';\r\nimport ConversationSidebar from './ConversationSidebar';\r\nimport NewsTicker from './NewsTicker';\r\nimport MediaGallery from './MediaGallery';\r\nimport SearchModal from './SearchModal';\r\nimport ImagePreviewTooltip from './ImagePreviewTooltip';\r\nimport VideoPreviewTooltip from './VideoPreviewTooltip';\r\nimport { useAuth } from '@/context/auth-context';\r\nimport { supabase } from './supabaseClient';\r\nimport * as db from './databaseService';\r\nimport type { DbConversation } from './databaseService';\r\nimport PaywallModal from './PaywallModal';\r\nimport SettingsModal from './SettingsModal';\r\nimport { checkUsageLimit, incrementUsage, UsageType } from './usageTracking';\r\nimport { saveGeneratedMedia } from './mediaService';\r\n\r\ninterface ChatMessage {\r\n  role: 'user' | 'assistant';\r\n  content: string;\r\n  timestamp: Date;\r\n}\r\n\r\n// Helper function to extract text from v5 UIMessage (handles both parts and content format)\r\nfunction getMessageText(message: Message): string {\r\n  return message.content || '';\r\n}\r\n\r\ninterface Message {\r\n  id: string;\r\n  role: 'user' | 'assistant';\r\n  content: string;\r\n}\r\n\r\nfunction SplashPage() {\r\n  // Authentication\r\n  const { user } = useAuth();\r\n  const router = useRouter();\r\n  const [currentConversationId, setCurrentConversationId] = useState<string | null>(null);\r\n\r\n  // Chat state management (replacing AI SDK)\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const [input, setInput] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const [showAIModels, setShowAIModels] = useState(false);\r\n  const [selectedModel, setSelectedModel] = useState<string>('Gemini Pro'); // Default model\r\n  const [selectedFeature, setSelectedFeature] = useState<string | null>(null);\r\n  const [attachedFiles, setAttachedFiles] = useState<File[]>([]);\r\n  const [isCompareMode, setIsCompareMode] = useState(false);\r\n  const [secondaryModel, setSecondaryModel] = useState<string | null>(null);\r\n  const [secondaryMessages, setSecondaryMessages] = useState<ChatMessage[]>([]);\r\n  const [showCreateMenu, setShowCreateMenu] = useState(false);\r\n  const [isPersonasActive, setIsPersonasActive] = useState(false);\r\n  const [selectedPersona, setSelectedPersona] = useState<string | null>(null);\r\n  const [isSynthesizeActive, setIsSynthesizeActive] = useState(false);\r\n  const [isPulseActive, setIsPulseActive] = useState(false);\r\n  const [isFullscreen, setIsFullscreen] = useState(false);\r\n  const [isChatHidden, setIsChatHidden] = useState(false);\r\n  const [isInstantGenActive, setIsInstantGenActive] = useState(false);\r\n  const [generatedImage, setGeneratedImage] = useState<string | null>(null);\r\n  const [isGeneratingImage, setIsGeneratingImage] = useState(false);\r\n  const imageContainerRef = useRef<HTMLDivElement>(null);\r\n  const [isVideoGenActive, setIsVideoGenActive] = useState(false);\r\n  const [generatedVideo, setGeneratedVideo] = useState<string | null>(null);\r\n  const [isGeneratingVideo, setIsGeneratingVideo] = useState(false);\r\n  const videoContainerRef = useRef<HTMLDivElement>(null);\r\n  const [isHoveringImageGen, setIsHoveringImageGen] = useState(false);\r\n  const [isHoveringVideoGen, setIsHoveringVideoGen] = useState(false);\r\n  const [isVoiceModeActive, setIsVoiceModeActive] = useState(false);\r\n\r\n  // Paywall and subscription management\r\n  const [showPaywall, setShowPaywall] = useState(false);\r\n  const [paywallLimitType, setPaywallLimitType] = useState<'chat' | 'image' | 'video'>('chat');\r\n  const [paywallUsage, setPaywallUsage] = useState<{ current: number; limit: number; resetAt: string | null }>({\r\n    current: 0,\r\n    limit: 15,\r\n    resetAt: null\r\n  });\r\n\r\n  // Conversation management\r\n  const [conversations, setConversations] = useState<DbConversation[]>([]);\r\n  const [showConversations, setShowConversations] = useState(false);\r\n\r\n  // Settings modal\r\n  const [showSettings, setShowSettings] = useState(false);\r\n\r\n  // Media Gallery\r\n  const [showMediaGallery, setShowMediaGallery] = useState(false);\r\n\r\n  // Search Modal\r\n  const [showSearch, setShowSearch] = useState(false);\r\n\r\n  // Debug log for gallery state\r\n  useEffect(() => {\r\n    console.log('🎨 Media Gallery State:', showMediaGallery);\r\n  }, [showMediaGallery]);\r\n\r\n  // Subscription tier\r\n  const [subscriptionTier, setSubscriptionTier] = useState<'free' | 'pro'>('free');\r\n\r\n  // Feature buttons data\r\n  const featureButtons = [\r\n    {\r\n      name: 'Focus',\r\n      icon: '⊙',\r\n      description: 'Enter distraction-free fullscreen mode',\r\n      onClick: () => {\r\n        setIsFullscreen(true);\r\n        setIsPersonasActive(false);\r\n        setIsSynthesizeActive(false);\r\n        setIsPulseActive(false);\r\n        console.log('Focus mode activated');\r\n      }\r\n    },\r\n    {\r\n      name: 'Personas',\r\n      icon: '◐',\r\n      description: selectedPersona ? `Active: ${selectedPersona}` : 'Shift Omi\\'s voice (teacher, critic, explorer, poet)',\r\n      onClick: () => {\r\n        const isActivating = selectedFeature !== 'Personas';\r\n        setSelectedFeature(isActivating ? 'Personas' : null);\r\n        setIsPersonasActive(isActivating); // Toggle ChromaGrid overlay\r\n        setIsSynthesizeActive(false); // Turn off ElectricBorder animation\r\n        console.log('Personas clicked - ChromaGrid', isActivating ? 'activated' : 'deactivated');\r\n      }\r\n    },\r\n    {\r\n      name: 'Image Gen',\r\n      icon: '🖼️',\r\n      description: isInstantGenActive ? 'Image generation active - type a prompt!' : 'Real-time AI image generation',\r\n      onClick: () => {\r\n        const isActivating = selectedFeature !== 'Image Gen';\r\n        setSelectedFeature(isActivating ? 'Image Gen' : null);\r\n        setIsInstantGenActive(isActivating);\r\n        setIsPersonasActive(false);\r\n        setIsSynthesizeActive(false);\r\n        setIsPulseActive(false);\r\n        if (!isActivating) {\r\n          setGeneratedImage(null); // Clear image when deactivating\r\n        }\r\n        console.log('Image Gen mode', isActivating ? 'activated' : 'deactivated');\r\n      }\r\n    },\r\n    {\r\n      name: 'Compare',\r\n      icon: '⚖',\r\n      description: 'Instantly query multiple LLMs side-by-side',\r\n      onClick: () => {\r\n        const isActivating = selectedFeature !== 'Compare';\r\n        setSelectedFeature(isActivating ? 'Compare' : null);\r\n        setIsCompareMode(isActivating);\r\n        setIsPersonasActive(false); // Turn off ChromaGrid animation\r\n        setIsSynthesizeActive(false); // Turn off ElectricBorder animation\r\n        if (!isActivating) {\r\n          setSecondaryMessages([]);\r\n          setSecondaryModel(null);\r\n        }\r\n        console.log('Compare Minds clicked');\r\n      }\r\n    },\r\n    {\r\n      name: 'Video Gen',\r\n      icon: '🎬',\r\n      description: 'Generate AI videos from text prompts',\r\n      onClick: () => {\r\n        const isActivating = selectedFeature !== 'Video Gen';\r\n        setSelectedFeature(isActivating ? 'Video Gen' : null);\r\n        setIsVideoGenActive(isActivating); // Activate video generation mode\r\n        setIsPersonasActive(false); // Turn off ChromaGrid animation\r\n        setIsSynthesizeActive(false); // Turn off ElectricBorder animation\r\n        setIsPulseActive(false);\r\n        if (!isActivating) {\r\n          setGeneratedVideo(null); // Clear video when deactivating\r\n        }\r\n        console.log('Video Gen mode', isActivating ? 'activated' : 'deactivated');\r\n      }\r\n    }\r\n  ];\r\n\r\n  // Helper function to check usage and show paywall if needed\r\n  const checkAndShowPaywall = async (usageType: UsageType): Promise<boolean> => {\r\n    if (!user) return true; // Allow guests to use without limits for now\r\n\r\n    try {\r\n      const result = await checkUsageLimit(user.id, usageType);\r\n\r\n      if (!result.canPerform) {\r\n        setPaywallLimitType(usageType === 'chat' ? 'chat' : usageType === 'image_gen' ? 'image' : 'video');\r\n        setPaywallUsage({\r\n          current: result.currentUsage,\r\n          limit: result.usageLimit,\r\n          resetAt: result.resetAt\r\n        });\r\n        setShowPaywall(true);\r\n        return false;\r\n      }\r\n\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error checking usage limit:', error);\r\n      return true; // Allow on error to not block user\r\n    }\r\n  };\r\n\r\n  // Handle Escape key to close AI Models screen, Create menu, and fullscreen\r\n  useEffect(() => {\r\n    const handleEscapeKey = (event: KeyboardEvent) => {\r\n      if (event.key === 'Escape' && isFullscreen) {\r\n        setIsFullscreen(false);\r\n      } else if (event.key === 'Escape' && showAIModels) {\r\n        setShowAIModels(false);\r\n      } else if (event.key === 'Escape' && showCreateMenu) {\r\n        setShowCreateMenu(false);\r\n      } else if (event.key === 'Escape' && isPulseActive) {\r\n        setIsPulseActive(false);\r\n        setSelectedFeature(null);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('keydown', handleEscapeKey);\r\n    return () => document.removeEventListener('keydown', handleEscapeKey);\r\n  }, [isFullscreen, showAIModels, showCreateMenu, isPulseActive]);\r\n\r\n  // Load conversations when user logs in (but start fresh)\r\n  useEffect(() => {\r\n    if (user) {\r\n      // Clear current messages to start fresh\r\n      setMessages([]);\r\n      setCurrentConversationId(null);\r\n      // Just load the list, don't auto-load a conversation\r\n      loadConversationsOnly();\r\n      // Fetch subscription tier\r\n      fetchSubscriptionTier();\r\n    }\r\n  }, [user]);\r\n\r\n  // Fetch subscription tier\r\n  const fetchSubscriptionTier = async () => {\r\n    if (!user) return;\r\n\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('users')\r\n        .select('subscription_tier')\r\n        .eq('id', user.id)\r\n        .single();\r\n\r\n      if (error) throw error;\r\n      setSubscriptionTier(data?.subscription_tier || 'free');\r\n    } catch (error) {\r\n      console.error('Error fetching subscription tier:', error);\r\n      setSubscriptionTier('free');\r\n    }\r\n  };\r\n\r\n  // Auto-save messages to database when user is logged in\r\n  useEffect(() => {\r\n    if (user && currentConversationId && messages.length > 0) {\r\n      const lastMessage = messages[messages.length - 1];\r\n      // Save the last message to database (only user and assistant messages)\r\n      if (lastMessage.role === 'user' || lastMessage.role === 'assistant') {\r\n        const messageText = getMessageText(lastMessage);\r\n        db.saveMessage(currentConversationId, lastMessage.role, messageText);\r\n      }\r\n    }\r\n  }, [messages, currentConversationId, user]);\r\n\r\n  // Load just the list of conversations (don't auto-load messages)\r\n  const loadConversationsOnly = async () => {\r\n    if (!user) return;\r\n\r\n    const userConversations = await db.getUserConversations(user.id);\r\n    setConversations(userConversations);\r\n  };\r\n\r\n  const loadConversation = async (conversationId: string) => {\r\n    setCurrentConversationId(conversationId);\r\n    const dbMessages = await db.getConversationMessages(conversationId);\r\n\r\n    // Convert database messages to simple Message format\r\n    const aiMessages: Message[] = dbMessages.map(msg => ({\r\n      id: msg.id || `msg-${Date.now()}-${Math.random()}`,\r\n      role: msg.role as 'user' | 'assistant',\r\n      content: msg.content,\r\n    }));\r\n\r\n    setMessages(aiMessages);\r\n  };\r\n\r\n  const createNewConversation = async () => {\r\n    if (!user) {\r\n      // Guest mode - just clear messages\r\n      setMessages([]);\r\n      setCurrentConversationId(null);\r\n      return;\r\n    }\r\n\r\n    const newConversation = await db.createConversation(user.id, 'New Conversation', selectedModel);\r\n    if (newConversation) {\r\n      setCurrentConversationId(newConversation.id);\r\n      setMessages([]);\r\n      await loadConversationsOnly(); // Refresh list only\r\n    }\r\n  };\r\n\r\n  const handleDeleteConversation = async (conversationId: string) => {\r\n    await db.deleteConversation(conversationId);\r\n\r\n    // If deleting current conversation, clear it\r\n    if (conversationId === currentConversationId) {\r\n      setCurrentConversationId(null);\r\n      setMessages([]);\r\n    }\r\n\r\n    await loadConversationsOnly(); // Refresh list only\r\n  };\r\n\r\n  const handleFileAttach = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const files = e.target.files;\r\n    if (files) {\r\n      const newFiles = Array.from(files);\r\n      setAttachedFiles(prev => [...prev, ...newFiles]);\r\n    }\r\n    // Reset the input so the same file can be selected again\r\n    e.target.value = '';\r\n  };\r\n\r\n  const removeAttachedFile = (index: number) => {\r\n    setAttachedFiles(prev => prev.filter((_, i) => i !== index));\r\n  };\r\n\r\n  // Input change handler for v5\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setInput(e.target.value);\r\n  };\r\n\r\n  // Wrapper for handleSubmit to integrate with conversation management  \r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    console.log('handleSubmit called - Input:', input.trim(), '| isLoading:', isLoading);\r\n    console.log('Messages count:', messages.length);\r\n\r\n    if (input.trim() && !isLoading && !isGeneratingImage && !isGeneratingVideo) {\r\n      // If Video Gen mode is active, generate a video instead of sending a chat message\r\n      if (isVideoGenActive) {\r\n        // Check usage limit before proceeding\r\n        const canProceed = await checkAndShowPaywall('video_gen');\r\n        if (!canProceed) return;\r\n\r\n        console.log('Generating video with prompt:', input.trim());\r\n        setIsGeneratingVideo(true);\r\n        setGeneratedVideo(null);\r\n\r\n        try {\r\n          const response = await fetch('/api/generate-video', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ prompt: input.trim() }),\r\n          });\r\n\r\n          const data = await response.json();\r\n\r\n          if (response.ok && data.videoUrl) {\r\n            console.log('Video generated successfully:', data.videoUrl);\r\n            setGeneratedVideo(data.videoUrl);\r\n\r\n            // Save generated video to database\r\n            if (user) {\r\n              try {\r\n                await saveGeneratedMedia(user.id, 'video', data.videoUrl, input.trim());\r\n                console.log('Video saved to gallery');\r\n              } catch (saveError) {\r\n                console.error('Failed to save video to gallery:', saveError);\r\n              }\r\n            }\r\n\r\n            // Increment usage after successful generation\r\n            if (user) {\r\n              await incrementUsage(user.id, 'video_gen');\r\n            }\r\n\r\n            // Scroll to video after a short delay to allow render\r\n            setTimeout(() => {\r\n              videoContainerRef.current?.scrollIntoView({\r\n                behavior: 'smooth',\r\n                block: 'start'\r\n              });\r\n            }, 100);\r\n          } else {\r\n            console.error('Video generation failed:', data.error);\r\n            alert('Failed to generate video: ' + (data.error || 'Unknown error'));\r\n          }\r\n        } catch (error) {\r\n          console.error('Error generating video:', error);\r\n          alert('Failed to generate video. Please try again.');\r\n        } finally {\r\n          setIsGeneratingVideo(false);\r\n          setInput(''); // Clear input after generation\r\n        }\r\n        return;\r\n      }\r\n\r\n      // If Instant Gen mode is active, generate an image instead of sending a chat message\r\n      if (isInstantGenActive) {\r\n        // Check usage limit before proceeding\r\n        const canProceed = await checkAndShowPaywall('image_gen');\r\n        if (!canProceed) return;\r\n\r\n        console.log('Generating image with prompt:', input.trim());\r\n        setIsGeneratingImage(true);\r\n        setGeneratedImage(null);\r\n\r\n        try {\r\n          const response = await fetch('/api/generate-image', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ prompt: input.trim(), aspectRatio: '3:2' }),\r\n          });\r\n\r\n          const data = await response.json();\r\n\r\n          if (response.ok && data.imageUrl) {\r\n            console.log('Image generated successfully:', data.imageUrl);\r\n            setGeneratedImage(data.imageUrl);\r\n\r\n            // Save generated image to database\r\n            if (user) {\r\n              try {\r\n                await saveGeneratedMedia(user.id, 'image', data.imageUrl, input.trim());\r\n                console.log('Image saved to gallery');\r\n              } catch (saveError) {\r\n                console.error('Failed to save image to gallery:', saveError);\r\n              }\r\n            }\r\n\r\n            // Increment usage after successful generation\r\n            if (user) {\r\n              await incrementUsage(user.id, 'image_gen');\r\n            }\r\n\r\n            // Scroll to image after a short delay to allow render\r\n            setTimeout(() => {\r\n              imageContainerRef.current?.scrollIntoView({\r\n                behavior: 'smooth',\r\n                block: 'start'\r\n              });\r\n            }, 100);\r\n          } else {\r\n            console.error('Image generation failed:', data.error);\r\n            alert('Failed to generate image: ' + (data.error || 'Unknown error'));\r\n          }\r\n        } catch (error) {\r\n          console.error('Error generating image:', error);\r\n          alert('Failed to generate image. Please try again.');\r\n        } finally {\r\n          setIsGeneratingImage(false);\r\n          setInput(''); // Clear input after generation\r\n        }\r\n        return;\r\n      }\r\n\r\n      console.log('Processing message submission...');\r\n      console.log('=== CURRENT STATE CHECK ===');\r\n      console.log('isVideoGenActive:', isVideoGenActive);\r\n      console.log('isInstantGenActive:', isInstantGenActive);\r\n      console.log('selectedFeature:', selectedFeature);\r\n\r\n      // NO USAGE LIMIT FOR CHAT - unlimited messages for all users\r\n\r\n      // Create a new conversation if this is the first message and user is logged in\r\n      if (user && !currentConversationId && messages.length === 0) {\r\n        console.log('Creating new conversation for logged-in user...');\r\n        const title = db.generateConversationTitle(input.trim());\r\n        const newConversation = await db.createConversation(user.id, title, selectedModel);\r\n        if (newConversation) {\r\n          setCurrentConversationId(newConversation.id);\r\n          await loadConversationsOnly(); // Refresh sidebar list only\r\n        }\r\n      } else if (!user) {\r\n        console.log('Guest mode - no conversation to create');\r\n      }\r\n\r\n      try {\r\n        setIsLoading(true);\r\n        console.log('Sending message:', { text: input.trim() });\r\n\r\n        // Add user message to UI immediately\r\n        const userMessage: Message = {\r\n          id: `user-${Date.now()}`,\r\n          role: 'user',\r\n          content: input.trim(),\r\n        };\r\n\r\n        setMessages(prev => [...prev, userMessage]);\r\n        setInput(''); // Clear input immediately\r\n        setAttachedFiles([]);\r\n\r\n        // Call chat API\r\n        const response = await fetch('/api/chat', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({\r\n            messages: [...messages, userMessage]\r\n          }),\r\n        });\r\n\r\n        if (!response.ok) {\r\n          throw new Error('API call failed');\r\n        }\r\n\r\n        const data = await response.json();\r\n        console.log('API response:', data);\r\n\r\n        // Add assistant message to UI\r\n        const assistantMessage: Message = {\r\n          id: `assistant-${Date.now()}`,\r\n          role: 'assistant',\r\n          content: data.message,\r\n        };\r\n\r\n        setMessages(prev => [...prev, assistantMessage]);\r\n        setIsLoading(false);\r\n\r\n        // NO USAGE TRACKING FOR CHAT - unlimited messages\r\n\r\n      } catch (error) {\r\n        console.error('Error in sendMessage:', error);\r\n        console.error('Error details:', {\r\n          message: error instanceof Error ? error.message : 'Unknown error',\r\n          stack: error instanceof Error ? error.stack : undefined,\r\n        });\r\n        setIsLoading(false);\r\n      }\r\n    } else {\r\n      console.log('Submit blocked - Empty input or already loading');\r\n    }\r\n  };\r\n\r\n  // Dock items configuration\r\n  const dockItems = [\r\n    {\r\n      icon: '⌘',\r\n      label: 'Command',\r\n      onClick: () => {\r\n        router.push('/command-hub');\r\n      }\r\n    },\r\n    {\r\n      icon: '⊞',\r\n      label: 'Gallery',\r\n      onClick: () => {\r\n        console.log('Gallery button clicked!');\r\n        setShowMediaGallery(true);\r\n      }\r\n    },\r\n    {\r\n      icon: '◈',\r\n      label: 'Search',\r\n      onClick: () => {\r\n        console.log('Search button clicked!');\r\n        setShowSearch(true);\r\n      }\r\n    },\r\n    {\r\n      icon: '⚙',\r\n      label: 'AI News',\r\n      onClick: () => {\r\n        console.log('Settings clicked - activating Pulse mode');\r\n        setIsPulseActive(!isPulseActive); // Toggle FlowingMenu\r\n        setIsPersonasActive(false); // Turn off other animations\r\n        setIsSynthesizeActive(false);\r\n      }\r\n    }\r\n  ];\r\n\r\n  // Handle AI model selection\r\n  const handleModelSelect = (modelName: string) => {\r\n    setSelectedModel(modelName);\r\n\r\n    // Add fade out animation to models section\r\n    const aiModelsSection = document.getElementById('ai-models-section');\r\n    if (aiModelsSection) {\r\n      aiModelsSection.classList.add('fade-out');\r\n    }\r\n\r\n    // After fade out, scroll back to chat and hide models\r\n    setTimeout(() => {\r\n      setShowAIModels(false);\r\n\r\n      // Smooth scroll back to chat interface\r\n      const chatInterface = document.querySelector('.chat-interface');\r\n      if (chatInterface) {\r\n        chatInterface.scrollIntoView({\r\n          behavior: 'smooth',\r\n          block: 'center'\r\n        });\r\n      }\r\n\r\n      // Remove fade out class after animation\r\n      setTimeout(() => {\r\n        if (aiModelsSection) {\r\n          aiModelsSection.classList.remove('fade-out');\r\n        }\r\n      }, 100);\r\n    }, 300);\r\n  };\r\n\r\n  // AI Models data - simple names only\r\n  const aiModelsData = ['GPT', 'Claude', 'Gemini', 'Grok', 'DeepSeek', 'Perplexity', 'Qwen'];\r\n\r\n  // Transform data for InfiniteScroll component\r\n  const infiniteScrollItems = aiModelsData.map((modelName) => ({\r\n    content: (\r\n      <div\r\n        className=\"ai-model-card clickable\"\r\n        onClick={() => handleModelSelect(modelName)}\r\n      >\r\n        {modelName}\r\n      </div>\r\n    )\r\n  }));\r\n\r\n  return (\r\n    <>\r\n      {/* Conversation Sidebar */}\r\n      {user && (\r\n        <ConversationSidebar\r\n          conversations={conversations}\r\n          currentConversationId={currentConversationId}\r\n          onSelectConversation={loadConversation}\r\n          onNewConversation={createNewConversation}\r\n          onDeleteConversation={handleDeleteConversation}\r\n          isOpen={showConversations}\r\n          onClose={() => setShowConversations(false)}\r\n        />\r\n      )}\r\n\r\n      <div className=\"splash-page\">\r\n        {/* Hamburger Menu - Fixed to top-left corner */}\r\n        {user && !isFullscreen && (\r\n          <button\r\n            className=\"conversations-btn\"\r\n            onClick={() => setShowConversations(true)}\r\n            title=\"Conversations\"\r\n          >\r\n            ≡\r\n          </button>\r\n        )}\r\n\r\n        {/* Top Right Action Buttons - Fixed to top-right corner */}\r\n        {!isFullscreen && (\r\n          <div className=\"top-right-actions\">\r\n            {/* New Conversation Button - FIRST */}\r\n            <button\r\n              className=\"header-action-btn new-conversation-btn\"\r\n              onClick={createNewConversation}\r\n              title=\"Start new conversation\"\r\n            >\r\n              <span className=\"header-btn-icon\">✦</span>\r\n              <span className=\"header-btn-text\">New Chat</span>\r\n            </button>\r\n\r\n            {/* Upgrade Button (for free users) - No badge in header */}\r\n            {user && subscriptionTier === 'free' && (\r\n              <button\r\n                className=\"header-action-btn upgrade-btn\"\r\n                onClick={() => setShowPaywall(true)}\r\n                title=\"Upgrade to Pro\"\r\n              >\r\n                <span className=\"header-btn-icon\">◈</span>\r\n                <span className=\"header-btn-text\">Upgrade</span>\r\n              </button>\r\n            )}\r\n\r\n            {/* Account Tier Indicator (for pro users only) */}\r\n            {user && subscriptionTier === 'pro' && (\r\n              <div className=\"account-tier-badge pro-badge\">\r\n                <span className=\"tier-icon\">◆</span>\r\n                <span className=\"tier-text\">Pro Account</span>\r\n              </div>\r\n            )}\r\n\r\n            {/* Account Button */}\r\n            {user ? (\r\n              <button\r\n                className=\"header-action-btn account-btn\"\r\n                onClick={() => setShowSettings(true)}\r\n                title=\"Account settings\"\r\n              >\r\n                <span className=\"header-btn-icon\">◉</span>\r\n                <span className=\"header-btn-text\">{user.email?.split('@')[0] || 'Account'}</span>\r\n              </button>\r\n            ) : (\r\n              <button\r\n                className=\"header-action-btn guest-mode-btn\"\r\n                onClick={() => window.location.href = '/login'}\r\n                title=\"Sign in to save your conversations\"\r\n              >\r\n                <span className=\"header-btn-icon\">◎</span>\r\n                <span className=\"header-btn-text\">Guest Mode</span>\r\n              </button>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Free Account Badge - Bottom Left Corner */}\r\n        {user && subscriptionTier === 'free' && !isFullscreen && (\r\n          <div className=\"account-tier-badge-fixed\">\r\n            <span className=\"tier-icon\">◎</span>\r\n            <span className=\"tier-text\">Free Account</span>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"chat-interface\">\r\n          <div className=\"chat-header\">\r\n            <div className=\"header-left\">\r\n              <h1 className=\"chat-title\">Omi AI</h1>\r\n              <div className=\"selected-model\">\r\n                <span className=\"model-label\">Active Model:</span>\r\n                <span className=\"model-name\">{selectedModel}</span>\r\n                <button\r\n                  className=\"model-change-btn\"\r\n                  onClick={() => setShowAIModels(true)}\r\n                  title=\"Change AI model\"\r\n                >\r\n                  ⚙️\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Feature Buttons - Above Dialog Box */}\r\n          <div className=\"feature-buttons-horizontal\">\r\n            {featureButtons.map((button, index) => {\r\n              const isSelected = selectedFeature === button.name;\r\n              const isImageGenButton = button.name === 'Image Gen';\r\n              const isVideoGenButton = button.name === 'Video Gen';\r\n              const isCompareButton = button.name === 'Compare';\r\n              const isPro = isCompareButton || isVideoGenButton;\r\n\r\n              return (\r\n                <button\r\n                  key={button.name}\r\n                  className={`feature-button-horizontal ${isSelected ? 'selected' : 'unselected'} ${isPro ? 'pro' : ''}`}\r\n                  onClick={button.onClick}\r\n                  onMouseEnter={() => {\r\n                    if (isImageGenButton) setIsHoveringImageGen(true);\r\n                    if (isVideoGenButton) setIsHoveringVideoGen(true);\r\n                  }}\r\n                  onMouseLeave={() => {\r\n                    if (isImageGenButton) setIsHoveringImageGen(false);\r\n                    if (isVideoGenButton) setIsHoveringVideoGen(false);\r\n                  }}\r\n                  style={{\r\n                    animationDelay: `${index * 0.1}s`\r\n                  }}\r\n                >\r\n                  <span className={isSelected ? \"feature-button-selected-text\" : \"feature-button-static-text\"}>\r\n                    {button.icon} {button.name}\r\n                    {isPro && <span className=\"pro-badge-inline\">PRO</span>}\r\n                  </span>\r\n                  {isImageGenButton ? (\r\n                    <ImagePreviewTooltip isVisible={isHoveringImageGen} />\r\n                  ) : isVideoGenButton ? (\r\n                    <VideoPreviewTooltip isVisible={isHoveringVideoGen} />\r\n                  ) : (\r\n                    <div className=\"feature-button-tooltip\">\r\n                      {button.description}\r\n                    </div>\r\n                  )}\r\n                </button>\r\n              );\r\n            })}\r\n          </div>\r\n\r\n\r\n\r\n          {/* Chat Wrapper - Handles Fullscreen Mode */}\r\n          <div className={`chat-wrapper ${isFullscreen ? 'fullscreen' : ''} ${isChatHidden ? 'hidden' : ''}`}>\r\n            {/* Chat Container - Show in Compare Mode or when messages exist */}\r\n            {(messages.length > 0 || isCompareMode) && (\r\n              <div className={`chat-container ${isCompareMode ? 'compare-mode' : ''}`}>\r\n                {/* Primary Chat Panel */}\r\n                <div className=\"chat-panel primary-panel\">\r\n                  <div className=\"panel-header\">\r\n                    <h3>\r\n                      {isCompareMode ? (\r\n                        <select\r\n                          className=\"model-selector\"\r\n                          value={selectedModel}\r\n                          onChange={(e) => setSelectedModel(e.target.value)}\r\n                        >\r\n                          <option value=\"Gemini Pro\">Gemini Pro</option>\r\n                          <option value=\"Claude\">Claude</option>\r\n                          <option value=\"GPT-4\">GPT-4</option>\r\n                          <option value=\"Llama\">Llama</option>\r\n                        </select>\r\n                      ) : (\r\n                        selectedModel || 'Primary AI'\r\n                      )}\r\n                    </h3>\r\n                    <div className=\"panel-controls\">\r\n                      <button\r\n                        className=\"panel-control-btn hide-chat-btn\"\r\n                        onClick={() => setIsChatHidden(true)}\r\n                        title=\"Hide Chat\"\r\n                      >\r\n                        ─\r\n                      </button>\r\n                      <button\r\n                        className=\"panel-control-btn fullscreen-toggle\"\r\n                        onClick={() => setIsFullscreen(!isFullscreen)}\r\n                        title={isFullscreen ? \"Exit Fullscreen (ESC)\" : \"Fullscreen\"}\r\n                      >\r\n                        {isFullscreen ? '⤓' : '⤢'}\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"chat-messages\">\r\n                    {messages.length === 0 && isCompareMode ? (\r\n                      <div className=\"empty-chat-message\">\r\n                        <p>Compare mode activated. Start chatting to see responses from both models side-by-side.</p>\r\n                      </div>\r\n                    ) : (\r\n                      <>\r\n                        {messages.map((message) => (\r\n                          <div key={message.id} className={`message ${message.role}`}>\r\n                            <div className=\"message-content\">\r\n                              {message.role === 'assistant' ? (\r\n                                <FormattedText\r\n                                  text={getMessageText(message)}\r\n                                  delay={0.2}\r\n                                />\r\n                              ) : (\r\n                                getMessageText(message)\r\n                              )}\r\n                            </div>\r\n                            {message.role === 'assistant' && (\r\n                              <div className=\"message-actions\">\r\n                                <button className=\"msg-action-btn\" title=\"Want a shorter version?\">Shorten</button>\r\n                                <button className=\"msg-action-btn\" title=\"Turn this into an email?\">Email</button>\r\n                                <button className=\"msg-action-btn\" title=\"Make this visual?\">Visual</button>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        ))}\r\n                        {isLoading && (\r\n                          <div className=\"message assistant loading\">\r\n                            <div className=\"message-content\">\r\n                              <div className=\"typing-indicator\">\r\n                                <span></span>\r\n                                <span></span>\r\n                                <span></span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n                      </>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Secondary Chat Panel (Compare Mode) */}\r\n                {isCompareMode && (\r\n                  <div className=\"chat-panel secondary-panel\">\r\n                    <div className=\"panel-header\">\r\n                      <h3>\r\n                        {secondaryModel || (\r\n                          <select\r\n                            className=\"model-selector\"\r\n                            value={secondaryModel || ''}\r\n                            onChange={(e) => setSecondaryModel(e.target.value)}\r\n                          >\r\n                            <option value=\"\">Select Model</option>\r\n                            <option value=\"Claude\">Claude</option>\r\n                            <option value=\"GPT-4\">GPT-4</option>\r\n                            <option value=\"Gemini Pro\">Gemini Pro</option>\r\n                            <option value=\"Llama\">Llama</option>\r\n                          </select>\r\n                        )}\r\n                      </h3>\r\n                    </div>\r\n                    <div className=\"chat-messages\">\r\n                      {secondaryMessages.length === 0 ? (\r\n                        <div className=\"empty-chat-message\">\r\n                          <p>Select a model above to compare responses.</p>\r\n                        </div>\r\n                      ) : (\r\n                        <>\r\n                          {secondaryMessages.map((message, index) => (\r\n                            <div key={index} className={`message ${message.role}`}>\r\n                              <div className=\"message-content\">\r\n                                {message.role === 'assistant' ? (\r\n                                  <FormattedText\r\n                                    text={message.content}\r\n                                    delay={0.2}\r\n                                  />\r\n                                ) : (\r\n                                  message.content\r\n                                )}\r\n                              </div>\r\n                              <div className=\"message-time\">\r\n                                {message.timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                              </div>\r\n                            </div>\r\n                          ))}\r\n                        </>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            <form className=\"chat-form\" onSubmit={handleSubmit}>\r\n              {/* Attached files display */}\r\n              {attachedFiles.length > 0 && (\r\n                <div className=\"attached-files\">\r\n                  {attachedFiles.map((file, index) => (\r\n                    <div key={index} className=\"attached-file\">\r\n                      <span className=\"file-icon\">\r\n                        {file.type.startsWith('image/') ? '🖼️' :\r\n                          file.type.startsWith('video/') ? '🎥' :\r\n                            file.type.includes('pdf') ? '📄' : '📎'}\r\n                      </span>\r\n                      <span className=\"file-name\">{file.name}</span>\r\n                      <button\r\n                        type=\"button\"\r\n                        className=\"remove-file\"\r\n                        onClick={() => removeAttachedFile(index)}\r\n                        title=\"Remove file\"\r\n                      >\r\n                        ×\r\n                      </button>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n\r\n              {/* Image Gen Mode Indicator */}\r\n              {isInstantGenActive && (\r\n                <div className=\"instant-gen-indicator\">\r\n                  <span className=\"instant-gen-icon\">⚡</span>\r\n                  <span className=\"instant-gen-text\">\r\n                    Image Gen Mode Active - Describe the image you want to create\r\n                  </span>\r\n                </div>\r\n              )}\r\n\r\n              {/* Video Gen Mode Indicator */}\r\n              {isVideoGenActive && (\r\n                <div className=\"video-gen-indicator\">\r\n                  <span className=\"video-gen-icon\">🎬</span>\r\n                  <span className=\"video-gen-text\">\r\n                    Video Gen Mode Active - Describe the video scene you want to create\r\n                  </span>\r\n                </div>\r\n              )}\r\n\r\n              <div className={`chat-input-container ${isSynthesizeActive ? 'synthesize-active' : ''} ${isInstantGenActive ? 'instant-gen-active' : ''} ${isVideoGenActive ? 'video-gen-active' : ''}`}>\r\n                <input\r\n                  type=\"file\"\r\n                  id=\"file-input\"\r\n                  className=\"file-input\"\r\n                  onChange={handleFileAttach}\r\n                  multiple\r\n                  accept=\"image/*,video/*,.pdf,.doc,.docx,.txt\"\r\n                  style={{ display: 'none' }}\r\n                />\r\n                {!isInstantGenActive && (\r\n                  <>\r\n                    <button\r\n                      type=\"button\"\r\n                      className=\"attach-file-btn\"\r\n                      onClick={() => document.getElementById('file-input')?.click()}\r\n                      title=\"Attach files\"\r\n                      disabled={isLoading}\r\n                    >\r\n                      📎\r\n                    </button>\r\n                    <button\r\n                      type=\"button\"\r\n                      className={`voice-mode-btn ${isVoiceModeActive ? 'active' : ''}`}\r\n                      onClick={() => setIsVoiceModeActive(!isVoiceModeActive)}\r\n                      title={isVoiceModeActive ? \"Disable Voice Mode\" : \"Enable Voice Mode\"}\r\n                      disabled={isLoading}\r\n                    >\r\n                      <div className=\"sound-wave-icon\">\r\n                        <span></span>\r\n                        <span></span>\r\n                        <span></span>\r\n                        <span></span>\r\n                        <span></span>\r\n                      </div>\r\n                    </button>\r\n                  </>\r\n                )}\r\n                <input\r\n                  type=\"text\"\r\n                  value={input}\r\n                  onChange={handleInputChange}\r\n                  placeholder={\r\n                    isVideoGenActive\r\n                      ? \"🎬 Describe your video scene (e.g., 'a woman walking through Tokyo at night')...\"\r\n                      : isInstantGenActive\r\n                        ? \"⚡ Describe your image (e.g., 'A sunset over mountains')...\"\r\n                        : isSynthesizeActive\r\n                          ? \"Type your message in Synthesize mode...\"\r\n                          : \"Type your message...\"\r\n                  }\r\n                  className=\"chat-input\"\r\n                  autoFocus\r\n                  disabled={isLoading || isGeneratingImage || isGeneratingVideo}\r\n                />\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"chat-submit\"\r\n                  disabled={!input.trim() || isLoading || isGeneratingImage || isGeneratingVideo}\r\n                >\r\n                  {isLoading ? (\r\n                    <div className=\"loading-spinner\">\r\n                      <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <circle cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"2\" opacity=\"0.3\" />\r\n                        <path d=\"M12 2A10 10 0 0 1 22 12\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" />\r\n                      </svg>\r\n                    </div>\r\n                  ) : (\r\n                    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                      <path d=\"M2 12L22 2L13 21L11 13L2 12Z\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                    </svg>\r\n                  )}\r\n                </button>\r\n\r\n                {/* Electric Border Animation Overlay for Synthesize Mode */}\r\n                {isSynthesizeActive && (\r\n                  <div className=\"electric-border-overlay\">\r\n                    <svg className=\"electric-border-svg\" viewBox=\"0 0 100 100\" preserveAspectRatio=\"none\">\r\n                      <defs>\r\n                        <filter id=\"electric-glow\">\r\n                          <feTurbulence baseFrequency=\"0.02\" numOctaves=\"3\" result=\"noise\" seed=\"1\">\r\n                            <animate attributeName=\"seed\" values=\"1;5;1\" dur=\"3s\" repeatCount=\"indefinite\" />\r\n                          </feTurbulence>\r\n                          <feDisplacementMap in=\"SourceGraphic\" in2=\"noise\" scale=\"2\" />\r\n                          <feGaussianBlur stdDeviation=\"0.5\" />\r\n                          <feColorMatrix values=\"0 0 0 0 0.9 0 0 0 0 0.9 0 0 0 0 0.9 0 0 0 1 0\" />\r\n                        </filter>\r\n                      </defs>\r\n                      <rect\r\n                        x=\"1\"\r\n                        y=\"1\"\r\n                        width=\"98\"\r\n                        height=\"98\"\r\n                        fill=\"none\"\r\n                        stroke=\"#e5e5e5\"\r\n                        strokeWidth=\"0.5\"\r\n                        filter=\"url(#electric-glow)\"\r\n                        rx=\"3\"\r\n                        ry=\"3\"\r\n                      >\r\n                        <animate\r\n                          attributeName=\"stroke-opacity\"\r\n                          values=\"0.3;1;0.3\"\r\n                          dur=\"2s\"\r\n                          repeatCount=\"indefinite\"\r\n                        />\r\n                      </rect>\r\n                      <rect\r\n                        x=\"0.5\"\r\n                        y=\"0.5\"\r\n                        width=\"99\"\r\n                        height=\"99\"\r\n                        fill=\"none\"\r\n                        stroke=\"#e5e5e5\"\r\n                        strokeWidth=\"0.3\"\r\n                        rx=\"3\"\r\n                        ry=\"3\"\r\n                        opacity=\"0.6\"\r\n                      >\r\n                        <animate\r\n                          attributeName=\"stroke-dasharray\"\r\n                          values=\"0,400;200,200;400,0;0,400\"\r\n                          dur=\"4s\"\r\n                          repeatCount=\"indefinite\"\r\n                        />\r\n                      </rect>\r\n                    </svg>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </form>\r\n          </div>\r\n\r\n          {/* Generated Image Display */}\r\n          {isInstantGenActive && (\r\n            <div className=\"generated-image-container\" ref={imageContainerRef}>\r\n              {isGeneratingImage ? (\r\n                <div className=\"generating-indicator\">\r\n                  <div className=\"generating-spinner\">\r\n                    <div className=\"metallic-paint-loader\">\r\n                      <OmiLoadingAnimation />\r\n                    </div>\r\n                  </div>\r\n                  <p className=\"generating-text\">Generating your image...</p>\r\n                </div>\r\n              ) : generatedImage ? (\r\n                <div className=\"generated-image-wrapper\">\r\n                  <div className=\"generated-image-header\">\r\n                    <h3>⚡ Generated Image</h3>\r\n                    <div className=\"generated-image-actions\">\r\n                      <a\r\n                        href=\"https://percify.io\"\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        className=\"image-action-btn percify-btn\"\r\n                        title=\"Edit with Percify\"\r\n                      >\r\n                        ✨ Percify It\r\n                      </a>\r\n                      <a\r\n                        href={generatedImage}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        className=\"image-action-btn\"\r\n                        title=\"Open in new tab\"\r\n                      >\r\n                        🔗 Open\r\n                      </a>\r\n                      <button\r\n                        className=\"image-action-btn\"\r\n                        onClick={() => setGeneratedImage(null)}\r\n                        title=\"Clear image\"\r\n                      >\r\n                        ✕ Clear\r\n                      </button>\r\n                      <button className=\"image-action-btn\" title=\"See variations?\">Variations</button>\r\n                      <button className=\"image-action-btn\" title=\"Turn into video?\">Video</button>\r\n                      <button className=\"image-action-btn\" title=\"Refine this?\">Refine</button>\r\n                    </div>\r\n                  </div>\r\n                  <img\r\n                    src={generatedImage}\r\n                    alt=\"Generated\"\r\n                    className=\"generated-image\"\r\n                  />\r\n                </div>\r\n              ) : (\r\n                <div className=\"instant-gen-placeholder\">\r\n                  <div className=\"placeholder-icon\">⚡</div>\r\n                  <p className=\"placeholder-text\">Enter a prompt above to generate an image</p>\r\n                  <p className=\"placeholder-subtext\">Describe what you want to see and press enter</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Generated Video Display */}\r\n          {isVideoGenActive && (\r\n            <div className=\"generated-video-container\" ref={videoContainerRef}>\r\n              {isGeneratingVideo ? (\r\n                <div className=\"generating-indicator\">\r\n                  <div className=\"generating-spinner\">\r\n                    <div className=\"metallic-paint-loader\">\r\n                      <OmiLoadingAnimation />\r\n                    </div>\r\n                  </div>\r\n                  <p className=\"generating-text\">Generating your video... This may take 1-2 minutes</p>\r\n                </div>\r\n              ) : generatedVideo ? (\r\n                <div className=\"generated-video-wrapper\">\r\n                  <div className=\"generated-video-header\">\r\n                    <h3>🎬 Generated Video</h3>\r\n                    <div className=\"generated-video-actions\">\r\n                      <a\r\n                        href={generatedVideo}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        className=\"video-action-btn\"\r\n                        title=\"Open in new tab\"\r\n                      >\r\n                        🔗 Open\r\n                      </a>\r\n                      <a\r\n                        href={generatedVideo}\r\n                        download=\"generated-video.mp4\"\r\n                        className=\"video-action-btn\"\r\n                        title=\"Download video\"\r\n                      >\r\n                        ⬇ Download\r\n                      </a>\r\n                      <button\r\n                        className=\"video-action-btn\"\r\n                        onClick={() => setGeneratedVideo(null)}\r\n                        title=\"Clear video\"\r\n                      >\r\n                        ✕ Clear\r\n                      </button>\r\n                      <button className=\"video-action-btn\" title=\"Add captions?\">Captions</button>\r\n                      <button className=\"video-action-btn\" title=\"Change tone?\">Tone</button>\r\n                    </div>\r\n                  </div>\r\n                  <video\r\n                    src={generatedVideo}\r\n                    controls\r\n                    className=\"generated-video\"\r\n                    autoPlay\r\n                    loop\r\n                  />\r\n                </div>\r\n              ) : (\r\n                <div className=\"video-gen-placeholder\">\r\n                  <div className=\"placeholder-icon\">🎬</div>\r\n                  <p className=\"placeholder-text\">Enter a prompt above to generate a video</p>\r\n                  <p className=\"placeholder-subtext\">Describe the scene you want to create and press enter</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* AI Models Section */}\r\n        {showAIModels && (\r\n          <div className=\"ai-models-overlay\" onClick={() => setShowAIModels(false)}>\r\n            <div id=\"ai-models-section\" className={`ai-models-section ${showAIModels ? 'show' : ''}`} onClick={(e) => e.stopPropagation()}>\r\n              <h2 className=\"ai-models-title\">Popular AI Models</h2>\r\n              <div className=\"ai-models-container\">\r\n                <InfiniteScroll\r\n                  items={infiniteScrollItems}\r\n                  width=\"100%\"\r\n                  maxHeight=\"400px\"\r\n                  itemMinHeight={120}\r\n                  isTilted={true}\r\n                  tiltDirection=\"left\"\r\n                  autoplay={true}\r\n                  autoplaySpeed={1}\r\n                  autoplayDirection=\"up\"\r\n                  pauseOnHover={true}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* ChromaGrid Overlay Animation for Personas */}\r\n      {isPersonasActive && (\r\n        <ChromaGrid\r\n          items={undefined} // Uses demo data\r\n          ease=\"power2.out\"\r\n          damping={0.75}\r\n          fadeOut={0.5}\r\n          onClose={() => setIsPersonasActive(false)}\r\n          selectedPersona={selectedPersona}\r\n          onPersonaSelect={(persona) => {\r\n            console.log('Persona selected in SplashPage:', persona.title);\r\n            // Toggle persona selection - deselect if clicking the same persona\r\n            if (selectedPersona === persona.title) {\r\n              setSelectedPersona(null);\r\n              console.log('Persona deselected:', persona.title);\r\n            } else {\r\n              setSelectedPersona(persona.title);\r\n              console.log('Persona selected:', persona.title);\r\n            }\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/* CircularGallery Overlay Animation for Pulse */}\r\n      {isPulseActive && (\r\n        <div style={{ position: 'fixed', inset: 0, zIndex: 9000, background: '#000' }}>\r\n          <button\r\n            onClick={() => {\r\n              setIsPulseActive(false);\r\n              setSelectedFeature(null);\r\n            }}\r\n            style={{\r\n              position: 'absolute',\r\n              top: '2rem',\r\n              right: '2rem',\r\n              background: 'rgba(255, 255, 255, 0.1)',\r\n              border: '1px solid rgba(255, 255, 255, 0.2)',\r\n              borderRadius: '50%',\r\n              width: '48px',\r\n              height: '48px',\r\n              color: 'white',\r\n              fontSize: '1.5rem',\r\n              cursor: 'pointer',\r\n              zIndex: 9001,\r\n            }}\r\n          >\r\n            ✕\r\n          </button>\r\n          <CircularGallery\r\n            bend={3}\r\n            textColor=\"#ffffff\"\r\n            borderRadius={0.05}\r\n            scrollEase={0.02}\r\n            items={[\r\n              {\r\n                link: '#',\r\n                text: 'Currently Trending',\r\n                image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/0/04/ChatGPT_logo.svg/1024px-ChatGPT_logo.svg.png'\r\n              },\r\n              {\r\n                link: '#',\r\n                text: 'AI News',\r\n                image: 'https://www.gstatic.com/lamda/images/gemini_sparkle_v002_d4735304ff6292a690345.svg'\r\n              },\r\n              {\r\n                link: '#',\r\n                text: 'LLM Updates',\r\n                image: 'https://companieslogo.com/img/orig/MSFT-a203b22d.png'\r\n              },\r\n              {\r\n                link: '#',\r\n                text: 'AI Content',\r\n                image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Google_Gemini_logo.svg/1024px-Google_Gemini_logo.svg.png'\r\n              },\r\n              {\r\n                link: '#',\r\n                text: 'Grok AI',\r\n                image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/5/57/X_logo_2023_%28white%29.png/1200px-X_logo_2023_%28white%29.png'\r\n              },\r\n              {\r\n                link: '#',\r\n                text: 'Claude AI',\r\n                image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/1/13/ChatGPT-Logo.png/1200px-ChatGPT-Logo.png'\r\n              },\r\n              {\r\n                link: '#',\r\n                text: 'Midjourney',\r\n                image: 'https://seeklogo.com/images/M/midjourney-logo-156382BA01-seeklogo.com.png'\r\n              },\r\n              {\r\n                link: '#',\r\n                text: 'Perplexity AI',\r\n                image: 'https://uxwing.com/wp-content/themes/uxwing/download/brands-and-social-media/perplexity-ai-icon.png'\r\n              }\r\n            ]}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* Show Chat Button - Visible when chat is hidden */}\r\n      {isChatHidden && (\r\n        <button\r\n          className=\"show-chat-btn\"\r\n          onClick={() => setIsChatHidden(false)}\r\n          title=\"Show Chat\"\r\n        >\r\n          💬 Show Chat\r\n        </button>\r\n      )}\r\n\r\n      {/* Dock - always visible - Outside scrollable container */}\r\n      {!isFullscreen && <Dock items={dockItems} />}\r\n\r\n      {/* Infinite Menu Overlay */}\r\n      <InfiniteMenu\r\n        isVisible={showCreateMenu}\r\n        onClose={() => setShowCreateMenu(false)}\r\n      />\r\n\r\n      {/* Paywall Modal */}\r\n      <PaywallModal\r\n        isOpen={showPaywall}\r\n        onClose={() => setShowPaywall(false)}\r\n        limitType={paywallLimitType}\r\n        currentUsage={paywallUsage.current}\r\n        usageLimit={paywallUsage.limit}\r\n        resetAt={paywallUsage.resetAt}\r\n      />\r\n\r\n      {/* Settings Modal */}\r\n      <SettingsModal\r\n        isOpen={showSettings}\r\n        onClose={() => setShowSettings(false)}\r\n        user={user}\r\n      />\r\n\r\n      {/* Media Gallery */}\r\n      <MediaGallery\r\n        isOpen={showMediaGallery}\r\n        userId={user?.id || ''}\r\n        onClose={() => setShowMediaGallery(false)}\r\n      />\r\n\r\n      {/* Search Modal */}\r\n      <SearchModal\r\n        isOpen={showSearch}\r\n        onClose={() => setShowSearch(false)}\r\n      />\r\n\r\n      {/* News Ticker - Fixed at bottom */}\r\n      {!isFullscreen && <NewsTicker />}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SplashPage;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 9576, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ajgre/Omi-AI-1/app/chat/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport SplashPage from '@/src/SplashPage';\r\n\r\nexport default function ChatPage() {\r\n  return <SplashPage />;\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIe,SAAS;IACtB,qBAAO,wTAAC,kJAAU;;;;;AACpB;KAFwB"}}]
}